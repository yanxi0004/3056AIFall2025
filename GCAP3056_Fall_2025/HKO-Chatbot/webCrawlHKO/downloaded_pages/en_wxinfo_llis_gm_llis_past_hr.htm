<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="UTF-8">
    <title>Cloud-to-ground lightning count distribution over Hong Kong in the past hour｜Hong Kong Observatory(HKO)｜Lightning Location Information Services</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="keywords" content="Cloud-to-ground lightning count distribution over Hong Kong in the past hour">
    <meta name="description" content="Cloud-to-ground lightning count distribution over Hong Kong in the past hour">
    <meta name="recordId" content="2018123100000036592">
    <meta name="lang" content="en">
	<meta property="fb:app_id" content="468280339992518" />
	<meta property="og:type" content="website" />
	<meta property="og:title" content="Cloud-to-ground lightning count distribution over Hong Kong in the past hour" />
	<meta property="og:description" content="&amp;nbsp;Note : 1. This web page provides cloud-to-ground lightning count distribution during the past hour (updated at around 10 minute past the hour) in four geographical regions in Hong Kong:-" />
	<meta property="og:image" content="" />
	<meta property="og:url" content="https://www.hko.gov.hk/en/wxinfo/llis/gm/llis_past_hr.htm" />
	<meta property="og:image:width" content="600" />
	<meta property="og:image:height" content="314" />
    <!-- Bootstrap -->
    <link id="styleSheet0" href="/css/bootstrap.css" rel="stylesheet" media="screen" type="text/css">
    <link id="styleSheet1" href="/css/bsplus.css" rel="stylesheet" media="all" type="text/css">
    <link id="styleSheet2" href="/css/default.css" rel="stylesheet" media="screen" type="text/css">
    <link id="styleSheet3" href="/css/layout.css" rel="stylesheet" media="all" type="text/css">
    <link href="/css/flexslider.css" rel="stylesheet" media="all" type="text/css">
    <link href="/css/jquery-ui.min.css" rel="stylesheet" media="all" type="text/css">
    <style type="text/css">
.abc{
display: none;
}
		@media screen and (max-width: 874px){
		.self_row2_table>tr>td, .self_row2_table>tbody>tr>td {
			display: block;
			width: auto!important;
		}
	}
    #llis_map {
        position: absolute;
        font-size: 75%;
        top: 100px;
        left: 0px;
        border: 0;
        margin: 0;
        padding: 0;
        z-index: 50;
        visibility: hidden;
    }
    @media screen and (max-width: 767px) {
        #map1_data>table>tbody>tr>td>span,
        #map2_data>table>tbody>tr>td>span,
        #map3_data>table>tbody>tr>td>span,
        #map4_data>table>tbody>tr>td>span {
            font-size: 200% !important;
        }
        #map1_legend>table>tbody>tr>td>span,
        #map2_legend>table>tbody>tr>td>span,
        #map3_legend>table>tbody>tr>td>span,
        #map4_legend>table>tbody>tr>td>span {
            font-size: 100% !important;
        }
        #map1_data>table>tbody>tr>td,
        #map1_data>table>tbody>tr>td,
        #map1_data>table>tbody>tr>td,
        #map1_data>table>tbody>tr>td {
            width: 50px !important;
        }
        #map1_data>table>tbody>tr,
        #map2_data>table>tbody>tr,
        #map3_data>table>tbody>tr,
        #map4_data>table>tbody>tr {
            height: 50px !important;
        }
        #map1_legend>table,
        #map2_legend>table,
        #map3_legend>table,
        #map4_legend>table {
            width: unset !important;
        }
        #select_id_1,
        #select_id_2,
        #select_id_3,
        #select_id_4,
        #select_id_5 {
            text-align: center !important;
        }
        #select_id_1>select,
        #select_id_2>select,
        #select_id_3>select,
        #select_id_4>select,
        #select_id_5>select {
            width: 200px !important;
        }
        #counts_frame>table {
            width: 100% !important;
        }
	}
	@media screen and (max-width: 500px){
		#map1_legend ,
		#map2_legend ,
		#map3_legend ,
		#map4_legend {
			display:none;
		}
		.table_align_left{
			margin-top:10px;
		}
	}
	@media screen and (max-width: 767px) {
		.self_row2_table>tbody>tr>td span, .self_row2_table>tbody>tr>td select {
			margin: 5px auto;
		}
		.self_row2_table>tbody>tr>td#select_id_5 {
			padding-top: 5px;
		}
	}
	@media screen and (max-width: 400px) {
		#map1_legend>table>tbody>tr>td>span, #map2_legend>table>tbody>tr>td>span, #map3_legend>table>tbody>tr>td>span, #map4_legend>table>tbody>tr>td>span {
			display: none;
		}
	}	
	.note_table td {
		padding: 5px;
	}
    </style>
    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:/ -->
    <!--[if lt IE 9]>
    <script type="text/javascript" src="js/html5shiv.js"></script>
    <script type="text/javascript" src="js/respond.min.js"></script>
    <![endif]-->
    <script type="text/javascript" src="/js/jquery.min.js"></script>
    <script type="text/javascript" src="/js/jquery-ui.min.js"></script>
    <script type="text/javascript" src="/js/jquery.cookie.js"></script>
    <script type="text/javascript" src="/js/jquery.easing.js"></script>
    <script type="text/javascript" src="/js/jquery.flexslider.js"></script>
    <script type="text/javascript" src="/js/menu.js"></script>
    <script type="text/javascript" src="/js/bootstrap.js"></script>

	<script type="text/javascript" src="/js/moment.js"></script>
	<script type="text/javascript" src="/js/vue.min.js"></script>
	<script type="text/javascript" src="/js/vue-router.js"></script>
	<script type="text/javascript" src="/js/vue-extend.js"></script>
	<script type="text/javascript" src="/js/tmp.js"></script>
	<script type="text/javascript" src="/js/jquery.rwdImageMaps.min.js"></script>


    <script type="text/javascript">
		
var menu_id = '';
var section_id = '2018010100000010801';

    window.location.replace("../gm_index.htm");   
		
		wcag_setTimer(1800000, 'eng');
		//<![CDATA[
		//Defining Variables - start //
		var dataFile = '../../../../wxinfo/llis/gm/hourly_count';
		var map = null;
		var mapControl = null;
		var refreshtime = 300000;
		var counts_frame=''; 
		$( document ).ready(function() {
		//Defining Variables - end //
		/* 20180713: remove Google Map
		function load_map(){
		  if (GBrowserIsCompatible()) {
			// create the map
			G_NORMAL_MAP.getTileLayers()[0].getOpacity = function () {return 0.6;};
			G_PHYSICAL_MAP.getTileLayers()[0].getOpacity = function () {return 1.0;};
			map = new google.maps.Map(document.getElementById("llis_map"));
			map.addMapType(G_PHYSICAL_MAP);
			map.setCenter(new GLatLng( 22.30, 114.12), 10, G_PHYSICAL_MAP); //change zoom level 
			//customize and add map type control
			//map.addControl(new GLargeMapControl());   
			//map.addControl(new GmapTypeControl);
			mapControl = new GHierarchicalMapTypeControl();
			//Set up map type menu relationships
			mapControl.clearRelationships();
			mapControl.addRelationship(G_SATELLITE_MAP, G_HYBRID_MAP, "Labels", false);
			map.addControl(mapControl);
			map.getContainer().style.backgroundColor="#d8fbf8";
			map.enableScrollWheelZoom();        
			//GDownloadUrl(dataFile, getHourly);
			window.setTimeout("refresh()", refreshtime);    
		  } else {
			alert("Sorry, the Google Maps API is not compatible with this browser");
		  } // end of if (GBrowserIsCompatible()) 
		}
		*/
		///////////////////////////////////////////////////////////////////////////////////////
		//// Function to extract hourly llis data to input_files/hourly_counts ////
		///////////////////////////////////////////////////////////////////////////////////////
		getHourly = function (doc) {
			// var now = new Date();
			var st_yymmdd;
			var st_hh;
			var et_yymmdd;
			var et_hh;
			var date_time = [];
			var kount = 0;
			var n;
			// read input files and store in lines              
			var data_lines = doc.split("\n");
			var NumOfLines = parseInt(data_lines.length, 10);
			// alert("Num = " + NumOfLines + "data=" + data_lines[NumOfLines-2]);
			var tmp_str = "";
			var total_cg = [];
			var total_cc = [];
			var total_cg_cc = [];
			// start_time=parseInt(st_yymmdd*100) + parseInt(st_hh);   //start yyyymmddhh
			// end_time=parseInt(et_yymmdd*100) + parseInt(et_hh);     //end yyyymmddhh
			start_time = parseInt(syyyymmdd * 100) + parseInt(cur_hour);   //start yyyymmddhh
			end_time = start_time;                //end yyyymmddhh
			var syyyy;
			var smm;
			var sdd;
			var shh;
			var eyyyy;
			var emm;
			var edd;
			var ehh;
			// for formatting display
			syyyy = parseInt(start_time / 1000000);
			smm = parseInt((start_time % 1000000) / 10000);
			sdd = parseInt((start_time % 10000) / 100);
			shh = parseInt(start_time % 100);
			if (smm < 10) {
				smm = '0' + smm;
			}
			if (sdd < 10) {
				sdd = '0' + sdd;
			}
			if (shh < 10) {
				shh = '0' + shh;
			}
			eyyyy = parseInt(end_time / 1000000);
			emm = parseInt((end_time % 1000000) / 10000);
			edd = parseInt((end_time % 10000) / 100);
			ehh = parseInt(end_time % 100);
			if (emm < 10) {
				emm = '0' + emm;
			}
			if (edd < 10) {
				edd = '0' + edd;
			}
			if (ehh < 10) {
				ehh = '0' + ehh;
			}
			for (var i = 0; i < 5; i++) {
				total_cg[i] = 0;
				total_cc[i] = 0;
				total_cg_cc[i] = 0;
			}
			// read in file line by line
			for (var j = 0; j <= NumOfLines - 2; j++) {
				var DataArray = data_lines[j].split(' ');
				if (DataArray[0] >= start_time && DataArray[0] <= end_time) {
					date_time[kount] = DataArray[0];
					kount++;
					yyyymmdd = DataArray[0] / 100;
					yyyy = parseInt(yyyymmdd / 10000);
					mm = parseInt((yyyymmdd % 10000) / 100);
					dd = parseInt(yyyymmdd % 100);
					hh = parseInt(DataArray[0] % 100);
					total_cg[0] = total_cg[0] + parseInt(DataArray[1]);    // total of Cloud-to-ground
					total_cc[0] = total_cc[0] + parseInt(DataArray[6]);    // total of Cloud-to-cloud
					total_cg_cc[0] = total_cg[0] + total_cc[0] // total of both
					for (var i = 1; i <= 4; i++) {
						total_cg[i] = total_cg[i] + parseInt(DataArray[i + 1]);   // sum of each area of Cloud-to-ground
						total_cc[i] = total_cc[i] + parseInt(DataArray[i + 6]);   // sum of each area of Cloud-to-cloud  
						total_cg_cc[i] = total_cg[i] + total_cc[i];             // sum of each area of both type
						//alert("i="+ i +" DataArray=" + DataArray[i+2] + " total_cg=" + total_cg[i]);
					}
				} // end (DataArray[0] >= start_time && DataArray[0] <= end_time) 
			} // end for
			// no record found!
			if (kount == 0) {
				counts_frame = '<table border=1><tr style="width:250px;height:40px;" bgcolor=#a6a6a6 align=left><th><span style="font-size:113%;">' + syyyy + '-' + smm + '-' + sdd + ' ' + shh + ':00 to <br>' + eyyyy + '-' + emm + '-' + edd + ' ' + ehh + ':59 (HK Time)</span></th></tr><tr><td style="width:250px;" bgcolor=#FCE903>No records found!</td></tr></table>';
				return;
			}
			else {
				// for formatting display
				syyyy = parseInt(date_time[0] / 1000000);
				smm = parseInt((date_time[0] % 1000000) / 10000);
				sdd = parseInt((date_time[0] % 10000) / 100);
				shh = parseInt(date_time[0] % 100);
				if (smm < 10) {
					smm = '0' + smm;
				}
				if (sdd < 10) {
					sdd = '0' + sdd;
				}
				if (shh < 10) {
					shh = '0' + shh;
				}
				eyyyy = parseInt(date_time[kount - 1] / 1000000);
				emm = parseInt((date_time[kount - 1] % 1000000) / 10000);
				edd = parseInt((date_time[kount - 1] % 10000) / 100);
				ehh = parseInt(date_time[kount - 1] % 100);
				if (emm < 10) {
					emm = '0' + emm;
				}
				if (edd < 10) {
					edd = '0' + edd;
				}
				if (ehh < 10) {
					ehh = '0' + ehh;
				}
				document.getElementById('map1_data').innerHTML = '<table border=0><tr style="height:100px;"><td style="width:110px;" align=center><span style="font-size:300%;color:blue;">' + total_cg[1] + '</span></td></tr></table>';
				document.getElementById('map1_legend').innerHTML = '<table border=0><tr  bgcolor=#a6a6a6><td align=center><span style="color:#0000BB;"><strong>' + legend[0] + '</strong></span></td></tr></table>';
				document.getElementById('map2_data').innerHTML = '<table border=0><tr><td align=center><span style="font-size:300%;color:blue;">' + total_cg[2] + '</span></td></tr></table>';
				document.getElementById('map2_legend').innerHTML = '<table border=0 width=160><tr  bgcolor=#a6a6a6><td align=center><span style="color:#0000BB;"><strong>' + legend[1] + '</strong></span></td></tr></table>';
				document.getElementById('map3_data').innerHTML = '<table border=0><tr style="height:100px;"><td style="width:110px;" align=center><span style="font-size:300%;color:blue;">' + total_cg[3] + '</span></td></tr></table>';
				document.getElementById('map3_legend').innerHTML = '<table border=0 width=230><tr  bgcolor=#a6a6a6><td align=center><span style="color:#0000BB;"><strong>' + legend[2] + '</strong></span></td></tr></table>';
				document.getElementById('map4_data').innerHTML = '<table border=0><tr style="height:100px;"><td style="width:110px;" align=center><span style="font-size:300%;color:blue;">' + total_cg[4] + '</span></td></tr></table>';
				document.getElementById('map4_legend').innerHTML = '<table border=0><tr bgcolor=#a6a6a6><td align=center><span style="color:#0000BB;"><strong>' + legend[3] + '</strong></span></td></tr></table>';
				counts_frame = '<table border=1 class="data_table"><tr bgcolor=#a6a6a6 align=left><th colspan=2><span style="font-size:113%;">' + syyyy + '-' + smm + '-' + sdd + ' ' + shh + ':00 to ' + eyyyy + '-' + emm + '-' + edd + ' ' + ehh + ':59 (HK Time)</span></th></tr><tr bgcolor=#FCE903><td style="width:205px;"><span style="">' + legend[0] + '</span></td><td style="width:55px;" align=right><span style="font-size:113%;">' + total_cg[1] + '</span></td></tr><tr bgcolor=#9ED827><td><span style="">' + legend[1] + '</span></td><td align=right><span style="font-size:113%;">' + total_cg[2] + '</span></td></tr><tr bgcolor=#FCE903><td><span style="">' + legend[2] + '</span></td><td align=right><span style="font-size:113%;">' + total_cg[3] + '</span></td></tr><tr bgcolor=#9ED827><td><span style="">' + legend[3] + '</span></td><td align=right><span style="font-size:113%;">' + total_cg[4] + '</span></td></tr><tr bgcolor=#a6a6a6><td align=left>Total strokes in Hong Kong:</td><td align=right><span style="font-size:113%;">' + total_cg[0] + '</span></td></tr></table>';
				$("#counts_frame").empty().append(counts_frame);
			}
		}  // end of function getHourly      
		function refresh() {
			// 20180713: remove Google Map
			//map.clearOverlays();
			//GDownloadUrl(dataFile, getHourly);
			//setData;
			$.get(dataFile, getHourly);
			window.setTimeout("refresh()", refreshtime);
		}   //end of function refresh
		function detectBrowser() {
			var useragent = navigator.userAgent;
			var mapdiv = document.getElementById("llis_map");
			if (useragent.indexOf('iPhone') != -1 || useragent.indexOf('Android') != -1) {
				mapdiv.style.width = '100%';
				mapdiv.style.height = '100%';
			} else {
				mapdiv.style.width = '560px';
				mapdiv.style.height = '850px';
			}   //end of if
		}   // end of function detectBrowser
		function sum_counts() {
			// 20180713: remove Google Map
			//GDownloadUrl(dataFile, getHourly);
			$.get(dataFile, getHourly);
		}
		function area_counts() {
			window.open("llis_area_counts.htm", "countsWindow");
		}
		window.setTimeout("refresh()", refreshtime);
		//]]>
		var syyyymmdd;
		var cur_hour;
		var cur_min;
		var legend = [];
		legend[0] = 'New Territories West';
		legend[1] = 'New Territories East';
		legend[2] = 'Hong Kong Island and Kowloon';
		legend[3] = 'Lantau';
		var yy;
		var mm;
		var dd;
		var now = new Date();
		var Day_n = new Date();
		cur_hour = now.getHours();
		cur_min = now.getMinutes();
		// generate date of the past hour of lightning strokes count
		if (cur_min >= 10) {
			cur_hour = cur_hour - 1;
		}
		else {
			cur_hour = cur_hour - 2;
		}
		if (cur_hour >= 0) {
			yy = now.getFullYear();   // get current year
			dd = now.getDate();       // get current dd
			mm = now.getMonth();      // get current month no
			mm++;                     // add 1 to current month no 
		}
		else {
			if (cur_hour == -1) {
				cur_hour = 23;
			}
			else {
				cur_hour = 22;
			}
			Day_n.setTime(now.getTime() - 24 * 60 * 60 * 1000);
			yy = Day_n.getFullYear();   // get year of past day 1
			dd = Day_n.getDate();       // get dd of past day 1
			mm = Day_n.getMonth();      // get month no of past day 1
			mm++;                       // add 1 to current month no 
		}
		syyyymmdd = parseInt(yy) * 10000 + parseInt(mm) * 100 + parseInt(dd);
		sum_counts()
		$(document).ready(function () {
		setTimeout(function(){
				updatellis_loc_today();
				}, 500);
		});
		$(window).resize(function () {
			updatellis_loc_today();
		});
		function updatellis_loc_today() {
			var curr_width = $("#llis_loc_today").width();
			var curr_height = $("#llis_loc_today").height();
			//img full width : 518
			$('#map1_data').css('top', (60 / 388) * curr_height);
			$('#map1_data').css('left', (120 / 518) * curr_width);
			$('#map1_legend').css('top', (130 / 388) * curr_height);
			$('#map1_legend').css('left', (105 / 518) * curr_width);
			$('#map2_data').css('top', (65 / 388) * curr_height);
			$('#map2_data').css('left', (325 / 518) * curr_width);
			$('#map2_legend').css('top', (115 / 388) * curr_height);
			$('#map2_legend').css('left', (280 / 518) * curr_width);
			$('#map3_data').css('top', (185 / 388) * curr_height);
			$('#map3_data').css('left', ((225 / 518) * curr_width)-20);
			$('#map3_legend').css('top', (253 / 388) * curr_height);
			$('#map3_legend').css('left', ((235 / 518) * curr_width)-20);
			$('#map4_data').css('top', (180 / 388) * curr_height);
			$('#map4_data').css('left', (72 / 518) * curr_width);
			$('#map4_legend').css('top', (250 / 388) * curr_height);
			$('#map4_legend').css('left', (105 / 518) * curr_width);
		}
		});
	</script>
</head>
<body id="page_bg">
<div id="skipwrapper">
    <a id="top" title="page top"></a>
    <a id="skiptocontent" href="#mainContentSkip" class="access">Skip Content</a>
</div>
<div id="wrap">
    <div id="header" class="headerArea">
        <div class="container">
            <div class="headerTool">
				<script type="text/javascript">createHeader();</script>
            </div>
        </div>
    </div>
    <div class="bodyArea">
        <div class="container">
            <div class="contentArea">
                <a id="mainContentSkip"></a>
                <div class="mainHeader"></div>
                <div class="breadcrumb"></div>
				<script type="text/javascript">pageTop();</script>
				<div id="mainContent" class="mainContent">
                <!--Begin Content-->
                <h1 class="no_h1">Cloud-to-ground lightning count distribution over Hong Kong in the past hour</h1>
                <div class="border_blank">
                    <!--Content Start-->
<div style="margin: 0; position: relative;" class="self_align_center"><!-- 20180713: remove Google Map
<script src="http://maps.google.com/maps?file=api&v=3&hl=en&oe=tuf8" type="text/javascript"></script>
-->
<table id="main_table" style="max-width: 1080px;" class="self_row2_table">
<tbody>
<tr>
<td colspan="2" class="self_align_center"></td>
</tr>
<tr>
<td style="position: relative;" class="self_align_center">
<div id="map1_data" style="position: absolute; left: 120px; z-index: 50; top: 60px;"></div>
<div id="map1_legend" style="position: absolute; left: 105px; z-index: 50; top: 130px;"></div>
<div id="map2_data" style="position: absolute; left: 325px; z-index: 50; top: 65px;"></div>
<div id="map2_legend" style="position: absolute; left: 280px; z-index: 50; top: 115px;"></div>
<div id="map3_data" style="position: absolute; left: 225px; z-index: 50; top: 185px;"></div>
<div id="map3_legend" style="position: absolute; left: 235px; z-index: 50; top: 253px;"></div>
<div id="map4_data" style="position: absolute; left: 72px; z-index: 50; top: 180px;"></div>
<div id="map4_legend" style="position: absolute; left: 105px; z-index: 50; top: 250px;"></div>
<img id="llis_loc_today" title="Hong Kong Map" alt="Hong Kong Map" src="../../../../en/wxinfo/llis/gm/images/llis_loc_today.png" /></td>
<td id="counts_frame" style="width: 300px;" class="self_align_center td_valign_top"></td>
</tr>
</tbody>
</table>
</div>
<div><br />
<table class="table_align_left table_border_0 table_cellpadding_3 table_cellspacing_2 note_table">
<tbody>
<tr>
<td colspan="2">&nbsp;Note :</td>
</tr>
<tr>
<td>1.</td>
<td>This web page provides cloud-to-ground lightning count distribution during the past hour (updated at around 10 minute past the hour) in four geographical regions in Hong Kong:<br />- New Territories West<br />- New Territories East<br />- Hong Kong Island and Kowloon <br />- Lantau.</td>
</tr>
<tr>
<td>2.</td>
<td>The lightning information displayed above is provisional. Only limited data validation has been carried out.</td>
</tr>
<tr>
<td>3.</td>
<td>For information on cloud-to-ground lightning count distribution over the Hong Kong territory within the past three days, please visit: <a href="../../../../en/wxinfo/llis/gm/llis_area_counts.htm" target="_blank" rel="noopener">https://www.weather.gov.hk/en/wxinfo/llis/gm/llis_area_counts.htm</a>.</td>
</tr>
</tbody>
</table>
</div>
<!--Content End-->
<script>var last_revision_date = '12 August 2020';</script>
                </div>
				<!--End Content-->
                </div>
            </div>
            <script type="text/javascript">pageBottom();</script>
        </div>
    </div>
    <div id="footer" class="footerArea">
        <div class="container"> 
			<script type="text/javascript">createFooter();</script>
        </div>
    </div>
</div>
</body>
</html>