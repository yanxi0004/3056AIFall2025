<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="UTF-8">
    <title>Isohyet Chart for Last Hour｜Hong Kong Observatory(HKO)｜Rainfall Distribution Map</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="keywords" content="Isohyet Chart for Last Hour">
    <meta name="description" content="Isohyet Chart for Last Hour">
    <meta name="recordId" content="2018123100000035755">
    <meta name="lang" content="en">
	<meta property="fb:app_id" content="468280339992518" />
	<meta property="og:type" content="website" />
	<meta property="og:title" content="Isohyet Chart for Last Hour" />
	<meta property="og:description" content="#content_start &gt; div { margin-bottom:1em; margin-top:2em; } ol#remarks li {margin-bottom:1em;} .tempLegend { -ms-transform: rotate(-90deg); /* IE 9 */ -webkit-transform: rotate(-90deg); /* Chrome, Safari, Opera */ transform: rotate(-90deg); position: absolute; top:" />
	<meta property="og:image" content="" />
	<meta property="og:url" content="https://www.hko.gov.hk/en/wxinfo/rainfall/isohyet_past1hr.shtml" />
	<meta property="og:image:width" content="600" />
	<meta property="og:image:height" content="314" />
    <!-- Bootstrap -->
    <link id="styleSheet0" href="/css/bootstrap.css" rel="stylesheet" media="screen" type="text/css">
    <link id="styleSheet1" href="/css/bsplus.css" rel="stylesheet" media="all" type="text/css">
    <link id="styleSheet2" href="/css/default.css" rel="stylesheet" media="screen" type="text/css">
    <link id="styleSheet3" href="/css/layout.css" rel="stylesheet" media="all" type="text/css">
    <link href="/css/flexslider.css" rel="stylesheet" media="all" type="text/css">
    <link href="/css/jquery-ui.min.css" rel="stylesheet" media="all" type="text/css">
    <style type="text/css">
.abc{
display: none;
}
			div#div_rfmap span {
		font-size: 16px !important;
	}
	div#div_rfmap select {
		padding-right:5px;
		padding-left:5px;
	}
	@media screen and (max-width: 767px){
		div#div_rfmap input[type="button"] {
			display:none !important;
		}
	}
	@media (max-width:320px){
		table:nth-child(1) label{
			text-align:left !important;
		}
	}
    </style>
    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:/ -->
    <!--[if lt IE 9]>
    <script type="text/javascript" src="js/html5shiv.js"></script>
    <script type="text/javascript" src="js/respond.min.js"></script>
    <![endif]-->
    <script type="text/javascript" src="/js/jquery.min.js"></script>
    <script type="text/javascript" src="/js/jquery-ui.min.js"></script>
    <script type="text/javascript" src="/js/jquery.cookie.js"></script>
    <script type="text/javascript" src="/js/jquery.easing.js"></script>
    <script type="text/javascript" src="/js/jquery.flexslider.js"></script>
    <script type="text/javascript" src="/js/menu.js"></script>
    <script type="text/javascript" src="/js/bootstrap.js"></script>

	<script type="text/javascript" src="/js/moment.js"></script>
	<script type="text/javascript" src="/js/vue.min.js"></script>
	<script type="text/javascript" src="/js/vue-router.js"></script>
	<script type="text/javascript" src="/js/vue-extend.js"></script>
	<script type="text/javascript" src="/js/tmp.js"></script>
	<script type="text/javascript" src="/js/jquery.rwdImageMaps.min.js"></script>


    <script type="text/javascript">
		
var menu_id = '';
var section_id = '2018010100000010832';

                              


wcag_setTimer(600000, 'eng');
	</script>
</head>
<body id="page_bg">
<div id="skipwrapper">
    <a id="top" title="page top"></a>
    <a id="skiptocontent" href="#mainContentSkip" class="access">Skip Content</a>
</div>
<div id="wrap">
    <div id="header" class="headerArea">
        <div class="container">
            <div class="headerTool">
				<script type="text/javascript">createHeader();</script>
            </div>
        </div>
    </div>
    <div class="bodyArea">
        <div class="container">
            <div class="contentArea">
                <a id="mainContentSkip"></a>
                <div class="mainHeader"></div>
                <div class="breadcrumb"></div>
				<script type="text/javascript">pageTop();</script>
				<div id="mainContent" class="mainContent">
                <!--Begin Content-->
                <h1>Isohyet Chart for Last Hour</h1>
                <div class="border_blank">
                    <div align=center>
	<table style="WIDTH: 100%" border="0">
		<tbody>
			<tr>
				<td valign="top">
					<table bordercolor="#000066" width="100%" border="0" class="shtml_table">
						<tbody>
							<tr>
								<td valign="top" align="center">

									<style type="text/css">
										#content_start > div {
										margin-bottom:1em;
										margin-top:2em;
									}
									ol#remarks li {margin-bottom:1em;}
									.tempLegend {
										-ms-transform: rotate(-90deg); /* IE 9 */
										-webkit-transform: rotate(-90deg); /* Chrome, Safari, Opera */
										transform: rotate(-90deg);
										position: absolute;
										top: 135px;
										left: 18px;
									}
									.btn-group {margin-top:2px!important;}
									.btn-group button {
                                      background-color: #0075AB; /* Green background */
                                      border: 2px solid ; /* Green border */
                                      color: white; /* White text */
                                      padding: 10px 15px; /* Some padding */
                                      cursor: pointer; /* Pointer/hand icon */
                                      float: left; /* Float the buttons side by side */
                                      width:20%;
                                      height: auto;
                                      font-size:90%;
									}
									.btn-group button:not(:last-child) {
									  border-right: none; /* Prevent double borders */
									}
									/* Clear floats (clearfix hack) */
									.btn-group:after {
									  content: "";
									  clear: both;
									  display: table;
									}
									/* Add a background color on hover */
									.btn-group button:hover {
									  background-color: #0075E6;
									}
									.mainContent .active {background-color: #0075E6!important; cursor:default!important;}
									.xlabel {text-align:center;margin-bottom:0; padding-bottom:0; margin-top:0;}
									.heading1 {font-size:170%; text-align:center;}
									.heading2 {font-size:140%; text-align:center;}
									.imgbox {text-align:center;position:relative;}
									.imgbox img {width:80%;}
									.remarkcon {margin:0;width:80%; margin:0 auto;}
									.remarkimg {width:40px; display:inline-block; vertical-align:middle;}
									@media screen and (max-width: 767px){
										.btn-group button {
											width: 100%;
										}
									}
									</style>

									<div class="btn-group" style="display: block; max-width: 800px; margin: auto; margin-bottom: 10px;">
										<button onClick="location.href='../../../en/wxinfo/rainfall/isohyet_past1hr.shtml'">Past 1-hour</button>
										<button onClick="location.href='../../../en/wxinfo/rainfall/isohyet_past24hr.shtml'">Past 24-hour</button>
										<button onClick="location.href='../../../en/wxinfo/rainfall/isohyet_today.shtml'">Today</button>
										<button onClick="location.href='../../../en/wxinfo/rainfall/isohyet_yesterday.shtml'">Yesterday</button>
										<button onClick="location.href='../../../en/wxinfo/rainfall/isohyet_daily.shtml'">Daily Isohyet Chart</button>
										
									</div>
									<br/><br/>
									<label style="FONT-SIZE: 150%">
										<strong> Rainfall distribution in the past hour </strong>
									</label>
									<br/><br/>
									<div >
										<style>
											#selectDateTime{
												box-shadow: 1px 1px 1px black;
												width: 20%;
												font-size: 20px;
												margin-left: 0px;
												margin-right: auto;
											}	
											#farthest,#previous,#next,#latest{
												box-shadow: 1px 1px 1px black;
												font-size: 20px;
											}
											select, button{
                                              vertical-align:middle;
                                            }
											span {
                                              display: inline-block;
                                              vertical-align: middle;
                                              line-height: normal;
                                            }
										</style> 
										
										<p style="text-align:center; font-size: 20px;">
											<span>Select date:&nbsp;</span>
											<select id = "selectDateTime" onchange="SelectDateTime()"></select>&nbsp;
											<button id = "farthest" onclick = "Farthest()">|<</button>
											<button id = "previous" onclick = "Previous()"><<</button>
                                        	<button id = "next" onclick = "Next()">>></button>
											<button id = "latest" onclick = "Latest()">>|</button>
										</p>
											
                                            <div style="text-align: center;">
                                                <span style="FONT-SIZE: 83%">
                                                    <strong>
                                                      <img border="1" alt="Isohyet Chart for Last Hour" id="rainfallmap" /> 
                                                    </strong>
                                                </span>
                                            </div><br/>                                              
                                              
											<div id="rfmapdiv" style="text-align:center; font-size: 20px;"></div>
										

									</div>

                                        <script language="Javascript">
											const DateTimeList = document.getElementById("selectDateTime");
											
											// get pre-made json with timestamps
											today = new Date();
											var list_path = "../../../wxinfo/rainfall/cokrig_barnes/rfmap_past1hr_e.json?" + today.getTime();
											var request = new XMLHttpRequest();
											request.open('GET', list_path, false);
											request.send();
											if (request.status == 200) {
												var TimeList = JSON.parse(request.responseText);
											} else {
												workSelf();
											}
											if (TimeList) {
												const late_allow = new Date(today.getTime() - (1000*60*60*1)).getTime();  // allow 1 hr latency on pre-made json
												const update_time = new Date(TimeList.update_time).getTime();
												if (update_time >= late_allow) {
													const list_latest = formatDate22Date(TimeList.Timestamps[0]);
													showOption(list_latest);
													for (i=0; i<TimeList.Timestamps.length; i++) {
														addOption_direct(TimeList.Timestamps[i]);
													}
												} else {
													workSelf();
												}
											}
											disabledButton();
											
											function workSelf() {
											// determine available list of timestamps by this javascript
												var Now = new Date(new Date().toLocaleString('en-US',{timeZone:'Asia/Hong_Kong'})); // to convert Date to HKT
												var quarterhrly = new Date(Now.getTime() - (1000*60*11)); // allow 11 min for time delay of image arrival
												var limithrly = new Date(Now.getTime() - (1000*60*60*49)); // stop searching images beyond 49 hours from now
												var nnL = formatDate1(quarterhrly).slice(10, 12);
												var quotientNo = Math.floor(nnL/15);
												quarterhrly.setMinutes(15*quotientNo);
												while (quarterhrly >= limithrly) {
													if (checkExist(quarterhrly)) {
														addOption(quarterhrly);
														showOption(quarterhrly);
														break;
													} else {
														quarterhrly = new Date(quarterhrly.getTime() - (1000*60*15));
													}
												}
												var limithrly = new Date(quarterhrly.getTime() - (1000*60*60*48));
												if ( quarterhrly.getMinutes() == 0 ) {
													var hrly = new Date(quarterhrly.getTime() - (1000*60*60))
												} else {
													var hrly = new Date(new Date(quarterhrly).setMinutes(0))
												}
												while (hrly > limithrly) {
													if (checkExist(hrly)) {
														addOption(hrly);
													}
													hrly = new Date(hrly.getTime() - (1000*60*60));
												}
											}

//*****************************************************************function for actions**************************************************

											var SelectDateTime = function (){
												var selectedDateTime = formatDate22Date(DateTimeList.value);
												showOption(selectedDateTime);
												disabledButton();
											}

											var Next = function () {
												var selectedIndex    = DateTimeList.selectedIndex;
												var options          = DateTimeList.options;
												DateTimeList.value   = options[selectedIndex - 1].textContent;
												var selectedDateTime = formatDate22Date(DateTimeList.value);
												showOption(selectedDateTime);
												disabledButton();
											}

											var Previous = function () {
												var selectedIndex    = DateTimeList.selectedIndex;
												var options          = DateTimeList.options;
												DateTimeList.value   = options[selectedIndex + 1].textContent;
												var selectedDateTime = formatDate22Date(DateTimeList.value);
												showOption(selectedDateTime);
												disabledButton();
											}

											var Latest = function () {
												var options          = DateTimeList.options;
												DateTimeList.value   = options[0].textContent;
												var selectedDateTime = formatDate22Date(DateTimeList.value);
												showOption(selectedDateTime);
												disabledButton();
											}

											var Farthest = function () {
												var optionlength     = DateTimeList.options.length;
												var options          = DateTimeList.options;
												DateTimeList.value   = options[optionlength - 1].textContent;
												var selectedDateTime = formatDate22Date(DateTimeList.value);
												showOption(selectedDateTime);
												disabledButton();
											}

//*****************************************************************Some useful functions**************************************************									
                                            function formatDate1(date) {
												//date1 in form of: "yyyymmddhhnn"
                                                var d = new Date(date),
                                                nn   = String(d.getMinutes() ).padStart(2, '0');
											    hh   = String(d.getHours() ).padStart(2, '0');
                                                dd   = String(d.getDate() ).padStart(2, '0');
                                                mm   = String(d.getMonth() + 1).padStart(2, '0'); //January is 0!
											    yyyy = Number(d.getFullYear());
                                                return [yyyy, mm, dd, hh, nn].join('');
                                            }

											function formatDate2(date) {
												//date2 in form of: "16:45, 29/05/2023"
                                                var d = new Date(date),
                                                nn   = String(d.getMinutes() ).padStart(2, '0');
											    hh   = String(d.getHours() ).padStart(2, '0');
                                                dd   = String(d.getDate() ).padStart(2, '0');
                                                mm   = String(d.getMonth() + 1).padStart(2, '0'); //January is 0!
											    yyyy = Number(d.getFullYear());
												date = [dd, mm, yyyy].join('/');
												time = [hh, nn].join(':');
                                                return [time, date].join(', ');
                                            }

											function formatDate22Date(date2) {
												//converse date2 format to date object
												nn   = date2.slice(3,5);
												hh   = date2.slice(0,2);
												dd   = date2.slice(7,9);
												mm   = date2.slice(10,12);
												yyyy = date2.slice(13,17);
												date = [yyyy, mm, dd].join('-');
												time = [hh, nn].join(':');
												return new Date([date,time].join(' '));
											}
                                            
											function getImagePath(selectedDate) {
												// input Date object here
												selectedDateTime = formatDate1(selectedDate);
												ImagePath = "../../../wxinfo/rainfall/cokrig_barnes/rfmap" + selectedDateTime + "e.png"
												return ImagePath
											}
											
											function checkExist(selectedDate) {
												hourlyrfmapsrc  = getImagePath(selectedDate);
												var request = new XMLHttpRequest();
												request.open('HEAD', hourlyrfmapsrc, false);
												request.send();
												if (request.status == 200) {
													return true;
												} else {
													return false;
												}
											}
											
											function showOption(selectedDate) {
												var rfmapsrc = getImagePath(selectedDate)
												request = new XMLHttpRequest();
												request.open("GET", rfmapsrc, true);
												request.send();
												request.onreadystatechange = function() {
													if (request.readyState === 4) {
														if (request.status === 200) {
															document.getElementById("rainfallmap").src = rfmapsrc;
														} else {
															document.getElementById("rfmapdiv").textContent = "";
															document.getElementById("rainfallmap").src = "";
															const NAtext = document.createElement("p");
															const node = document.createTextNode("Isohyet chart for the selected time is not available at the moment.");
															NAtext.style.textAlign = 'center';
															NAtext.appendChild(node);
															const element = document.getElementById("rfmapdiv");
															element.appendChild(NAtext);
														}
													}
												}
											}

                                            function addOption(timeopt) {
												var opt = formatDate2(timeopt);
												var element = document.createElement("option");
												element.textContent = opt; 
												DateTimeList.append(element);
											}
											
											function addOption_direct(timestamp) {
												var element = document.createElement("option");
												element.textContent = timestamp
												DateTimeList.append(element);
											}

											function disabledButton(){
												var selectedIndex    = DateTimeList.selectedIndex;
												var optionlength     = DateTimeList.options.length;

												if ( (selectedIndex == 0) ){
													document.getElementById("next").disabled = true;
                                            		document.getElementById("latest").disabled = true;
												}else {
													document.getElementById("next").disabled = false;
                                            		document.getElementById("latest").disabled = false;
												}
												if ( (selectedIndex == optionlength-1) ){
													document.getElementById("previous").disabled = true;
                                            		document.getElementById("farthest").disabled = true;
												}else{
													document.getElementById("previous").disabled = false;
                                            		document.getElementById("farthest").disabled = false;
												}	
											}
											</script>

										<table cellspacing="3" cellpadding="2">
											<tbody>
												<tr>
													<td>
														<span style="FONT-FAMILY: Arial">
															<br>Readers should beware that by its nature, the rainfall distribution map (isohyet chart) serves only to indicate visually the spatial pattern of rain. It should not be relied upon to derive exact rainfall amounts at specific locations. Furthermore, this is an automated product generated by computer for quick reference, erroneous data may slip through quality checks in spite of the best of our intentions.
														</span>
														<br>
														<br>
														<span style="FONT-FAMILY: Arial">
															For a brief background information and interpretation of the isohyet chart, please <a href="../../../en/wxinfo/rainfall/rf_info.htm">click here</a>.
														</span>
														<p>
															<span style="FONT-FAMILY: Arial">
										For other rainfall information, please visit the following webpages:
															</span>
														</p>
														<ul>
															<li style="PADDING-BOTTOM: 5px; PADDING-TOP: 5px; PADDING-LEFT: 5px; PADDING-RIGHT: 5px">
																<span style="FONT-FAMILY: Arial">
																	<a href="../../../textonly/current/rainfall_sr.htm">Rainfall recorded in various regions of Hong Kong</a>
																</span>
															</li>
															<li style="PADDING-BOTTOM: 5px; PADDING-TOP: 5px; PADDING-LEFT: 5px; PADDING-RIGHT: 5px">
																<span style="FONT-FAMILY: Arial">
																	<a href="../../../en/cis/climat.htm">
																		Rainfall extracts of weather stations
																	</a>
																</span>
															</li>
															<li style="PADDING-BOTTOM: 5px; PADDING-TOP: 5px; PADDING-LEFT: 5px; PADDING-RIGHT: 5px">
																<span style="FONT-FAMILY: Arial">
																	<a href="../../../en/school/school.htm">Weather Information for Schools</a>
																</span>
															</li>
															<li style="PADDING-BOTTOM: 5px; PADDING-TOP: 5px; PADDING-LEFT: 5px; PADDING-RIGHT: 5px">
																<span style="FONT-FAMILY: Arial">
																	<a href="../../../en/rhr/main.html">
																		Regional Information on Heavy Rain and Thunderstorm
																	</a>
																</span>
															</li>
															<li style="PADDING-BOTTOM: 5px; PADDING-TOP: 5px; PADDING-LEFT: 5px; PADDING-RIGHT: 5px">
																<span style="FONT-FAMILY: Arial">
																	<a href="http://maps.hko.gov.hk/ocf/index_e.html?data=ncrf">Automatic Regional Weather Forecast</a>
																</span>
															</li>
														</ul>
														<p>
															<span style="FONT-FAMILY: Arial">
																If you have any comment on the isohyet chart, please send us an <a href="mailto:mailbox@hko.gov.hk">e-mail</a>.
															</span>
														</p>
													</td>
												</tr>
											</tbody>
										</table>
								</td>
							</tr>
						</tbody>
					</table>
				</td>
			</tr>
		</tbody>
    </table>
</div>
<script>var last_revision_date = '13 June 2023';</script>
                </div>
				<!--End Content-->
                </div>
            </div>
            <script type="text/javascript">pageBottom();</script>
        </div>
    </div>
    <div id="footer" class="footerArea">
        <div class="container"> 
			<script type="text/javascript">createFooter();</script>
        </div>
    </div>
</div>
</body>
</html>