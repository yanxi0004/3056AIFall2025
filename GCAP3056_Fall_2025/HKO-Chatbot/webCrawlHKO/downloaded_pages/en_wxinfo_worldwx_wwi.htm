<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="UTF-8">
    <title> World Weather Information｜Hong Kong Observatory(HKO)｜World Weather</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="keywords" content="World Weather Information">
    <meta name="description" content="Weather information for world cities">
    <meta name="recordId" content="2018123100000036206">
    <meta name="lang" content="en">
	<meta property="fb:app_id" content="468280339992518" />
	<meta property="og:type" content="website" />
	<meta property="og:title" content="World Weather Information" />
	<meta property="og:description" content="Search Africa Asia South America North &amp;amp; Central America South West Pacific Europe -- Select a region -- -- Select a region -- Africa Asia South America North &amp;amp; Central" />
	<meta property="og:image" content="" />
	<meta property="og:url" content="https://www.hko.gov.hk/en/wxinfo/worldwx/wwi.htm" />
	<meta property="og:image:width" content="600" />
	<meta property="og:image:height" content="314" />
    <!-- Bootstrap -->
    <link id="styleSheet0" href="/css/bootstrap.css" rel="stylesheet" media="screen" type="text/css">
    <link id="styleSheet1" href="/css/bsplus.css" rel="stylesheet" media="all" type="text/css">
    <link id="styleSheet2" href="/css/default.css" rel="stylesheet" media="screen" type="text/css">
    <link id="styleSheet3" href="/css/layout.css" rel="stylesheet" media="all" type="text/css">
    <link href="/css/flexslider.css" rel="stylesheet" media="all" type="text/css">
    <link href="/css/jquery-ui.min.css" rel="stylesheet" media="all" type="text/css">
    <style type="text/css">
.abc{
display: none;
}
		/* new css */

.fav_btn_main{
	width:100%;
	text-align:center;
	display:flex;
}

.reset_fav_btn{
	width:140px;
	margin-left:100px;
}

.add_fav_btn{
	width:220px;

}

.add_fav_btn, .reset_fav_btn{
	margin-top:10px;
	margin-bottom:10px;
}

#climate_content{
	margin-bottom:5px;
}

.fav_btn_div{
display:flex;
  margin: auto;
  width: 50%;
  padding: 0px;
}


.my_fav_fc_date{
	width:100% !important;
	text-align:left !important;
}

.my_fav_fc_wxicon img{
	width:4em !important;
}

.my_fav_adw_temp{
	padding-top: 10px;
    font-size: 1.1em;
}
	
.fc_date{
	text-align:left !important;
}

.expandable-title{
	margin-bottom:3px !important;
}

#issue_date_time{
	padding-left:17px;
}

.myForecastList .adw_day>div:nth-child(2), .myFavList .adw_day>div:nth-child(2){
	    text-align: left;
		padding: 10px 20px !important;
		padding-top:0px !important;
		
}

.adw_day>div:last-child{
	margin-left:20px;
}

.adw_day img{
	/* width:30% !important; */
 }
 
 .adw_temp{
	 padding-top:10px;
	 font-size:1.1em;
 }

.forecast_main_div{
  border-style: solid;
  border-width: 1px 1px 1px 1px;
  border-color: #fca140;
  margin-bottom:10px;
}

.btn_reset_fav{
	background:#484848;
	padding:10px;
	color:#FFFFFF !important;
	width:300px !important;
	border-radius: 5px;
	line-height: 2em;
	cursor: pointer;
}

.btn_add_fav{
	background:#426dcf;
	padding:10px;
	color:#FFFFFF !important;
	width:300px !important;
	border-radius: 5px;
	line-height: 2em;
	cursor: pointer;
}

#city_chosen{
width:100% !important;
}

.close_setting{
	cursor: pointer;
}

#fav_ul .ui-sortable-handle , .search-choice{
	background:#426dcf;
	padding:5px;
	color:#FFFFFF;
	width:50%;
}

#fav_ul{
list-style-image: url('../../../en/wxinfo/worldwx/images/move.png');
cursor:move;
}

.div_wwi_search{
padding-left:0px !important;
padding-right:0px !important;
}

#mainContent .setting_box{
	max-width:100% !important;
	margin-top:10px;
}

#mainContent .wxicons_box{
border: 0px solid #000 !important;
padding-left:0px !important;
padding-right:0px !important;
padding-top:3px;
}

#weather_icon_table,#notes_box{
margin-top:10px;
}


#climate_list{
	width:1200px !important;
}

.div_chart_map{
margin-bottom:20px;	
/*overflow:scroll;*/
}

.div_wwi_bc{
margin-bottom:3px;
}

.div_wwi_bc .name_bar{
	    background-color: #fca140;
}

.div_chart_map .left_chart{
    display: inline-block;
	width: 65%;
	/*min-height: 50px;*/
	height: auto;
  }		
  
  .div_chart_map .right_map{
    display: inline-block;
	width: 34%;
	/*max-height: 50px;*/
	height: auto;
	padding:0px !important;
	margin:0px !important;
  }	
  
  .map_n_info #left_col{
	  width:100% !important;
	  margin-bottom:10px;
  }
  
  .map_n_info #left_col{
	  padding:0px !important;
  }
	
	
  .div_wwi_map{
	border:0px solid #0070B8 !important;
	padding:0px !important;
	margin:0px !important;
  }
  
  
  .map_n_info{
	padding: 0px !important;
  }
  
  .tbl_wxicons{
	 width:99% !important;
  }
  
 .tbl_wxicons tr td{
	   border: 1px solid #b3ccff;
	   color:#000000;
 }
  
  .icon_img{
	  background-color:#3b6da3;
  }
	
	/* end new css */	
.wx_infobox_title {
	display: block !important;
	width: 100% !important;
	border-bottom: 1px solid #FFFFFF !important;
	padding-bottom: 2px !important;
	color: #FFFFFF !important;
	font-size: 18px !important;
	text-decoration: none !important;
}

.olPopupCloseBox {
	top: 13px !important;
}

.olFramedCloudPopupContent {
	overflow: hidden !important;
}

.wx_infobox_no_border {
	border-bottom: none !important;
}

.icon_earth {
	background: url(../../../en/wxinfo/worldwx/images/icon_earth.png) no-repeat top left !important;
}

.adw_detail {
	text-align: center;
	font-weight: 100 !important;
}


/*.div_wwi_tab .etabs>li a{
			background-image: url(../../../en/wxinfo/worldwx/images/button_en.png) !important;
			 height: 63px;
		}*/

.regionDiv>div {
	text-align: center;
	padding: 7px 20px;
	margin: 6px 1px;
	text-decoration: none;
	background-color: #3b6da3;
	border-radius: 10em;
	position: relative;
	display: inline-block;
}

.regionDiv>div.active {
	background-color: #fca140;
}

.regionDiv>div a {
	color: #fff !important;
	text-decoration: none;
}

.div_wwi_tab .etabs>li {
	width: 106px;
}


/*.div_wwi_tab .etabs>.tabs_1 a{
			    background-position: calc(100% - 423px) calc(100% - 947px);
		}
		
		.div_wwi_tab .etabs>.tabs_1 a:hover{
			    background-position: calc(100% - 423px) calc(100% - 885px);
		}
		
		.div_wwi_tab .etabs>.tabs_2 a{
			    background-position: calc(100% - 726px) calc(100% - 947px);
		}
		
		.div_wwi_tab .etabs>.tabs_2 a:hover{
			    background-position: calc(100% - 726px) calc(100% - 885px);
		}
		
		.div_wwi_tab .etabs>.tabs_3 a{
			       background-position: calc(100% - 264.5px) calc(100% - 947px);
		}
		
		.div_wwi_tab .etabs>.tabs_3 a:hover{
			       background-position: calc(100% - 264.5px) calc(100% - 885px);
		}*/

.div_wwi_tab .etabs>.tabs_4 {
	width: 155px;
}

.div_wwi_tab .etabs>.tabs_4 a {
	background-position: 0 calc(100% - 947px);
}

.div_wwi_tab .etabs>.tabs_4 a:hover {
	background-position: 0 calc(100% - 885px);
}

.div_wwi_tab .etabs>.tabs_5 a {
	background-position: calc(100% - 610px) calc(100% - 947px);
}

.div_wwi_tab .etabs>.tabs_5 a:hover {
	background-position: calc(100% - 610px) calc(100% - 885px);
}

.div_wwi_tab .etabs>.tabs_5 {
	width: 145px;
}

.div_wwi_tab .etabs>.tabs_6 {
	width: 113px;
}

.div_wwi_tab .etabs>.tabs_6 a {
	background-position: calc(100% - 887px) calc(100% - 947px);
}

.div_wwi_tab .etabs>.tabs_6 a:hover {
	background-position: calc(100% - 887px) calc(100% - 885px);
}

.div_wwi_tab>select {
	display: none;
	visibility: hidden;
}

.wwi_legend>div>div,
.wwi_legend>div {
	display: inline-block;
}

@media (max-width:767px) {
	.wwi_legend>div:not(:nth-child(1)) {
		margin-top: 5px;
	}
}

@media screen and (max-width: 979px) {
	
/*new css */
					
					#fav_ul .ui-sortable-handle, .search-choice{
						width:80%;
					}

					.div_chart_map{
						height:auto;
					}
					
					.div_chart_map .left_chart{
						width:100%;
					}
					
					.div_chart_map .right_chart{
						width:100%;
					}
					
					.div_chart_map .right_map{
						width:100%;
					}
					
					.tab_select{
						background-image:none;
					}
					
					/*end new css */
	
	
	.myFavList .adw_day>div:nth-child(2) {
		padding-right: 0;
	}
	.adw_day,
	.adw_day>div {
		text-align: center !important;
	}
	.div_wwi_tab>select {
		display: block;
		visibility: visible;
		margin: 0 auto;
	}
	.regionDiv,
	.regionLineDiv {
		display: none;
		visibility: hidden;
	}
	.div_wwi_tab {
		padding: 15px 10px;
	}
	.div_wwi_tab .etabs {
		display: none !important;
		visibility: hidden !important;
	}
	.slides li div:nth-child(2) {
		padding-left: 0 !important;
	}
	.slides li div:nth-child(3) {
		width: 100%;
	}
	/*.slides li div:nth-child(2) br{
					display:none;
				}
				
				.slides li div:nth-child(2) .highest:before{
					content: "-";
					margin-right: 2px;
				}*/
	.slides li .adw_detail {
		text-align: left;
		margin-top: 5px;
	}
}

#mainContent>div.border_blank.div_wwi>div.div_wwi_tab>ul.etabs a {
	text-decoration: none;
}

.favCityName>a {
	color: #4b4b4b;
	text-decoration: none;
}

.favCityName>a:hover {
	text-decoration: underline;
}

body .div_wwi_tab .etabs {
	padding-left: 0;
}

#myFavList>li {
	margin: 0;
}

.weather_icon_table,#notes_box {
	margin: auto;
}

body .my_fav_list .favGroup {
	padding: 10px 0;
}

#tableview {
	overflow-x: auto;
	overflow-y: hidden;
	width:1200px;
}

.table_main{
	overflow:scroll;
}

@media (max-width:767px) {
	.forecast_column {
		width: 100% !important;
		padding: 0 !important;
	}
	.forecast_column_first {
		width: 100% !important;
	}
	.forecast_column {
		border: 0 !important;
		border-bottom: 1px dashed #50AADE !important;
	}
	.forecast_column_last {
		width: 100% !important;
	}
	.more_forecast_button {
		margin-left: 0px !important;
	}
	.forecast_column_box {
		padding: 0px !important;
	}
}

.wwi_wxico {
	/*max-height:55px;*/
	width: 55px;
}

@media (max-width:767px) {
	.tbl_wxicons {
		width: 100%;
	}
	.weather_icon_table.row2_table tr td {
		border: 0;
	}
	.weather_icon_table.row2_table:nth-child(odd) {
		padding-top: -1px !important;
	}
	.weather_icon_table th {
		display: none;
		visibility: hidden;
	}
}

#mainContent h1 a {
	text-decoration: none;
}

#place_lists li.b a {
	display: block;
	width: 179px;
	border: 1px solid #6d0b3b;
	background-color: #FFFFFF;
	text-decoration: none;
}

#place_lists li a {
	padding: 8px 5px;
}

.place_name_2 {
	float: left;
	display: block;
	line-height: 12px;
	position: relative;
	width: 116px;
	top: 50%;
	/*margin-left: 5px;*/
	line-height: 28px !important;
}

.forecast_icon {
	/*float: left;
		display: block;*/
	width: 26px;
	height: 26px;
	background: url(./images/forecast.png) no-repeat 0px 0px;
	/*margin-top: 2px;*/
	position: absolute;
	right: 30px;
	top: 50%;
	transform: translateY(-50%);
}

.climate_icon {
	/*float: left;
		display: block;*/
	width: 26px;
	height: 26px;
	background: url(./images/climatological.png) no-repeat 0px 0px;
	/*margin-top: 2px;*/
	position: absolute;
	right: 2px;
	top: 50%;
	transform: translateY(-50%);
}

.no_forecast_icon {
	background: url(./images/forecast.png) no-repeat -52px 0px;
}

.wwi_legend .legend_forecast {
	background: url(./images/forecast.png) no-repeat 0px 0px;
}

.wwi_legend .legend_climate {
	background: url(./images/climatological.png) no-repeat 0px 0px;
}

.btn_back {
	float: left;
	width: 32px;
	height: 32px;
	background: url(./images/btn_back.png) no-repeat top left;
	display: none;
}

.place_name_2 {
	/*	min-height:56px;*/
	/*padding-top: 16px;*/
	/*padding-top:calc(100% - 159px);*/
}


/*.climate_icon ,.forecast_icon{
			margin-top: 16px;
		}*/

	@media (max-width:979px){
	#place_lists li.b a {
		width: 100% !important;
	}
	.place_name_2 {
		width: calc(100% - 60px);
	}
	.climate_icon,
	.forecast_icon {
		margin-top: 0px;
	}
	.place_name_2 {
		min-height: 100%;
		padding-top: 0;
	}
	.climate_icon,
	.forecast_icon {
		margin-top: 0;
	}
}

#wwi_add_new_fav {
	margin-top: 4px !important;
}

#wwi_add_new_fav2 button {
	/*    cursor: pointer;
		border: none;
		margin: 0;
		width: 30px;
		height: 30px;
		float: right;
		margin-top: 5px !important;
		margin-right: 8px;
		background-color: #1a58ab;
		border-radius: 4px;
		background-position: center;*/
	cursor: pointer;
	border: none;
	margin: 0;
	background: url(../../../images/ico_add.png) no-repeat 0px 0px !important;
	width: 20px;
	height: 22px;
	float: right;
	margin-top: 12px;
	margin-right: 8px;
}

.favCityName,
.favCityName1 {
	color: #337FCC;
	text-decoration: none;
	display: block;
	font-weight: bold;
	padding: 12px 10px 3px 10px;
	text-align: left;
}

.forecast_column_box {
	border-top: 1px dashed #7C7C7C;
	padding-top: 8px;
	padding-bottom: 5px;
	margin: 0px 10px;
}

.forecast_column {
	width: 27%;
	float: left;
}

.forecast_column_first {
	width: 27%;
	float: left;
}

.forecast_column_last {
	/*width: 11%;*/
	float: left;
}

.more_forecast_button {
	display: block;
	text-align: center;
	font-size: 83%;
	font-weight: bold;
	color: #0070B8;
	padding: 14px 4px 18px 4px;
	border: 1px dashed #5E5E5E;
	border-radius: 10px;
	line-height: 18px;
	margin-left: 20px;
	margin-top: 2px;
	text-decoration: none;
}

.forecast_column_middle {
	border-left: 1px dashed #50AADE;
	border-right: 1px dashed #50AADE;
	padding-left: 15px;
}

.forecast_column_middle1 {
	border-right: 1px dashed #50AADE;
	padding-left: 15px;
}

body #place_lists li {
	width: 24%;
}

.nmhs_box,
.category_note {
	display: none;
}

.wxicons_box {
	max-width: 100% !important;
}


/**/

#climate_content>div>div>a {
	font-size: 16px !important;
}

.myFavList .slides>li {
	margin-right: 1em;
	min-height: auto;
	box-shadow: none;
	background-color: #3b6da3;
	width: 27%;
}

.myFavList .slides>li:last-child {
	width: 1%;
}

.myFavList .adw_day {
	color: #fff;
}

.adw_day>div {
	display: inline-block;
}

.adw_day>div:nth-child(1) {
	margin-left: 8px;
}

.adw_day>div img {
	margin-top: 11px;
	width: 3em;
}

.adw_day>div:last-child {
	/* margin-right: 1em;*/
	margin-left: 5px;
}

.myFavList .adw_day>div:nth-child(1) {
	text-align: left;
}


/**/

@media (max-width:979px){
	.wx_infobox_title {
		/*font-size:14px !important;*/
	}
	.wx_infobox a>table tr:nth-child(2)>td {
		padding-top: 1px !important;
		padding-bottom: 1px !important;
		padding: 0 !important;
	}
	.wx_infobox_title.wx_infobox_no_border {
		margin: 0 !important;
		padding: 0 !important;
	}
}

.wx_infobox_title.wx_infobox_no_border {
	margin-left: 12px;
	margin-top: 9px;
}

.wx_infobox_img {
	min-width: 32px;
}

#forecast_list .favCityName {
	border-bottom: 1px dashed #7C7C7C;
	color: #4b4b4b;
}

#forecast_list .ui-sortable {
	list-style-type: none;
}


/* @media(max-width:767px){
   #forecast_list .adw_day div{
     width:100%;
   }
}
   
 @media(min-width:767px){
   #forecast_list .adw_day div:nth-child(3){
     width:30%;
   }
  }*/

@media (max-width:676px) {
	.adw_day {
		margin-bottom: 1em;
	}
	.adw_day>div {
		width: 100% !important;
	}
}

.tbl_wxicons img {
	width: 35px;
}

.weather_icon_title span {
	/* color: #404042; */
	text-decoration: none !important;
	padding: 12px 16px;
	padding-left: 50px;
	padding-right: 250px;
	background-color: #1a58ab;
	color: #fff;
	display: block;
	border-radius: 4px;
	position: relative;
}

body .weather_icon_table,#notes_box {
	box-shadow: unset;
}

@media(max-width:767px) {
	.weather_icon_title span {
		padding-right: 0px;
	}
}

 @media(min-width:979px){
	.my_fav_list .wxicons_box .myFavList .slides li .adw_day div) {
		display: inline-block;
	}
	.my_fav_list .wxicons_box .myFavList .slides li .adw_day {
		/*display: flex;
		white-space: nowrap;*/
	}
}

.fav_loc,
.heading_left h3,
.heading_left_climate h3 {
	margin-top: 3px;
}

#btn_view {
	padding: 4px 10px 5px 12px;
}

#city_name {
	margin-top: 0px;
}

.region_button_box ul li {
	margin: -6px 4px 8px 0px;
}

.forecast_desc {
	margin-top: 3px;
}

.more_forecast_button {
	line-height: 32px;
}

.place_name_1,
.place_name_2 {
	line-height: 15px;
	display: block;
	position: absolute;
	top: 50%;
	transform: translateY(-50%);
	height: auto !important;
	padding-top: 0 !important;
}

#osmap_canvas {
	width: 100%;
	height: 430px;
}

#s_osmap_canvas {
	width: 100%;
	height:311px;
}

.olMap img {
	max-width: unset;
}

.results {
	margin-top: 0px;
	border: none;
	position: absolute;
	right: unset;
	top: unset;
	z-index: 2300;
	max-height: 138px;
	overflow-y: auto;
	overflow-x: hidden;
}

#mainContent>div.border_blank.div_wwi>div.div_wwi_tab>ul.etabs a {
	text-decoration: none;
}

.favCityName>a {
	color: #4b4b4b;
	text-decoration: none;
}

.favCityName>a:hover {
	text-decoration: underline;
}

body .div_wwi_tab .etabs {
	padding-left: 0;
}

.weather_icon_table th {
	display: none;
	visibility: hidden;
}

@media (max-width:767px) {
	.tbl_wxicons {
		width: 100%;
	}
	.weather_icon_table tr td {
		border: 0;
		display: inline-block !important;
		width: 48% !important;
	}
	.weather_icon_table:nth-child(odd) {
		padding-top: -1px !important;
	}
	#place_lists li.a {
		width: 100% !important;
	}
	body #place_lists {
		text-align: center;
	}
}

.forecast_wxicon {
	padding: 5px 0px 0px 0px;
	float: left;
	padding-top: 20px;
}

.forecast_infobox {
	float: left;
	padding: 5px 0px 0px 10px;
}

.h1_a {
	text-decoration: none !important;
}

.regionLineDiv ul {
	margin-top: -3px;
}

.regionLineDiv li {
	width: 10px;
	height: 10px;
	text-align: center;
	line-height: 1em;
	border-radius: 1em;
	background: #3b6da3;
	margin: 0 1em;
	display: inline-block;
	color: white;
	position: relative;
	font-size: 6px;
}

.regionLineDiv li:nth-child(1) {
	margin: 0 -10px;
}

.regionLineDiv li:nth-child(2) {
	margin: 0px 77px;
}

.regionLineDiv li:nth-child(3) {
	margin: 0 18px;
}

.regionLineDiv li:nth-child(4) {
	margin: 0 160px;
}

.regionLineDiv li:nth-child(5) {
	margin: 0px 44px;
}

.regionLineDiv li:nth-child(6) {
	margin-right: 0;
	margin-left: 100px;
}

.regionLineDiv .active {
	background: #fff;
	border: 3px #fca140 solid;
	z-index: 200;
	/* font-size: 12px; */
	width: 10px;
	height: 10px;
}

.regionLineDiv ul {
	background-image: url("images/line.png");
	background-position: 100px 4px;
	margin-left: 36px;
	max-width: 770px;
}

img.wx_infobox_img {
	max-width: 50px;
}

.msg_box {
	border: 1px solid #01A185;
	padding: 5px;
	margin-bottom: 3px;
	background-color: #C6FFF5;
	color: #01A185;
	text-align: center;
	display: none;
}

body .map_n_info #right_col {
	width: 100% !important;
}

.my_fav_list .heading_right {
	position: absolute;
	top: 0;
	right: 0;
}

.my_fav_list .favGroup {
	position: relative;
	padding: 20px 0;
}

.my_fav_list .favCityName {
	border-bottom: 1px dashed #7C7C7C;
}

.my_fav_list #wwi_add_new_fav button {
	cursor: pointer;
	border: none;
	margin: 0;
	background: url(../../../images/ico_add.png) no-repeat 0px 0px;
	width: 30px;
	height: 30px;
	float: right;
	margin-top: 5px;
	margin-right: 8px;
	background-color: #1a58ab;
	border-radius: 4px;
	background-position: center;
}

.my_fav_list .setting_box select {
	width: 100%;
	/*
    display: none;*/
	margin-bottom: 10px;
}

.my_fav_list .setting_box>div {
	margin-bottom: 10px;
}

.my_fav_list .setting_box .button {
	background: #FAFAFA;
	background: -webkit-linear-gradient(top, #FFF, #EEE);
	background: -moz-linear-gradient(top, #ffffff, #eeeeee);
	background: -o-linear-gradient(top, #ffffff, #eeeeee);
	background: linear-gradient(to bottom, #FFF, #EEE);
	border: 1px solid #BBB;
	border-radius: 4px;
	box-shadow: inset 0 1px 1px rgba(255, 255, 255, 0.2);
	color: #555;
	cursor: pointer;
	display: inline-block;
	font-family: "Helvetica Neue", Arial, Verdana, "Nimbus Sans L", sans-serif;
	font-size: 14px;
	font-weight: 500;
	height: 31px;
	line-height: 28px;
	outline: none;
	padding: 0 13px;
	text-shadow: 0 1px 0 #FFF;
	text-decoration: none;
	vertical-align: middle;
	white-space: nowrap;
	-webkit-font-smoothing: antialiased;
	-webkit-box-sizing: border-box;
	-moz-box-sizing: border-box;
	box-sizing: border-box;
	margin-right: 4px;
}

.my_fav_list .button-blue {
	background: #1385E5;
	background: -webkit-linear-gradient(top, #53B2FC, #1385E5);
	background: -moz-linear-gradient(top, #53b2fc, #1385e5);
	background: -o-linear-gradient(top, #53b2fc, #1385e5);
	background: linear-gradient(to bottom, #53B2FC, #1385E5);
	border-color: #075FA9;
	color: #FFF;
	font-weight: bold;
	text-shadow: 0 -1px 0 rgba(0, 0, 0, 0.4);
}

.my_fav_list .chosen-choices {
	position: relative;
	overflow: hidden;
	margin: 0;
	padding: 2px 5px;
	width: 98%;
	height: auto !important;
	height: 1%;
	border: 1px solid #AAA;
	background-color: #FFF;
	background-image: -webkit-gradient(linear, 50% 0%, 50% 100%, color-stop(1%, #EEE), color-stop(15%, #FFF));
	background-image: -webkit-linear-gradient(#EEE 1%, #FFF 15%);
	background-image: -moz-linear-gradient(#eeeeee 1%, #ffffff 15%);
	background-image: -o-linear-gradient(#eeeeee 1%, #ffffff 15%);
	background-image: linear-gradient(#EEE 1%, #FFF 15%);
	cursor: text;
}

.my_fav_list .chosen-container-active.chosen-with-drop .chosen-single {
	border: 1px solid #aaa;
	-moz-border-radius-bottomright: 0;
	border-bottom-right-radius: 0;
	-moz-border-radius-bottomleft: 0;
	border-bottom-left-radius: 0;
	background-image: -webkit-gradient(linear, 50% 0, 50% 100%, color-stop(20%, #eee), color-stop(80%, #fff));
	background-image: -webkit-linear-gradient(#eee 20%, #fff 80%);
	background-image: -moz-linear-gradient(#eee 20%, #fff 80%);
	background-image: -o-linear-gradient(#eee 20%, #fff 80%);
	background-image: linear-gradient(#eee 20%, #fff 80%);
	box-shadow: 0 1px 0 #fff inset;
}

.my_fav_list .chosen-container-active.chosen-with-drop .chosen-single {
	border: 1px solid #aaa;
	-moz-border-radius-bottomright: 0;
	border-bottom-right-radius: 0;
	-moz-border-radius-bottomleft: 0;
	border-bottom-left-radius: 0;
	background-image: -webkit-gradient(linear, 50% 0, 50% 100%, color-stop(20%, #eee), color-stop(80%, #fff));
	background-image: -webkit-linear-gradient(#eee 20%, #fff 80%);
	background-image: -moz-linear-gradient(#eee 20%, #fff 80%);
	background-image: -o-linear-gradient(#eee 20%, #fff 80%);
	background-image: linear-gradient(#eee 20%, #fff 80%);
	box-shadow: 0 1px 0 #fff inset;
}

.my_fav_list .chosen-container-single .chosen-single span {
	display: block;
	overflow: hidden;
	margin-right: 26px;
	text-overflow: ellipsis;
	white-space: nowrap;
}

.my_fav_list .chosen-choices li.search-choice {
	display: inline-block;
	position: relative;
	margin: 3px 5px 3px 0;
	padding: 8px 20px 8px 20px;
	border: 1px solid #AAA;
	max-width: 100%;
	border-radius: 3px;
	background-color: #EEE;
	background-image: -webkit-gradient(linear, 50% 0%, 50% 100%, color-stop(20%, #F4F4F4), color-stop(50%, #F0F0F0), color-stop(52%, #E8E8E8), color-stop(100%, #EEE));
	background-image: -webkit-linear-gradient(#F4F4F4 20%, #F0F0F0 50%, #E8E8E8 52%, #EEE 100%);
	background-image: -moz-linear-gradient(#f4f4f4 20%, #f0f0f0 50%, #e8e8e8 52%, #eeeeee 100%);
	background-image: -o-linear-gradient(#f4f4f4 20%, #f0f0f0 50%, #e8e8e8 52%, #eeeeee 100%);
	background-image: linear-gradient(#F4F4F4 20%, #F0F0F0 50%, #E8E8E8 52%, #EEE 100%);
	background-size: 100% 19px;
	background-repeat: repeat-x;
	background-clip: padding-box;
	box-shadow: 0 0 2px #FFF inset, 0 1px 0 rgba(0, 0, 0, 0.05);
	color: #333;
	line-height: 13px;
	cursor: move;
}

.my_fav_list .chosen-choices li.search-choice span {
	word-wrap: break-word;
}

.my_fav_list .chosen-choices li.search-choice .search-choice-close {
	position: absolute;
	top: 50%;
	right: 5px;
	display: block;
	margin-top: -5px;
	width: 12px;
	height: 12px;
	background: url(../../../images/chosen-sprite.png) -42px 1px no-repeat;
	font-size: 1px;
	cursor: pointer;
}

.my_fav_list .remove {
	position: absolute;
	top: 50px;
	right: 10px;
	z-index: 10;
}

.my_fav_list .remove a {
	display: block;
	width: 17px;
	height: 17px;
	background: url(../../../images/close.png) no-repeat top left;
	color: #606060;
	font-weight: bold;
	font-size: 11px;
	text-decoration: none;
}

.map_n_info {
	margin-bottom: 10px;
}

.map_n_info .olMap {
	text-align: center;
}

.map_n_info #left_col {
	display: inline-block;
	width: 66.66%
}

.map_n_info #right_col {
	display: inline-block;
	width: 33.33%;
}

.map_n_info {
	padding: 10px 0;
	margin-bottom: 10px;
	display: -webkit-flex;
	display: -moz-flex;
	display: flex;
}

.map_n_info #left_col {
	padding: 0 20px;
}

.map_n_info #left_col img {
	width: 100%;
}

.map_n_info #right_col {
	border: 1px solid #3096E5;
	background-color: #EEE;
	padding: 10px;
}

.myFavList {
	margin: 8px 0 0 0;
	border: 0;
	background-color: transparent;
}

.myFavList>div {
	padding-bottom: 20px;
}

.myFavList ul.slides {
	margin: 0;
	padding: 0;
	display: flex;
}

.myFavList .slides>li {
	padding-left: 2px;
	padding-right: 2px;
	min-width: 120px;
	line-height: normal;
}

.myFavList .adw_day>div:nth-child(1) {
	color: #fff;
	text-align: center;
	padding-top: 12px;
	white-space: nowrap;
}

.myFavList .adw_day>div:nth-child(2) {
	text-align: center;
	padding: 12px 15px;
}

.myFavList .adw_day>div:nth-child(2)>span {
	margin: auto;
	display: inline-block;
	border-radius: 100px;
}

.myFavList .adw_day>div:nth-child(2) img {
	width: auto;
}

.myFavList .adw_detail {
	font-size: 1em;
	font-weight: bold;
}

.myFavList .adw_detail {
	color: #fff;
	padding: 8px 20px;
}

.myFavList .adw_detail>div:nth-child(1) {
	font-size: 1em;
}

.myFavList .adw_detail>div {
	text-align: center;
}

.myFavList .slides>li:last-child {
	background-color: #fff;
	color: #1b5397;
	border: 2px solid #1b5397;
	position: relative;
}

.myFavList .slides>li:last-child .adw_more a {
	position: absolute;
	left: 0;
	right: 0;
	top: 0;
	bottom: 0;
}

.myFavList .slides>li:last-child a {
	color: #1b5397;
	text-decoration: none;
}

.myFavList .slides>li:last-child .adw_more a span {
	position: absolute;
	left: 50%;
	top: 50%;
	font-size: 1em;
	white-space: nowrap;
	font-weight: bold;
	transform: translate(-50%, -50%);
}

.myFavList .flex-direction-nav a:before {
	color: rgba(255, 255, 255, 1);
	font-size: 20px;
	padding: 13px 18.5px;
}

.myFavList .flex-direction-nav a.flex-prev,
.myFavList:hover .flex-direction-nav a.flex-prev {
	left: -30px;
}

.myFavList .flex-direction-nav a.flex-next,
.myFavList:hover .flex-direction-nav a.flex-next {
	right: -30px;
}

.myFavList .flex-direction-nav a {
	opacity: 1;
	/* background-color: #7f7f7f;
    */
	text-align: center;
	font-size: 0;
	width: auto;
	height: auto;
}

.div_wwi_search {
	display: block;
	width: 100%;
	padding: 15px 10px;
	position: relative;
}

.div_wwi_search input {
	width: 100%;
	border: solid 1px #ff9c00;
	outline: #ff9c00 auto 7px;
	outline-offset: -2px;
	/* height: 26px;
    */
	padding: 4px 12px;
}

.div_wwi_search .searchBtn {
	position: absolute;
	right: 20px;
	top: 51%;
	transform: translateY(-50%);
	width: 20px;
}

.div_wwi_tab .etabs {
	/*background-color: #f4f5fa;*/
	width: 100%;
	padding: 10px 36px 0 36px;
	margin: 0 0 20px 0;
	position: relative;
	display: -webkit-flex;
	display: -moz-flex;
	display: flex;
}

.div_wwi_tab .etabs>li {
	display: inline-block;
	margin: 0 2px;
	text-align: center;
	position: relative;
	z-index: 2200;
}

.div_wwi_tab .etabs>li a {
	display: block;
	height: 100%;
	font-size: 1.2em;
	/*background-color: #cbe4e1;*/
	padding: 12px 40px;
	/*	border-top: 3px solid #cbe4e1;
	border-bottom: 1px solid #d5d6d8;
	border-left: 1px solid #cbe4e1;
	border-right: 1px solid #cbe4e1;*/
}

.div_wwi_tab .etabs>li.active a {
	background-color: #fff;
	border-top: 3px solid #50b99b;
	border-bottom: 1px solid #fff;
	border-left: 1px solid #d5d6d8;
	border-right: 1px solid #d5d6d8;
	color: #073e7f;
}

.div_wwi_tab .etabs:after {
	content: "";
	position: absolute;
	left: 0;
	right: 0;
	bottom: 0;
	height: 1px;
	background-color: #d5d6d8;
}

.div_wwi_bc .name_bar {
	display: block;
	padding: 8px 36px;
	
	color: #fff;
}

.div_wwi_bc .name_bar a {
	color: #fff;
}

.div_wwi_map {
	border: 1px solid #0070B8;
	padding: 10px;
	margin-bottom: 10px;
}

.div_wwi_map .map_nav {
	text-align: center;
	margin: 10px 0;
}

.div_wwi_map .map_nav img {
	width: 100%;
}

.wwi_legend {
	/* float:left;
    */
	margin-bottom: 10px;
}

.wwi_legend>span {
	display: inline-block;
}

.wwi_legend .legend_forecast {
	vertical-align: middle;
	width: 26px;
	height: 26px;
	background: url(../../../images/icon_forecast.png) no-repeat 0px 0px;
}

.wwi_legend .legend_name,
.wwi_legend .legend_name_climate {
	margin: 3px 10px 0px 3px;
	padding-top: 3px;
	color: #B41262;
	font-weight: bold;
}

.wwi_legend .legend_climate {
	vertical-align: middle;
	width: 26px;
	height: 26px;
	background: url(../../../images/icon_climatological.png) no-repeat 0px 0px;
}

.wwi_legend .legend_name_climate {
	color: #105930;
}

@media screen and (max-width: 979px) {
	body .map_n_info {
		display: block;
	}
	body .map_n_info #left_col,
	body .map_n_info #right_col {
		width: 100%;
		padding: 0;
		margin-bottom: 10px;
	}
	body .myFavList {
		overflow: auto;
	}
	body .div_wwi_tab .etabs {
		display: block;
	}
	body .div_wwi_tab .etabs>li {
		width: 100%;
	}
	body .div_wwi_map .wxicons_box {
		overflow: auto;
		margin: 0 !important;
	}
}

/* new css 20200116 */
@media (max-width:979px){

.fc_wxicon{
	text-align:center !important;
}

.adw_day>div:last-child{
	margin-left:0px;
}

.adw_detail{
	text-align:center;
	padding-left:0px;
}

.adw_day>div:nth-child(1){
	margin-left:0px !important;
}
	
}

@media (max-width:1062px){
	.fav_btn_div{
		width: 60%;
	}
	
}

@media (max-width:979px){
	
	#right_col{
		padding-left:5px !important;
		padding-right:5px !important;
	}
	
	#mainContent .wxicons_box{
	border: 1px solid #3096E5;
	margin-top:3px;
	}
	
	.fav_btn_main{
	display:flex;
}

.reset_fav_btn{
	width:140px;
	margin-left:0px;
}

.fav_btn_div{

  margin: auto;
  width: 100%;
  padding: 0px;
}

.myFavList .adw_detail{
	padding: 8px 0px;
}
	
}

.notes_box_content{
    color: #000000;
    border-bottom: 1px dashed #7C7C7C;
    padding: 5px 10px 5px 10px;
}

/* end new css */

#myFavList .favGroupMove {
	display: none;
	width: 21px;
	height: 21px;
	margin-right: 10px;
	background-image: url('../../../en/wxinfo/worldwx/images/move.png');
}

@media (max-width:979px) {
	#myFavList .favGroupMove {
		display: inline-block;
	}
}

    </style>
    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:/ -->
    <!--[if lt IE 9]>
    <script type="text/javascript" src="js/html5shiv.js"></script>
    <script type="text/javascript" src="js/respond.min.js"></script>
    <![endif]-->
    <script type="text/javascript" src="/js/jquery.min.js"></script>
    <script type="text/javascript" src="/js/jquery-ui.min.js"></script>
    <script type="text/javascript" src="/js/jquery.cookie.js"></script>
    <script type="text/javascript" src="/js/jquery.flexslider.js"></script>
    <script type="text/javascript" src="/js/menu.js"></script>
    <script type="text/javascript" src="/js/bootstrap.js"></script>

	<script type="text/javascript" src="/js/moment.js"></script>
	<script type="text/javascript" src="/js/vue.min.js"></script>
	<script type="text/javascript" src="/js/vue-router.js"></script>
	<script type="text/javascript" src="/js/vue-extend.js"></script>
	<script type="text/javascript" src="/js/tmp.js"></script>
	<script type="text/javascript" src="/js/jquery.rwdImageMaps.min.js"></script>


    <script type="text/javascript">
		
var menu_id = '37';
var section_id = '2018010100000010853';

                          var region_ary = ["World Weather Information", "Africa", "Asia", "South America", "North & Central America", "South West Pacific", "Europe"];

var mapInfo = {
    "place": [{
            "n": "China",
            "lat": 35.861660,
            "lng": 104.195397,
            "bz": 4,
            "sz": 3,
            "id": 1
        },
        {
            "n": "Hong Kong,China",
            "lat": 22.396428,
            "lng": 114.109497,
            "bz": 6,
            "sz": 5,
            "id": 2
        },
        {
            "n": "Portugal",
            "lat": 39.399872,
            "lng": -8.224454,
            "bz": 6,
            "sz": 5,
            "id": 3
        },
        {
            "n": "Madagascar",
            "lat": -18.766947,
            "lng": 46.869107,
            "bz": 6,
            "sz": 5,
            "id": 4
        },
        {
            "n": "Bosnia And Herzegovina",
            "lat": 43.915886,
            "lng": 17.679076,
            "bz": 6,
            "sz": 5,
            "id": 5
        },
        {
            "n": "Austria",
            "lat": 47.516231,
            "lng": 14.550072,
            "bz": 6,
            "sz": 5,
            "id": 6
        },
        {
            "n": "Azerbaijan",
            "lat": 40.143105,
            "lng": 47.576927,
            "bz": 6,
            "sz": 5,
            "id": 7
        },
        {
            "n": "Norway",
            "lat": 60.472024,
            "lng": 8.468946,
            "bz": 6,
            "sz": 5,
            "id": 8
        },
        {
            "n": "Poland",
            "lat": 51.919438,
            "lng": 19.145136,
            "bz": 6,
            "sz": 5,
            "id": 9
        },
        {
            "n": "United Kingdom of Great Britain and Northern Ireland",
            "lat": 52.801634,
            "lng": -3.699644,
            "bz": 6,
            "sz": 5,
            "id": 10
        },
        {
            "n": "Slovakia",
            "lat": 48.669026,
            "lng": 19.699024,
            "bz": 6,
            "sz": 5,
            "id": 11
        },
        {
            "n": "Malta",
            "lat": 35.937496,
            "lng": 14.375416,
            "bz": 6,
            "sz": 5,
            "id": 12
        },
        {
            "n": "Israel",
            "lat": 31.046051,
            "lng": 34.851612,
            "bz": 6,
            "sz": 5,
            "id": 13
        },
        {
            "n": "Turkey",
            "lat": 38.963745,
            "lng": 35.243322,
            "bz": 6,
            "sz": 5,
            "id": 14
        },
        {
            "n": "Slovenia",
            "lat": 46.151241,
            "lng": 14.995463,
            "bz": 6,
            "sz": 5,
            "id": 15
        },
        {
            "n": "Germany",
            "lat": 51.165691,
            "lng": 10.451526,
            "bz": 6,
            "sz": 5,
            "id": 16
        },
        {
            "n": "Hungary",
            "lat": 47.162494,
            "lng": 19.503304,
            "bz": 6,
            "sz": 5,
            "id": 17
        },
        {
            "n": "Armenia",
            "lat": 40.069099,
            "lng": 45.038189,
            "bz": 6,
            "sz": 5,
            "id": 18
        },
        {
            "n": "Croatia",
            "lat": 45.100000,
            "lng": 15.200000,
            "bz": 6,
            "sz": 5,
            "id": 19
        },
        {
            "n": "Malaysia",
            "lat": 4.210484,
            "lng": 101.975766,
            "bz": 6,
            "sz": 5,
            "id": 20
        },
        {
            "n": "Philippines",
            "lat": 12.879721,
            "lng": 121.774017,
            "bz": 6,
            "sz": 5,
            "id": 21
        },
        {
            "n": "Fiji",
            "lat": -17.908774,
            "lng": 177.872771,
            "bz": 8,
            "sz": 5,
            "id": 22
        },
        {
            "n": "Brunei Darussalam",
            "lat": 4.535277,
            "lng": 114.727669,
            "bz": 6,
            "sz": 5,
            "id": 23
        },
        {
            "n": "Caribbean Islands",
            "lat": 20.154020,
            "lng": -62.085601,
            "bz": 6,
            "sz": 5,
            "id": 24
        },
        {
            "n": "British Caribbean Territories",
            "lat": 19.782289,
            "lng": -80.809722,
            "bz": 6,
            "sz": 5,
            "id": 25
        },
        {
            "n": "Bahamas",
            "lat": 25.034280,
            "lng": -77.396280,
            "bz": 6,
            "sz": 5,
            "id": 26
        },
        {
            "n": "Jamaica",
            "lat": 18.109581,
            "lng": -77.297508,
            "bz": 6,
            "sz": 5,
            "id": 27
        },
        {
            "n": "Trinidad and Tobago",
            "lat": 10.691803,
            "lng": -61.222503,
            "bz": 6,
            "sz": 5,
            "id": 28
        },
        {
            "n": "Chile",
            "lat": -35.675147,
            "lng": -71.542969,
            "bz": 4,
            "sz": 3,
            "id": 29
        },
        {
            "n": "Peru",
            "lat": -9.189967,
            "lng": -75.015152,
            "bz": 6,
            "sz": 5,
            "id": 30
        },
        {
            "n": "Oman",
            "lat": 21.512583,
            "lng": 55.923255,
            "bz": 6,
            "sz": 5,
            "id": 31
        },
        {
            "n": "Nepal",
            "lat": 28.394857,
            "lng": 84.124008,
            "bz": 6,
            "sz": 5,
            "id": 32
        },
        {
            "n": "Uzbekistan",
            "lat": 41.377491,
            "lng": 64.585262,
            "bz": 6,
            "sz": 5,
            "id": 33
        },
        {
            "n": "Mozambique",
            "lat": -18.665695,
            "lng": 35.529562,
            "bz": 6,
            "sz": 5,
            "id": 34
        },
        {
            "n": "Mali",
            "lat": 17.570692,
            "lng": -3.996166,
            "bz": 5,
            "sz": 5,
            "id": 35
        },
        {
            "n": "South Africa",
            "lat": -30.559482,
            "lng": 22.937506,
            "bz": 6,
            "sz": 5,
            "id": 36
        },
        {
            "n": "Gambia",
            "lat": 13.443182,
            "lng": -15.310139,
            "bz": 6,
            "sz": 5,
            "id": 37
        },
        {
            "n": "Netherlands",
            "lat": 52.132633,
            "lng": 5.291266,
            "bz": 6,
            "sz": 5,
            "id": 38
        },
        {
            "n": "Belize",
            "lat": 17.189877,
            "lng": -88.497650,
            "bz": 6,
            "sz": 5,
            "id": 39
        },
        {
            "n": "Estonia",
            "lat": 58.595272,
            "lng": 25.013607,
            "bz": 6,
            "sz": 5,
            "id": 40
        },
        {
            "n": "Zambia",
            "lat": -13.133897,
            "lng": 27.849332,
            "bz": 6,
            "sz": 5,
            "id": 41
        },
        {
            "n": "Antigua and Barbuda",
            "lat": 17.060816,
            "lng": -61.796428,
            "bz": 6,
            "sz": 5,
            "id": 42
        },
        {
            "n": "Eritrea",
            "lat": 15.179384,
            "lng": 39.782334,
            "bz": 6,
            "sz": 5,
            "id": 43
        },
        {
            "n": "Indonesia",
            "lat": -0.789275,
            "lng": 113.921327,
            "bz": 5,
            "sz": 4,
            "id": 44
        },
        {
            "n": "Latvia",
            "lat": 56.879635,
            "lng": 24.603189,
            "bz": 6,
            "sz": 5,
            "id": 45
        },
        {
            "n": "Morocco",
            "lat": 31.791702,
            "lng": -7.092620,
            "bz": 6,
            "sz": 5,
            "id": 46
        },
        {
            "n": "New Zealand",
            "lat": -40.900557,
            "lng": 174.885971,
            "bz": 5,
            "sz": 4,
            "id": 47
        },
        {
            "n": "Pakistan",
            "lat": 30.375321,
            "lng": 69.345116,
            "bz": 5,
            "sz": 4,
            "id": 48
        },
        {
            "n": "Senegal",
            "lat": 14.497401,
            "lng": -14.452362,
            "bz": 6,
            "sz": 5,
            "id": 49
        },
        {
            "n": "United Republic of Tanzania",
            "lat": -6.369028,
            "lng": 34.888822,
            "bz": 6,
            "sz": 5,
            "id": 50
        },
        {
            "n": "Argentina",
            "lat": -38.416097,
            "lng": -63.616672,
            "bz": 4,
            "sz": 3,
            "id": 51
        },
        {
            "n": "Bahrain",
            "lat": 26.066700,
            "lng": 50.557700,
            "bz": 6,
            "sz": 5,
            "id": 52
        },
        {
            "n": "Barbados",
            "lat": 13.193887,
            "lng": -59.543198,
            "bz": 6,
            "sz": 5,
            "id": 53
        },
        {
            "n": "Belgium",
            "lat": 50.503887,
            "lng": 4.469936,
            "bz": 6,
            "sz": 5,
            "id": 54
        },
        {
            "n": "Bolivia",
            "lat": -16.290154,
            "lng": -63.588653,
            "bz": 6,
            "sz": 5,
            "id": 55
        },
        {
            "n": "Cameroon",
            "lat": 7.369722,
            "lng": 12.354722,
            "bz": 6,
            "sz": 5,
            "id": 56
        },
        {
            "n": "Canada",
            "lat": 53.077657,
            "lng": -94.569427,
            "bz": 4,
            "sz": 3,
            "id": 57
        },
        {
            "n": "Colombia",
            "lat": 4.570868,
            "lng": -74.297333,
            "bz": 6,
            "sz": 5,
            "id": 58
        },
        {
            "n": "Comoros",
            "lat": -11.645500,
            "lng": 43.333300,
            "bz": 6,
            "sz": 5,
            "id": 59
        },
        {
            "n": "Egypt",
            "lat": 26.820553,
            "lng": 30.802498,
            "bz": 6,
            "sz": 5,
            "id": 60
        },
        {
            "n": "Ethiopia",
            "lat": 9.145000,
            "lng": 40.489673,
            "bz": 6,
            "sz": 5,
            "id": 61
        },
        {
            "n": "Finland",
            "lat": 61.924110,
            "lng": 25.748151,
            "bz": 6,
            "sz": 5,
            "id": 62
        },
        {
            "n": "France",
            "lat": 46.227638,
            "lng": 2.213749,
            "bz": 6,
            "sz": 5,
            "id": 63
        },
        {
            "n": "Greece",
            "lat": 39.074208,
            "lng": 21.824312,
            "bz": 6,
            "sz": 5,
            "id": 64
        },
        {
            "n": "Guinea-Bissau",
            "lat": 11.803749,
            "lng": -15.180413,
            "bz": 6,
            "sz": 5,
            "id": 65
        },
        {
            "n": "Guyana",
            "lat": 4.860416,
            "lng": -58.930180,
            "bz": 6,
            "sz": 5,
            "id": 66
        },
        {
            "n": "France – Guiana",
            "lat": 4.860416,
            "lng": -55.930180,
            "bz": 6,
            "sz": 5,
            "id": 67
        },
        {
            "n": "India",
            "lat": 20.593684,
            "lng": 78.962880,
            "bz": 5,
            "sz": 4,
            "id": 68
        },
        {
            "n": "Ireland",
            "lat": 53.412910,
            "lng": -8.243890,
            "bz": 6,
            "sz": 5,
            "id": 69
        },
        {
            "n": "Japan",
            "lat": 36.204824,
            "lng": 138.252924,
            "bz": 6,
            "sz": 5,
            "id": 70
        },
        {
            "n": "Jordan",
            "lat": 30.585164,
            "lng": 36.238414,
            "bz": 6,
            "sz": 5,
            "id": 71
        },
        {
            "n": "Kazakhstan",
            "lat": 48.019573,
            "lng": 66.923684,
            "bz": 6,
            "sz": 5,
            "id": 72
        },
        {
            "n": "Kenya",
            "lat": -0.023559,
            "lng": 37.906193,
            "bz": 6,
            "sz": 5,
            "id": 73
        },
        {
            "n": "Macao,China",
            "lat": 22.201874,
            "lng": 113.544202,
            "bz": 6,
            "sz": 5,
            "id": 74
        },
        {
            "n": "Malawi",
            "lat": -13.254308,
            "lng": 34.301525,
            "bz": 6,
            "sz": 5,
            "id": 75
        },
        {
            "n": "Niger",
            "lat": 17.607789,
            "lng": 8.081666,
            "bz": 6,
            "sz": 5,
            "id": 76
        },
        {
            "n": "Nigeria",
            "lat": 9.081999,
            "lng": 8.675277,
            "bz": 6,
            "sz": 5,
            "id": 77
        },
        {
            "n": "Panama",
            "lat": 8.537981,
            "lng": -80.782127,
            "bz": 6,
            "sz": 5,
            "id": 78
        },
        {
            "n": "Papua New Guinea",
            "lat": -6.314993,
            "lng": 143.955550,
            "bz": 6,
            "sz": 5,
            "id": 79
        },
        {
            "n": "Sao Tome and Principe",
            "lat": 0.186360,
            "lng": 6.613081,
            "bz": 6,
            "sz": 5,
            "id": 80
        },
        {
            "n": "Saudi Arabia",
            "lat": 23.885942,
            "lng": 45.079162,
            "bz": 5,
            "sz": 4,
            "id": 81
        },
        {
            "n": "Seychelles",
            "lat": -4.679574,
            "lng": 55.491977,
            "bz": 6,
            "sz": 5,
            "id": 82
        },
        {
            "n": "Singapore",
            "lat": 1.352083,
            "lng": 103.819836,
            "bz": 6,
            "sz": 5,
            "id": 83
        },
        {
            "n": "Viet Nam，Socialist Republic of",
            "lat": 14.058324,
            "lng": 108.277199,
            "bz": 6,
            "sz": 5,
            "id": 84
        },
        {
            "n": "Spain",
            "lat": 40.463667,
            "lng": -3.749220,
            "bz": 6,
            "sz": 5,
            "id": 85
        },
        {
            "n": "Sri Lanka",
            "lat": 7.873054,
            "lng": 80.771797,
            "bz": 6,
            "sz": 5,
            "id": 86
        },
        {
            "n": "Sudan",
            "lat": 12.862807,
            "lng": 30.217636,
            "bz": 6,
            "sz": 5,
            "id": 87
        },
        {
            "n": "Suriname",
            "lat": 3.919305,
            "lng": -56.027783,
            "bz": 6,
            "sz": 5,
            "id": 88
        },
        {
            "n": "Switzerland",
            "lat": 46.818188,
            "lng": 8.227512,
            "bz": 7,
            "sz": 6,
            "id": 89
        },
        {
            "n": "Chad",
            "lat": 15.454166,
            "lng": 18.732207,
            "bz": 6,
            "sz": 5,
            "id": 90
        },
        {
            "n": "Thailand",
            "lat": 15.870032,
            "lng": 100.992541,
            "bz": 6,
            "sz": 5,
            "id": 91
        },
        {
            "n": "North Macedonia",
            "lat": 41.608635,
            "lng": 21.745275,
            "bz": 6,
            "sz": 5,
            "id": 92
        },
        {
            "n": "Togo",
            "lat": 8.619543,
            "lng": 0.824782,
            "bz": 6,
            "sz": 5,
            "id": 93
        },
        {
            "n": "Ukraine",
            "lat": 48.379433,
            "lng": 31.165580,
            "bz": 6,
            "sz": 5,
            "id": 94
        },
        {
            "n": "United States of America",
            "lat": 37.090240,
            "lng": -95.712891,
            "bz": 4,
            "sz": 3,
            "id": 95
        },
        {
            "n": "Uruguay",
            "lat": -32.522779,
            "lng": -55.765835,
            "bz": 6,
            "sz": 5,
            "id": 96
        },
        {
            "n": "Republic Of Korea",
            "lat": 35.907757,
            "lng": 127.766922,
            "bz": 6,
            "sz": 5,
            "id": 97
        },
        {
            "n": "Sweden",
            "lat": 60.128161,
            "lng": 18.643501,
            "bz": 6,
            "sz": 5,
            "id": 98
        },
        {
            "n": "Iceland",
            "lat": 64.963051,
            "lng": -19.020835,
            "bz": 6,
            "sz": 5,
            "id": 99
        },
        {
            "n": "Luxembourg",
            "lat": 49.815273,
            "lng": 6.129583,
            "bz": 6,
            "sz": 5,
            "id": 100
        },
        {
            "n": "Syrian Arab Republic",
            "lat": 34.802075,
            "lng": 38.996815,
            "bz": 6,
            "sz": 5,
            "id": 101
        },
        {
            "n": "Cabo Verde",
            "lat": 15.121729,
            "lng": -23.605082,
            "bz": 6,
            "sz": 5,
            "id": 102
        },
        {
            "n": "Republic of Serbia",
            "lat": 44.016521,
            "lng": 21.005859,
            "bz": 6,
            "sz": 5,
            "id": 103
        },
        {
            "n": "Albania",
            "lat": 41.153332,
            "lng": 20.168331,
            "bz": 6,
            "sz": 5,
            "id": 104
        },
        {
            "n": "Bulgaria",
            "lat": 42.733883,
            "lng": 25.485830,
            "bz": 6,
            "sz": 5,
            "id": 105
        },
        {
            "n": "Cyprus",
            "lat": 35.126413,
            "lng": 33.429859,
            "bz": 6,
            "sz": 5,
            "id": 106
        },
        {
            "n": "Lithuania",
            "lat": 55.169438,
            "lng": 23.881275,
            "bz": 6,
            "sz": 5,
            "id": 107
        },
        {
            "n": "Belarus",
            "lat": 53.709807,
            "lng": 27.953389,
            "bz": 6,
            "sz": 5,
            "id": 108
        },
        {
            "n": "Russian Federation",
            "lat": 62.715726,
            "lng": 97.057037,
            "bz": 3,
            "sz": 2,
            "id": 109
        },
        {
            "n": "Republic of Moldova",
            "lat": 47.411631,
            "lng": 28.369885,
            "bz": 6,
            "sz": 5,
            "id": 110
        },
        {
            "n": "Georgia",
            "lat": 42.204477,
            "lng": 44.907818,
            "bz": 6,
            "sz": 5,
            "id": 111
        },
        {
            "n": "Tajikistan",
            "lat": 38.861034,
            "lng": 71.276093,
            "bz": 6,
            "sz": 5,
            "id": 112
        },
        {
            "n": "Turkmenistan",
            "lat": 38.969719,
            "lng": 59.556278,
            "bz": 6,
            "sz": 5,
            "id": 113
        },
        {
            "n": "Lebanon",
            "lat": 33.854721,
            "lng": 35.862285,
            "bz": 6,
            "sz": 5,
            "id": 114
        },
        {
            "n": "Kuwait",
            "lat": 29.311660,
            "lng": 47.481766,
            "bz": 6,
            "sz": 5,
            "id": 115
        },
        {
            "n": "Iran，Islamic Republic of",
            "lat": 32.726026,
            "lng": 54.311527,
            "bz": 5,
            "sz": 5,
            "id": 116
        },
        {
            "n": "Afghanistan",
            "lat": 33.939110,
            "lng": 67.709953,
            "bz": 6,
            "sz": 5,
            "id": 117
        },
        {
            "n": "Qatar",
            "lat": 25.354826,
            "lng": 51.183884,
            "bz": 6,
            "sz": 5,
            "id": 118
        },
        {
            "n": "United Arab Emirates",
            "lat": 23.424076,
            "lng": 53.847818,
            "bz": 6,
            "sz": 5,
            "id": 119
        },
        {
            "n": "Maldives",
            "lat": 1.977247,
            "lng": 73.536103,
            "bz": 6,
            "sz": 5,
            "id": 120
        },
        {
            "n": "Mongolia",
            "lat": 46.862496,
            "lng": 103.846656,
            "bz": 5,
            "sz": 4,
            "id": 121
        },
        {
            "n": "Democratic People's Republic of Korea",
            "lat": 40.339852,
            "lng": 127.510093,
            "bz": 6,
            "sz": 5,
            "id": 122
        },
        {
            "n": "Lao People's Democratic Republic",
            "lat": 19.856270,
            "lng": 102.495496,
            "bz": 6,
            "sz": 5,
            "id": 123
        },
        {
            "n": "Algeria",
            "lat": 28.033886,
            "lng": 1.659626,
            "bz": 6,
            "sz": 5,
            "id": 124
        },
        {
            "n": "Tunisia",
            "lat": 33.886917,
            "lng": 9.537499,
            "bz": 6,
            "sz": 5,
            "id": 125
        },
        {
            "n": "Guinea",
            "lat": 9.945587,
            "lng": -9.696645,
            "bz": 6,
            "sz": 5,
            "id": 126
        },
        {
            "n": "Sierra Leone",
            "lat": 8.460555,
            "lng": -11.779889,
            "bz": 6,
            "sz": 5,
            "id": 127
        },
        {
            "n": "Djibouti",
            "lat": 11.825138,
            "lng": 42.590275,
            "bz": 6,
            "sz": 5,
            "id": 128
        },
        {
            "n": "Rwanda",
            "lat": -1.940278,
            "lng": 29.873888,
            "bz": 6,
            "sz": 5,
            "id": 129
        },
        {
            "n": "Gabon",
            "lat": -0.803689,
            "lng": 11.609444,
            "bz": 6,
            "sz": 5,
            "id": 130
        },
        {
            "n": "Angola",
            "lat": -11.202692,
            "lng": 17.873887,
            "bz": 6,
            "sz": 5,
            "id": 131
        },
        {
            "n": "Zimbabwe",
            "lat": -19.015438,
            "lng": 29.154857,
            "bz": 6,
            "sz": 5,
            "id": 132
        },
        {
            "n": "Cuba",
            "lat": 21.521757,
            "lng": -77.781167,
            "bz": 6,
            "sz": 5,
            "id": 133
        },
        {
            "n": "Dominican Republic",
            "lat": 18.735693,
            "lng": -70.162651,
            "bz": 6,
            "sz": 5,
            "id": 134
        },
        {
            "n": "Honduras",
            "lat": 15.199999,
            "lng": -86.241905,
            "bz": 6,
            "sz": 5,
            "id": 135
        },
        {
            "n": "Dominica",
            "lat": 15.414999,
            "lng": -61.370976,
            "bz": 6,
            "sz": 5,
            "id": 136
        },
        {
            "n": "Venezuela",
            "lat": 6.423750,
            "lng": -66.589730,
            "bz": 6,
            "sz": 5,
            "id": 137
        },
        {
            "n": "Brazil",
            "lat": -14.235004,
            "lng": -51.925280,
            "bz": 4,
            "sz": 3,
            "id": 138
        },
        {
            "n": "Ecuador",
            "lat": -1.831239,
            "lng": -78.183406,
            "bz": 6,
            "sz": 5,
            "id": 139
        },
        {
            "n": "Paraguay",
            "lat": -23.442503,
            "lng": -58.443832,
            "bz": 6,
            "sz": 5,
            "id": 140
        },
        {
            "n": "Solomon Islands",
            "lat": -9.645710,
            "lng": 160.156194,
            "bz": 6,
            "sz": 5,
            "id": 141
        },
        {
            "n": "New Caledonia",
            "lat": -20.904305,
            "lng": 165.618042,
            "bz": 6,
            "sz": 5,
            "id": 142
        },
        {
            "n": "Bangladesh",
            "lat": 23.684994,
            "lng": 90.356331,
            "bz": 6,
            "sz": 5,
            "id": 143
        },
        {
            "n": "Botswana",
            "lat": -22.328474,
            "lng": 24.684866,
            "bz": 6,
            "sz": 5,
            "id": 144
        },
        {
            "n": "Burkina Faso",
            "lat": 12.238333,
            "lng": -1.561593,
            "bz": 6,
            "sz": 5,
            "id": 145
        },
        {
            "n": "Burundi",
            "lat": -3.373056,
            "lng": 29.918886,
            "bz": 6,
            "sz": 5,
            "id": 146
        },
        {
            "n": "Cambodia",
            "lat": 12.565679,
            "lng": 104.990963,
            "bz": 6,
            "sz": 5,
            "id": 147
        },
        {
            "n": "Central African Republic",
            "lat": 6.611111,
            "lng": 20.939444,
            "bz": 6,
            "sz": 5,
            "id": 148
        },
        {
            "n": "Congo",
            "lat": -0.228021,
            "lng": 15.827659,
            "bz": 6,
            "sz": 5,
            "id": 149
        },
        {
            "n": "Cook Islands",
            "lat": -21.236736,
            "lng": -159.777671,
            "bz": 6,
            "sz": 5,
            "id": 150
        },
        {
            "n": "Cote d'Ivoire",
            "lat": 7.539989,
            "lng": -5.547080,
            "bz": 6,
            "sz": 5,
            "id": 151
        },
        {
            "n": "Democratic Republic of the Congo",
            "lat": -4.038333,
            "lng": 21.758664,
            "bz": 6,
            "sz": 5,
            "id": 152
        },
        {
            "n": "Ghana",
            "lat": 7.946527,
            "lng": -1.023194,
            "bz": 6,
            "sz": 5,
            "id": 153
        },
        {
            "n": "Guatemala",
            "lat": 15.783471,
            "lng": -90.230759,
            "bz": 6,
            "sz": 5,
            "id": 154
        },
        {
            "n": "Haiti",
            "lat": 18.971187,
            "lng": -72.285215,
            "bz": 6,
            "sz": 5,
            "id": 155
        },
        {
            "n": "Iraq",
            "lat": 33.223191,
            "lng": 43.679291,
            "bz": 6,
            "sz": 5,
            "id": 156
        },
        {
            "n": "Lesotho",
            "lat": -29.609988,
            "lng": 28.233608,
            "bz": 6,
            "sz": 5,
            "id": 157
        },
        {
            "n": "Liberia",
            "lat": 6.428055,
            "lng": -9.429499,
            "bz": 6,
            "sz": 5,
            "id": 158
        },
        {
            "n": "Libya",
            "lat": 26.335100,
            "lng": 17.228331,
            "bz": 6,
            "sz": 5,
            "id": 159
        },
        {
            "n": "Mauritania",
            "lat": 21.007890,
            "lng": -10.940835,
            "bz": 6,
            "sz": 5,
            "id": 160
        },
        {
            "n": "Micronesia，Federated States of",
            "lat": 6.581986,
            "lng": 153.337141,
            "bz": 5,
            "sz": 5,
            "id": 161
        },
        {
            "n": "Monaco",
            "lat": 43.738418,
            "lng": 7.424616,
            "bz": 6,
            "sz": 5,
            "id": 162
        },
        {
            "n": "Namibia",
            "lat": -22.957640,
            "lng": 18.490410,
            "bz": 6,
            "sz": 5,
            "id": 163
        },
        {
            "n": "Niue",
            "lat": -19.054445,
            "lng": -169.867233,
            "bz": 6,
            "sz": 5,
            "id": 164
        },
        {
            "n": "Republic of Yemen",
            "lat": 15.552727,
            "lng": 48.516388,
            "bz": 6,
            "sz": 5,
            "id": 165
        },
        {
            "n": "Saint Lucia",
            "lat": 13.909444,
            "lng": -60.978893,
            "bz": 6,
            "sz": 5,
            "id": 166
        },
        {
            "n": "Somalia",
            "lat": 5.152149,
            "lng": 46.199616,
            "bz": 6,
            "sz": 5,
            "id": 167
        },
        {
            "n": "Eswatini",
            "lat": -26.522503,
            "lng": 31.465866,
            "bz": 6,
            "sz": 5,
            "id": 168
        },
        {
            "n": "Tonga",
            "lat": -21.178986,
            "lng": -175.198242,
            "bz": 6,
            "sz": 5,
            "id": 169
        },
        {
            "n": "Uganda",
            "lat": 1.373333,
            "lng": 32.290275,
            "bz": 6,
            "sz": 5,
            "id": 170
        },
        {
            "n": "Vanuatu",
            "lat": -15.376706,
            "lng": 166.959158,
            "bz": 6,
            "sz": 5,
            "id": 171
        },
        {
            "n": "Benin",
            "lat": 9.307690,
            "lng": 2.315834,
            "bz": 6,
            "sz": 5,
            "id": 172
        },
        {
            "n": "Costa Rica",
            "lat": 9.748917,
            "lng": -83.753428,
            "bz": 6,
            "sz": 5,
            "id": 173
        },
        {
            "n": "Czech Republic",
            "lat": 49.817492,
            "lng": 15.472962,
            "bz": 6,
            "sz": 5,
            "id": 174
        },
        {
            "n": "Denmark",
            "lat": 56.263920,
            "lng": 9.501785,
            "bz": 6,
            "sz": 5,
            "id": 175
        },
        {
            "n": "El Salvador",
            "lat": 13.794185,
            "lng": -88.896530,
            "bz": 6,
            "sz": 5,
            "id": 176
        },
        {
            "n": "French Polynesia",
            "lat": -20.585606,
            "lng": -149.121198,
            "bz": 5,
            "sz": 5,
            "id": 177
        },
        {
            "n": "Italy",
            "lat": 41.871940,
            "lng": 12.567380,
            "bz": 6,
            "sz": 5,
            "id": 178
        },
        {
            "n": "Kyrgyzstan",
            "lat": 41.204380,
            "lng": 74.766098,
            "bz": 6,
            "sz": 5,
            "id": 179
        },
        {
            "n": "Mauritius",
            "lat": -14.948676,
            "lng": 57.002835,
            "bz": 5,
            "sz": 5,
            "id": 180
        },
        {
            "n": "Mexico",
            "lat": 23.634501,
            "lng": -102.552784,
            "bz": 5,
            "sz": 4,
            "id": 181
        },
        {
            "n": "Myanmar",
            "lat": 21.913965,
            "lng": 95.956223,
            "bz": 6,
            "sz": 5,
            "id": 182
        },
        {
            "n": "Curacao and Sint Maarten",
            "lat": 12.111717,
            "lng": -68.936028,
            "bz": 6,
            "sz": 5,
            "id": 183
        },
        {
            "n": "Nicaragua",
            "lat": 12.865416,
            "lng": -85.207229,
            "bz": 6,
            "sz": 5,
            "id": 184
        },
        {
            "n": "Romania",
            "lat": 45.943161,
            "lng": 24.966760,
            "bz": 6,
            "sz": 5,
            "id": 185
        },
        {
            "n": "Samoa",
            "lat": -13.759029,
            "lng": -172.104629,
            "bz": 6,
            "sz": 5,
            "id": 186
        },
        {
            "n": "Australia",
            "lat": -25.274398,
            "lng": 133.775136,
            "bz": 4,
            "sz": 3,
            "id": 187
        },
        {
            "n": "Bhutan",
            "lat": 27.514162,
            "lng": 90.433601,
            "bz": 6,
            "sz": 5,
            "id": 188
        },
        {
            "n": "Kiribati",
            "lat": 1.866858,
            "lng": -157.359920,
            "bz": 6,
            "sz": 5,
            "id": 189
        },
        {
            "n": "Montenegro",
            "lat": 42.708678,
            "lng": 19.374390,
            "bz": 6,
            "sz": 5,
            "id": 190
        },
        {
            "n": "Democratic Republic of Timor-Leste",
            "lat": -8.874217,
            "lng": 125.727539,
            "bz": 6,
            "sz": 5,
            "id": 191
        },
        {
            "n": "Tuvalu",
            "lat": -10.728072,
            "lng": 179.472656,
            "bz": 6,
            "sz": 5,
            "id": 192
        },
        {
            "n": "South Sudan",
            "lat": 7.963092,
            "lng": 30.158930,
            "bz": 6,
            "sz": 5,
            "id": 193
        },
        {
            "n": "Greenland",
            "lat": 66.010555,
            "lng": -44.427688,
            "bz": 4,
            "sz": 5,
            "id": 194
        },
        {
            "n": "USA - Hawaii",
            "lat": 21.37124,
            "lng": -156.401368,
            "bz": 5,
            "sz": 5,
            "id": 195
        },
        {
            "n": "Pacific Islands",
            "lat": 12.760910,
            "lng": 156.181377,
            "bz": 4,
            "sz": 5,
            "id": 196
        },
        {
            "n": "UK - Bermuda",
            "lat": 32.307800,
            "lng": -64.750500,
            "bz": 7,
            "sz": 5,
            "id": 197
        },
        {
            "n": "Spain - Canary Islands",
            "lat": 28.291563,
            "lng": -16.629130,
            "bz": 7,
            "sz": 5,
            "id": 198
        },
        {
            "n": "Portugal - Madeira",
            "lat": 32.760707,
            "lng": -16.959472,
            "bz": 7,
            "sz": 5,
            "id": 199
        },
        {
            "n": "France - Martinique",
            "lat": 14.641528,
            "lng": -61.024173,
            "bz": 7,
            "sz": 5,
            "id": 200
        }
    ]
};

var wxicon_mapping = {
    "0000": ["00", ""],
    "2402": ["01", "Fine"],
    "2403": ["01", "Fine"],
    "2501": ["01", "Fine"],
    "2502": ["01", "Fine"],
    "2101": ["02", "Bright"],
    "2102": ["02", "Bright"],
    "2103": ["02", "Bright"],
    "2201": ["02", "Bright"],
    "2202": ["02", "Bright"],
    "2203": ["02", "Bright"],
    "2204": ["02", "Bright"],
    "2401": ["02", "Bright"],
    "0901": ["03", "Showers"],
    "0902": ["03", "Showers"],
    "0903": ["03", "Showers"],
    "1001": ["03", "Showers"],
    "1002": ["03", "Showers"],
    "1101": ["03", "Showers"],
    "1201": ["03", "Showers"],
    "2301": ["04", "Cloudy"],
    "2302": ["04", "Cloudy"],
    "2001": ["05", "Overcast"],
    "0201": ["06", "Thunderstorms"],
    "0202": ["06", "Thunderstorms"],
    "0203": ["06", "Thunderstorms"],
    "0204": ["06", "Thunderstorms"],
    "1501": ["07", "Drizzle"],
    "1502": ["07", "Drizzle"],
    "1301": ["08", "Rain"],
    "1401": ["08", "Rain"],
    "0801": ["08", "Rain"],
    "2601": ["09", "Windy"],
    "2602": ["09", "Windy"],
    "2603": ["09", "Windy"],
    "2604": ["09", "Windy"],
    "2801": ["10", "Dry"],
    "2701": ["11", "Wet"],
    "2702": ["11", "Wet"],
    "1601": ["12", "Fog"],
    "1701": ["13", "Mist"],
    "1901": ["14", "Haze"],
    "3101": ["15", "Hot"],
    "3301": ["15", "Hot"],
    "2901": ["16", "Cold"],
    "3001": ["16", "Cold"],
    "3201": ["16", "Cold"],
    "3202": ["16", "Cold"],
    "3401": ["16", "Cold"],
    "1801": ["17", "Smoke"],
    "0401": ["18", "Snow"],
    "0402": ["18", "Snow"],
    "0403": ["18", "Snow"],
    "0404": ["18", "Snow"],
    "0501": ["18", "Snow"],
    "0502": ["18", "Snow"],
    "0601": ["18", "Snow"],
    "0602": ["18", "Snow"],
    "0603": ["18", "Snow"],
    "0701": ["18", "Snow"],
    "0301": ["19", "Hail"],
    "0101": ["20", "Sandstorm"],
    "0102": ["20", "Sandstorm"],
    "0103": ["20", "Sandstorm"],
    "0104": ["20", "Sandstorm"]
};
var wxIcon = {
    "info": [{
            "img": "01",
            "desc": "Fine"
        },
        {
            "img": "02",
            "desc": "Bright"
        },
        {
            "img": "03",
            "desc": "Showers"
        },
        {
            "img": "04",
            "desc": "Cloudy"
        },
        {
            "img": "05",
            "desc": "Overcast"
        },
        {
            "img": "06",
            "desc": "Thunderstorms"
        },
        {
            "img": "07",
            "desc": "Drizzle"
        },
        {
            "img": "08",
            "desc": "Rain"
        },
        {
            "img": "09",
            "desc": "Windy"
        },
        {
            "img": "10",
            "desc": "Dry"
        },
        {
            "img": "11",
            "desc": "Wet"
        },
        {
            "img": "12",
            "desc": "Fog"
        },
        {
            "img": "13",
            "desc": "Mist"
        },
        {
            "img": "14",
            "desc": "Haze"
        },
        {
            "img": "15",
            "desc": "Hot"
        },
        {
            "img": "16",
            "desc": "Cold"
        },
        {
            "img": "17",
            "desc": "Smoke"
        },
        {
            "img": "18",
            "desc": "Snow"
        },
        {
            "img": "19",
            "desc": "Hail"
        },
        {
            "img": "20",
            "desc": "Sandstorm"
        }
    ]
};
var region_location = [{
        "name": "World Weather Information",
        "ico": "globe",
        "lat": 35.324687499997914,
        "lng": 26.52148302630959
    }, /*Globe*/
    {
        "name": "Africa",
        "ico": "wwi_africa_s",
        "lat": -0.703107,
        "lng": 29.003906
    }, /*Africa*/
    {
        "name": "Asia",
        "ico": "wwi_asia_s",
        "lat": 37.71859,
        "lng": 100.371094
    }, /*Asia*/
    {
        "name": "South America",
        "ico": "wwi_cs_america_s",
        "lat": -21.616579,
        "lng": -56.074219
    }, /*South America*/
    {
        "name": "North & Central America",
        "ico": "wwi_n_america_s",
        "lat": 35.417316,
        "lng": -91.212658
    }, /*North and Central America*/
    {
        "name": "South West Pacific",
        "ico": "wwi_au_nz_s",
        "lat": -19.642587,
        "lng": 149.062499
    }, /*South West Pacific*/
    {
        "name": "Europe",
        "ico": "wwi_europe_s",
        "lat": 54.572062,
        "lng": 15.292969
    } /*Europe*/
];
var upStep = [700, 778, 1141, 1238, 2895, 2959, 2961, 3117]; //2811, 2904, 2915

var wxicon_info_shown = false,
    chosen_box_shown = false,
    climate_na_val = false;;
var favCityList;
var json_name = [],
    favCityJSON = [];
var place_markers_uc, place_markers_e;
var hk_uc;
var hk_e;
var qsDataSource = [],
    default_search_text = 'Enter City or Place',
    searchKey, searchValue = '';
var timer = null,
    t1 = null,
    t2 = null;
var map = null,
    layer, selectControl, map_container, wxico_highlight_cityid, selectedFeature, selectedFeatureHK;;
var localLang = 'en';

function displayWeatherIcons() {
    if ($('.region_button_box ul').find('.r_active').length == 0) {
        $('.my_fav_list').css('display', 'none');
    } else {
        $('.place_list_box').css('display', 'none');
    }
    if (!wxicon_info_shown) {
        for (var i = 0; i < wxIcon.info.length; i++) {
            var htm_ary = ['<tr>'];
            htm_ary.push('<td><img src="images/pic' + wxIcon.info[i].img + '.png" alt=""></td><td>' + wxIcon.info[i].desc + '</td>');
            i++;
            htm_ary.push('<td><img src="images/pic' + wxIcon.info[i].img + '.png" alt=""></td><td>' + wxIcon.info[i].desc + '</td>');
            htm_ary.push('</tr>');
            $('.tbl_wxicons').append(htm_ary.join(""));
        }
    }
    $('.wxicons_box').css('display', 'block');
    wxicon_info_shown = true;
}

function closeWxIcons() {
    $('.wxicons_box').css('display', 'none');
    if ($('.region_button_box ul').find('.r_active').length > 0) {
        $('.place_list_box').css('display', 'block');
    } else {
        $('.my_fav_list').css('display', 'block');
    }
}
//new function 20200108
function calHeightChartMapDiv(recal) {
    var chart_height = $(".div_chart_map").outerHeight();
    var left_chart_height = $(".left_chart").outerHeight();

    if (recal == 1) {
        chart_height = chart_height - 60;
    }

    var set_height;
    set_height = 0;
    $(".div_chart_map").css({
        'height': "0px"
    });
    $(".div_chart_map").css({
        'margin-bottom': "0px"
    });

    if (GetURLParameter('cityID')) {
        set_height = chart_height + 60;
        $(".div_chart_map").css({
            'height': set_height + "px"
        });
        $(".div_chart_map").css({
            'margin-bottom': "10px"
        });
    }

    //20200116
    var html_width = $(document).width();
    //console.log(html_width);

    if (html_width <= 979) {
        $(".div_chart_map").css("height", "auto");
        console.log("chart_height=" + chart_height);
        if (chart_height < 70) {

            $(".div_chart_map").css({
                'height': "0px"
            });
            $(".div_chart_map").css({
                'scrollbar-width': "none"
            });

        }

    }

    //eof 20200116

    if (left_chart_height == 0) {
        $(".left_chart").css({
            'width': "auto"
        });
        $(".right_map").css({
            'width': "100%"
        });

    }

}


function setupRightCol() {
    var htm_ary = [];
    var orgName = favCityJSON[0].orgName;
    var orgURL = favCityJSON[0].orgURL;
    var tourName = favCityJSON[0].tourName;
    var tourURL = favCityJSON[0].tourURL;
    htm_ary.push('<div class="sns_box">');
    htm_ary.push('	<span class="sns_label">Share:</span>');
    htm_ary.push('	<div id="social_network_div" class="hko_social_network" pageTitle="' + favCityJSON[0].name.substring(0, favCityJSON[0].name.indexOf(",")) + ' Weather Information" sharePath="">');
    htm_ary.push('		<script type="text/javascript" src="../../../common/social_network/js/files/share_e.js" charset="UTF-8"></scri' + 'pt>');
    htm_ary.push('	</div>');
    htm_ary.push('	<div style="clear: both;"></div>');
    htm_ary.push('</div>');
    htm_ary.push('<div class="info_box">');
    //htm_ary.push('	<table cellpadding="4" cellspacing="0" border="0">');
    //htm_ary.push('	<tr>');
    //htm_ary.push('		<td valign="top">');
    htm_ary.push('<strong>Local Date/Time:</strong><br><span class="clt" id="tz' + favCityJSON[0].id + '"></span>');

    var getname = (orgName) ? orgName : $.trim(favCityJSON[0].name.substr(favCityJSON[0].name.lastIndexOf(",") + 1));
    var word = (orgName) ? "the " : "";
    var nmhs = (orgURL) ? '<a style="color: #0000FF;" href="http://' + orgURL + '" target="_blank" rel="noopener noreferrer">' + getname + '</a>' : getname;
    nmhs = nmhs.replace("Pacific Islands", "United States");
    nmhs = nmhs.replace("USA - Hawaii", "United States");
    htm_ary.push('<br><strong>Source:</strong><br><span class="orgurl">Information provided by ' + word + nmhs.replace("，", ", ") + '</span>');
    //if(tourName && tourURL) htm_ary.push('<br><strong>Tourism Information:</strong><br><a class="orgurl" href="http://' + tourURL + '" target="_blank" rel="noopener noreferrer">' + tourName + '</a>');
    htm_ary.push('		</td>');
    htm_ary.push('	</tr>');
    htm_ary.push('	</table>');
    htm_ary.push('</div>');
    $("#right_col").append(htm_ary.join(""));
    clearTimeout(timer);
    loadCurrentLocalTime();

    $("button.add").click(function() {
        addToFavoriteList(favCityJSON[0].id.toString());
        $("button.add").css({
            'display': 'none'
        });
        $(".msg_box").html(favCityJSON[0].name + ' has been added to "My Favourite Locations".');
        $('.msg_box').fadeIn("normal");
    });
    if (isExistInCookie('wwi_fav_list', '|', favCityJSON[0].id.toString())) {
        $("button.add").css({
            'display': 'none'
        });
    }
    if (document.cookie == '') $("button.add").css({
        'display': 'none'
    });

    t1 = setTimeout(function() {
        clearTimeout(t1);
        triggerMap('s_osmap_canvas', favCityJSON[0].id, 'getPlaceList');
        getPlaceList();
    }, 500);
}

function dateCompare(in_date) {
    var today = new Date();
    var fcdate = new Date();
    var fcdate_y = parseInt('20' + in_date.toString().substr(0, 2));
    var fcdate_m = parseInt(in_date.toString().substr(2, 2)) - 1;
    var fcdate_d = parseInt(in_date.toString().substr(4, 2));
    fcdate.setFullYear(fcdate_y, fcdate_m, fcdate_d);
    return (fcdate < today && today.getTime() !== fcdate.getTime());
}

function setupForecastBox() {
    var forecastlist = $('#forecast_list');
    forecastlist.empty();
    var hvfc = hvWeatherForecast(favCityJSON[0], 'city');
    if (!hvfc) {
        $('button.add').css({
            'display': 'none'
        });
        forecastlist.append('<p class="no_forecast_info">Weather forecast information is not available at this moment.</p>');
        $('.forecast_box').css({
            'display': 'none'
        });
    } else {
        if (favCityJSON[0].forecast.issue != null) {
            $('#issue_date_time').html('Updated on ' + moment(dateTimeRewrite(favCityJSON[0].forecast.issue)).lang(localLang).format('llll') + ' (Local Time)');

            $('.forecast_box').css({
                'display': 'block'
            });
        }
        var htm_ary = [];

        htm_ary.push('<ul  class="ui-sortable">');
        htm_ary.push(' <li id="" class="ui-sortable-handle" style="opacity: 1;">');
        htm_ary.push(' <div class="favGroup">');
        var rename = favCityJSON[0].name.substr(0, favCityJSON[0].name.lastIndexOf(","));

        if (upStep.indexOf(favCityJSON[0].id) > -1) {
            //var rename = (favCityJSON[0].id != 778 && favCityJSON[0].id != 1141) ? $.trim(favCityJSON[0].name.substr(0, favCityJSON[0].name.lastIndexOf(","))) : favCityJSON[0].name;
            rename = rename.substr(0, rename.lastIndexOf(","));
        }

        //htm_ary.push('	<div class="favCityName">' + rename + '</div>');
        htm_ary.push('<div class="myFavList carousel">');
        htm_ary.push('<ul class="slides">');

        var fcday = favCityJSON[0].forecast.days;
        for (var j = 0; j < fcday.length; j++) {

            /*Check the forecast date expired or not
            if (dateCompare(fcday[j].date)) {
            	fcday.shift(); j--;	continue;
            }
            Check the forecast date expired or not*/

            var style = (j == 0) ? "forecast_column_first" : "";
            if (j == 1) style = "forecast_column_middle";
            if (j == 2) style = "forecast_column_middle1";
            //	htm_ary.push('		<div class="forecast_column ' + style + '">');
            var hide_img = (fcday[j].wxico == '0000') ? ' style="display: none;"' : '';
            /*if(wxicon_mapping[fcday[j].wxico]) {
            	htm_ary.push('			<div class="forecast_wxicon"'+hide_img+'><img class="wwi_wxico" src="./images/pic' + ((fcday[j].wxico != null) ? wxicon_mapping[fcday[j].wxico][0] : "") + '.png"  border="0" alt="" title="' + ((fcday[j].wxico != null) ? wxicon_mapping[fcday[j].wxico][1] : "") + '"></div>');
            } else {
            	htm_ary.push('			<div class="forecast_wxicon"'+hide_img+'></div>');
            }
            htm_ary.push('			<div class="forecast_infobox">');
            htm_ary.push('				<div class="forecast_date">' + moment(dateTimeRewrite(fcday[j].date),'YYYYMMDD').format('D MMM [(]ddd[)]') + '</div>');
            if(wxicon_mapping[fcday[j].wxico]) {
            	htm_ary.push('				<div class="forecast_desc">' + ((fcday[j].wxico != null && fcday[j].wxico != '0000') ? wxicon_mapping[fcday[j].wxico][1] : " ") + '</div>');
            } else {
            	htm_ary.push('				<div class="forecast_desc"> </div>');
            }
            htm_ary.push('				<div class="forecast_temp"><span class="wwi_mint">' + ((fcday[j].mint) ? fcday[j].mint + "°C" : "-") + '</span> | <span class="wwi_maxt">' + ((fcday[j].maxt) ? fcday[j].maxt + "°C" : "-") + '</span></div>');
            htm_ary.push('				<div class="clear"></div>');
            htm_ary.push('			</div>');
            htm_ary.push('		</div>');*/

            htm_ary.push('<li>');
            htm_ary.push('<div class="adw_day">');
            // htm_ary.push('<div>'+moment(dateTimeRewrite(fcday[j].date),'YYYYMMDD').format('MMM Do  <br>[(]dddd[)]')+'</div>');

            htm_ary.push('<div  class="fc_date" style="width:100%;">' + moment(dateTimeRewrite(fcday[j].date), 'YYYYMMDD').format(' D MMM (ddd)') + '</div>');


			htm_ary.push(' <div class="fc_wxicon"><span><img style="width:4em;" class="lazy" src=".../../../../../tc/wxinfo/worldwx/images/pic' + ((fcday[j].wxico != null) ? wxicon_mapping[fcday[j].wxico][0] : "") + '.png" alt="' + ((fcday[j].wxico != null) ? wxicon_mapping[fcday[j].wxico][1] : "") + '" title="' + ((fcday[j].wxico != null) ? wxicon_mapping[fcday[j].wxico][1] : "") + '"></span></div>');

            htm_ary.push('<div class="adw_temp"><span class="lowest">' + ((fcday[j].mint) ? fcday[j].mint + "°C" : "-") + '</span><br><span class="highest">' + ((fcday[j].maxt) ? fcday[j].maxt + "°C" : "-") + '</span></div>');

            htm_ary.push('<div class="adw_detail">' + ((fcday[j].wxico != null) ? wxicon_mapping[fcday[j].wxico][1] : "" + '</div>'));

            htm_ary.push('</div>');
            htm_ary.push('</li>');

            //$('image').attr("xlink:href", "./images/wxicon/highlight/"+((fcday[j].wxico != null) ? wxicon_mapping[fcday[j].wxico][0] : "")+".png");
        }
        for (var k = fcday.length; k < 4; k++) {
            if (k == 3) {
                //htm_ary.push('		<div class="forecast_column_last">');
                //if(fcday.length == 3) {
                //	htm_ary.push('			<a class="more_forecast_button" href="https://worldweather.wmo.int/en/city.html?cityId=' + favCityJSON[0].wwis + '" target="_blank" rel="noopener noreferrer">More Forecast</a>');
                //}
                //htm_ary.push('		</div>');
                htm_ary.push('<li>');
                htm_ary.push('<div class="adw_more">');
                htm_ary.push('			<a class="" href="https://worldweather.wmo.int/en/city.html?cityId=' + favCityJSON[0].wwis + '" target="_blank" rel="noopener noreferrer"><span>More Forecast</span></a>');
                htm_ary.push('</div>');
                htm_ary.push('</li>');
            } else {
                if (k == 1) style = "forecast_column_middle";
                if (k == 2) style = "forecast_column_middle1";
                /*	htm_ary.push('		<div class="forecast_column ' + style + '">');
                	htm_ary.push('		</div>');*/
            }
        }
        htm_ary.push('	</ul>');
        htm_ary.push('	</div>');
        htm_ary.push('	</div>');
        htm_ary.push('	</li>');
        htm_ary.push('	</ul>');


        forecastlist.append(htm_ary.join(""));
    }
}

function setupClimateBox() {
    var hvcm = hvClimate(favCityJSON[0]);
    console.log(hvcm, favCityJSON[0])
    if (hvcm) {
        //$('#loc').html(favCityJSON[0].map.lat.toFixed(1) + " N, " + favCityJSON[0].map.lng.toFixed(1) + " E, altitude: " + favCityJSON[0].map.alt + " m");
        $("#btn_view").click(function() {
            if ($('#tableview').is(':visible')) {
                $('#tableview').css({
                    'display': 'none'
                });
                $('#chartview').css({
                    'display': 'block'
                });
                $('#btn_view').text('Table View');
            } else {
                $('#chartview').css({
                    'display': 'none'
                });
                $('#tableview').css({
                    'display': 'block'
                });
                $('#btn_view').text('Chart View');
            }
        }).mouseover(function() {
            $(this).css({
                'background-color': '#25CA5A'
            });
            $(this).css({
                'text-shadow': '1px 1px 1px #483D8B'
            });
        }).mouseout(function() {
            $(this).css({
                'background-color': '#4798C2'
            });
            $(this).css({
                'text-shadow': '1px 1px 1px #4682B4'
            });
        }).focus(function() {
            $(this).css({
                'background-color': '#25CA5A'
            });
            $(this).css({
                'text-shadow': '1px 1px 1px #483D8B'
            });
        }).blur(function() {
            $(this).css({
                'background-color': '#4798C2'
            });
            $(this).css({
                'text-shadow': '1px 1px 1px #4682B4'
            });
        });
    } else {
        $('.climate_box .heading_right').empty();
        $('#climate_content').empty();
        $('#climate_content').append('<div class="no_climate_info">Climatological information currently not available.</div>');
        $('.climate_box').css('display', 'none');
    }
    return hvcm;
}

function setupClimateBox_chartview() {
    if (favCityJSON[0].climate.mmint || favCityJSON[0].climate.mmaxt || favCityJSON[0].climate.rfamt) {
        $.ajax({
            method: "GET",
            url: "../../../js/highcharts_v3.0.10.js",
            dataType: "script",
            cache: true,
            success: function(data) {
                //$.getScript("/js/highcharts_v3.0.10.js", function( data, textStatus, jqxhr ) {
                var primary_yAxis = {
                    /* Primary yAxis*/
                    labels: {
                        format: '{value}',
                        style: {
                            color: '#000000'
                        }
                    },
                    title: {
                        text: 'Temperature (°C)',
                        style: {
                            color: '#000000',
                            fontSize: '120%',
                            fontWeight: 'bold',
                            fontFamily: 'Verdana'
                        }
                    }
                };
                var secondary_yAxis = {
                    /* Secondary yAxis*/
                    labels: {
                        format: '{value}',
                        style: {
                            color: '#000000'
                        }
                    },
                    title: {
                        text: 'Rainfall (mm)',
                        style: {
                            color: '#000000',
                            fontSize: '120%',
                            fontWeight: 'bold',
                            fontFamily: 'Verdana'
                        }
                    },
                    opposite: true
                };

                var mean_total_rf_or_ppt = {
                    name: 'Rainfall Amount',
                    color: '#199998',
                    type: 'column',
                    yAxis: 0,
                    data: [null, null, null, null, null, null, null, null, null, null, null, null],
                    tooltip: {
                        valueSuffix: ' mm'
                    }
                };
                var maximum_temperature = {
                    name: 'Mean Max. Temperature',
                    color: '#D70000',
                    type: 'spline',
                    data: [null, null, null, null, null, null, null, null, null, null, null, null],
                    tooltip: {
                        valueSuffix: '°C'
                    }
                };
                var minimum_temperature = {
                    name: 'Mean Min. Temperature',
                    color: '#000090',
                    type: 'spline',
                    data: [null, null, null, null, null, null, null, null, null, null, null, null],
                    tooltip: {
                        valueSuffix: '°C'
                    }
                };
                var mean_temperature = {
                    name: 'Mean Temperature',
                    color: '#990000',
                    type: 'spline',
                    data: [null, null, null, null, null, null, null, null, null, null, null, null],
                    tooltip: {
                        valueSuffix: '°C'
                    }
                };

                var prepareChartData = {
                    chart: {
                        renderTo: 'climate_container',
                        zoomType: 'xy',
                        backgroundColor: {
                            linearGradient: {
                                x1: 0,
                                y1: 0,
                                x2: 0,
                                y2: 0
                            },
                            stops: [
                                [0, 'rgb(255, 255, 255)'],
                                [1, 'rgb(255, 255, 255)']
                            ]
                        },
                        borderRadius: 0,
                        style: {
                            fontFamily: 'Verdana'
                        },
                        events: {
                            load: function(event) {
                                //this.setSize($('.forecast_box .ui-sortable').width());
                                console.log($('.climate_box').width() - 40);
                                this.setSize($('.climate_box').width() - 40);
                                this.hasUserSize = false;
                                this.reflow();
                            }

                        }
                    },
                    title: {
                        text: '',
                        style: {
                            fontSize: '130%',
                            fontFamily: 'Verdana'
                        }
                    },
                    subtitle: {
                        text: '30-year period',
                        style: {
                            fontSize: '110%',
                            fontFamily: 'Verdana'
                        }
                    },
                    xAxis: [{
                        categories: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun',
                            'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'
                        ],
                        title: {
                            text: 'Month',
                            style: {
                                fontWeight: 'bold',
                                fontFamily: 'Verdana',
                                color: '#000000'
                            }
                        }
                    }],
                    credits: {
                        enabled: false,
                    },
                    yAxis: [],
                    tooltip: {
                        formatter: function() {
                            var s = '<b>' + this.x + '</b><br/>';
                            $.each(this.points, function() {
                                s += '<span style="color:' + this.series.color + '">' + this.series.name + '</span>: <b>' + Highcharts.numberFormat(this.point.y, 1) + '</b><br/>';
                            });
                            return s;
                        },
                        shared: true,
                        style: {
                            fontWeight: 'bold'
                        }
                    },
                    legend: {
                        borderWidth: 1
                    },
                    series: []
                };

                var yAxisOffset = 0;
                var hvT = false;
                var hvR = false;
                if ((favCityJSON[0].climate.mmint || favCityJSON[0].climate.mmaxt) || favCityJSON[0].climate.mt) {
                    prepareChartData.yAxis[yAxisOffset++] = primary_yAxis;
                    mean_total_rf_or_ppt.yAxis = 1;
                    hvT = true;
                }
                var seriesOffset = 0;
                if (favCityJSON[0].climate.rfamt) {
                    prepareChartData.yAxis[yAxisOffset++] = secondary_yAxis;
                    prepareChartData.series[seriesOffset++] = mean_total_rf_or_ppt;
                    hvR = true;
                }
                if (favCityJSON[0].climate.mmint || favCityJSON[0].climate.mmaxt) {
                    if (favCityJSON[0].climate.mmaxt) prepareChartData.series[seriesOffset++] = maximum_temperature;
                    if (favCityJSON[0].climate.mmint) prepareChartData.series[seriesOffset++] = minimum_temperature;
                } else {
                    if (favCityJSON[0].climate.mt) {
                        prepareChartData.series[seriesOffset++] = mean_temperature;
                    }
                }

                var chart_heading = '';
                if (hvT && hvR) {
                    chart_heading = 'Monthly Average Temperature and Rainfall';
                }
                if (hvR && !hvT) {
                    chart_heading = 'Monthly Average Rainfall';
                }
                if (hvT && !hvR) {
                    chart_heading = 'Monthly Average Temperature';
                }
                prepareChartData.title.text = chart_heading.replace(/\[#City Name#\]/g, favCityJSON[0].name);

                var offset = 0;
                if (favCityJSON[0].climate.rfamt != null) {
                    prepareChartData.series[offset].data = favCityJSON[0].climate.rfamt.data;
                    offset++;
                }
                if (favCityJSON[0].climate.mmint || favCityJSON[0].climate.mmaxt) {
                    if (favCityJSON[0].climate.mmaxt) prepareChartData.series[offset++].data = favCityJSON[0].climate.mmaxt.data;
                    if (favCityJSON[0].climate.mmint) prepareChartData.series[offset++].data = favCityJSON[0].climate.mmint.data;
                } else {
                    if (favCityJSON[0].climate.mt) {
                        prepareChartData.series[offset++].data = favCityJSON[0].climate.mt.data;
                    }
                }

                var chart = new Highcharts.Chart(prepareChartData);

                //});
            },
            error: function(XMLHttpRequest, textStatus, errorThrown) {
                alert("Status: " + textStatus);
                alert("Error: " + errorThrown);
            }
        });
    } else {
        $('#btn_view').click();
        $('#btn_view').remove();
    }
}

function setupClimateBox_tableview() {
    var climatelist = $('#climate_list');
    if (favCityJSON[0].climate.mmaxt != null) {
        var mmaxt = '';
        mmaxt += '<tr bgColor="#EEFFFF">';
        mmaxt += '	<td class="left">Mean Maximum Temperature<br><span style="font-weight: normal;">(deg. C)</span></td>';
        mmaxt += '	<td class="period">' + favCityJSON[0].climate.mmaxt.byr.toString().replace(/^[0]{1}$/g, "") + '-' + favCityJSON[0].climate.mmaxt.eyr.toString().replace(/^[0]{1}$/g, "") + '</td>';
        for (var m = 0; m < favCityJSON[0].climate.mmaxt.data.length; m++) {
            mmaxt += '	<td class="right">' + ((favCityJSON[0].climate.mmaxt.data[m]) ? favCityJSON[0].climate.mmaxt.data[m].toFixed(1) : hvNAval(favCityJSON[0].climate.mmaxt.data[m])) + '</td>';
        }
        mmaxt += '</tr>';
        climatelist.append(mmaxt);
    }
    if (favCityJSON[0].climate.mt != null) {
        var mt = '';
        mt += '<tr bgColor="#EEFFFF">';
        mt += '	<td class="left">Mean Temperature<br><span style="font-weight: normal;">(deg. C)</span></td>';
        mt += '	<td class="period">' + favCityJSON[0].climate.mt.byr.toString().replace(/^[0]{1}$/g, "") + '-' + favCityJSON[0].climate.mt.eyr.toString().replace(/^[0]{1}$/g, "") + '</td>';
        for (var m = 0; m < favCityJSON[0].climate.mt.data.length; m++) {
            mt += '	<td class="right">' + ((favCityJSON[0].climate.mt.data[m]) ? favCityJSON[0].climate.mt.data[m].toFixed(1) : hvNAval(favCityJSON[0].climate.mt.data[m])) + '</td>';
        }
        mt += '</tr>';
        climatelist.append(mt);
    }
    if (favCityJSON[0].climate.mmint != null) {
        var mmint = '';
        mmint += '<tr bgColor="#EEFFFF">';
        mmint += '	<td class="left">Mean Minimum Temperature<br><span style="font-weight: normal;">(deg. C)</span></td>';
        mmint += '	<td class="period">' + favCityJSON[0].climate.mmint.byr.toString().replace(/^[0]{1}$/g, "") + '-' + favCityJSON[0].climate.mmint.eyr.toString().replace(/^[0]{1}$/g, "") + '</td>';
        for (var m = 0; m < favCityJSON[0].climate.mmint.data.length; m++) {
            mmint += '	<td class="right">' + ((favCityJSON[0].climate.mmint.data[m]) ? favCityJSON[0].climate.mmint.data[m].toFixed(1) : hvNAval(favCityJSON[0].climate.mmint.data[m])) + '</td>';
        }
        mmint += '</tr>';
        climatelist.append(mmint);
    }
    if (favCityJSON[0].climate.rfamt != null) {
        var rfamt = '';
        rfamt += '<tr bgColor="#CCFF99">';
        rfamt += '	<td class="left">Rainfall Amount <span style="font-weight: normal;">(mm)</span></td>';
        rfamt += '	<td class="period">' + favCityJSON[0].climate.rfamt.byr.toString().replace(/^[0]{1}$/g, "") + '-' + favCityJSON[0].climate.rfamt.eyr.toString().replace(/^[0]{1}$/g, "") + '</td>';
        for (var m = 0; m < favCityJSON[0].climate.rfamt.data.length; m++) {
            var lessthan = (favCityJSON[0].climate.rfamt.data[m] == 0.11) ? "< " : "";
            rfamt += '	<td class="right">' + lessthan + ((favCityJSON[0].climate.rfamt.data[m]) ? favCityJSON[0].climate.rfamt.data[m].toFixed(1) : hvNAval(favCityJSON[0].climate.rfamt.data[m])) + '</td>';
        }
        rfamt += '</tr>';
        climatelist.append(rfamt);
    }
    if (favCityJSON[0].climate.dayswr != null) {
        var dayswr = '';
        dayswr += '<tr bgColor="#CCFF99">';
        dayswr += '	<td class="left">Days with Rain<span id="dayswr_asterisk"></span></td>';
        dayswr += '	<td class="period">' + favCityJSON[0].climate.dayswr.byr.toString().replace(/^[0]{1}$/g, "") + '-' + favCityJSON[0].climate.dayswr.eyr.toString().replace(/^[0]{1}$/g, "") + '</td>';
        for (var m = 0; m < favCityJSON[0].climate.dayswr.data.length; m++) {
            var lessthan = (favCityJSON[0].climate.dayswr.data[m] == 0.11) ? "< " : "";
            dayswr += '	<td class="right">' + lessthan + ((favCityJSON[0].climate.dayswr.data[m]) ? favCityJSON[0].climate.dayswr.data[m].toFixed(1) : hvNAval(favCityJSON[0].climate.dayswr.data[m])) + '</td>';
        }
        dayswr += '</tr>';
        climatelist.append(dayswr);
    }
    if (favCityJSON[0].climate.mdshdur != null) {
        var mdshdur = '';
        mdshdur += '<tr bgColor="#FFFFFF">';
        mdshdur += '	<td class="left">Mean Daily Sunshine Duration <span style="font-weight: normal;">(hours)</span></td>';
        mdshdur += '	<td class="period">' + favCityJSON[0].climate.mdshdur.byr + '-' + favCityJSON[0].climate.mdshdur.eyr + '</td>';
        for (var m = 0; m < favCityJSON[0].climate.mdshdur.data.length; m++) {
            mdshdur += '	<td class="right">' + ((favCityJSON[0].climate.mdshdur.data[m]) ? favCityJSON[0].climate.mdshdur.data[m].toFixed(1) : hvNAval(favCityJSON[0].climate.mdshdur.data[m])) + '</td>';
        }
        mdshdur += '</tr>';
        climatelist.append(mdshdur);
    }

    var remark = '<div align="left"><strong>Remark</strong></div>';
    remark += '<ol align="left" class="remark_container">';

    /*if(climate_na_val)
    	remark += '<li>"/" - Not available.</li>';

    if(clino.indexOf(favCityJSON[0].wwis) > -1) {
    	remark += '<li>Climatological information is based on WMO Climatological Normals (CLINO)';
    	remark += '.</li>';
    }*/

    if (favCityJSON[0].wwis != 0) {
        /*if(favCityJSON[0].name.search(/China/g) > -1 && favCityJSON[0].id != 778 && favCityJSON[0].id != 1141) {
        	remark += '<li>Forecast is provided by the China Meteorological Administration.</li>';
        }
        
        if(favCityJSON[0].climate.mmaxt) {
        	if(favCityJSON[0].climate.mmaxt.byr && favCityJSON[0].climate.mmaxt.eyr) {
        		remark += '<li>Mean temperature is based on monthly averages for the period ' + favCityJSON[0].climate.mmaxt.byr + '-' + favCityJSON[0].climate.mmaxt.eyr + '.</li>';
        	}
        } else if(favCityJSON[0].climate.mmint) {
        	if(favCityJSON[0].climate.mmint.byr && favCityJSON[0].climate.mmint.eyr) {
        		remark += '<li>Mean temperature is based on monthly averages for the period ' + favCityJSON[0].climate.mmint.byr + '-' + favCityJSON[0].climate.mmint.eyr + '.</li>';
        	}
        } else if(favCityJSON[0].climate.mt) {
        	if(favCityJSON[0].climate.mt.byr && favCityJSON[0].climate.mt.eyr) {
        		remark += '<li>Mean temperature is based on monthly averages for the period ' + favCityJSON[0].climate.mt.byr + '-' + favCityJSON[0].climate.mt.eyr + '.</li>';
        	}
        }

        if(favCityJSON[0].climate.dayswr) {
        	if(favCityJSON[0].climate.dayswr.byr && favCityJSON[0].climate.dayswr.eyr) {
        		remark += '<li>Days with Rain is based on monthly averages for the period ' + favCityJSON[0].climate.dayswr.byr + '-' + favCityJSON[0].climate.dayswr.eyr + '.</li>';
        	}
        }

        if(favCityJSON[0].climate.rfamt) {
        	if(favCityJSON[0].climate.rfamt.byr && favCityJSON[0].climate.rfamt.eyr) {
        		remark += '<li>Total Rainfall Amount is based on monthly averages for the period ' + favCityJSON[0].climate.rfamt.byr + '-' + favCityJSON[0].climate.rfamt.eyr + '.</li>';
        	}
        }*/
        remark += '<li>Figures in the table are mean monthly values of individual climatological parameters.</li>';
		
		if(favCityJSON[0].id == 526 || favCityJSON[0].id == 1128) {
			remark += '<li>Data period is incomplete.</li>';
		}		
    } else {
        /*if(favCityJSON[0].climate.dayswr) {
        	if(containFloat(favCityJSON[0].climate.dayswr.data)) {
        		remark += '<li>* denotes number of days with at least 1.0 mm of rainfall</li>';
        		$("#dayswr_asterisk").html("*");
        	}
        }*/
        //remark += '<li>The data are mainly extracted from the World Meteorological Organization publication \'1961-1990 Global Climate Normals\' compiled by National Climatic Data Center of the United States. They are 30-year average values for the period 1961-1990.</li>';
        remark += '<li>Climatological information for a city include the city\'s mean maximum temperature, mean temperature, mean minimum temperature, total rainfall amount, number of rainy days and mean duration of sunshine. Except for duration of sunshine which are mean daily values, all other values are mean monthly values of individual climatological parameters.</li>';
    }
    remark += '</ol>';
    $('#remark').html(remark);
}

function hvNAval(val) {
    climate_na_val = true;
    return (val == 0) ? "0.0" : "-";
}

function containFloat(arr) {
    var hvFloat = false;
    for (var i = 0; i < arr.length; i++) {
        if (typeof arr[i] === 'number') {
            if (arr[i] % 1 === 0) {
                // int
            } else {
                hvFloat = true;
            }
        } else {
            // not a number
        }
    }
    return hvFloat;
}

function resetToDefault() {
    $.cookie('wwi_fav_list', '1390|1488|1111|191|1982|1886', {
        expires: 365,
        path: "/"
    });
    favCityList = $.cookie('wwi_fav_list').split("|");
    if (GetURLParameter('add')) {
        location.href = document.referrer;
    } else if (GetURLParameter('ra')) {
        //no redirect
    } else {
        location.href = "./wwi.htm";
    }
}

function isExistInCookie(cookieName, separator, item) {
    var isExist = false;
    if ($.cookie(cookieName) && $.cookie(cookieName) != '') {
        if (separator.length > 0) {
            var cookieArr = $.cookie(cookieName).split(separator);
            var index = cookieArr.indexOf(item);
            if (index > -1) isExist = true;
        } else {
            if ($.cookie(cookieName) == item) isExist = true;
        }
        return isExist;
    } else {
        return false;
    }
}

function addToFavoriteList(itemId) {
    if ($.cookie('wwi_fav_list') && $.cookie('wwi_fav_list') != '') {
        var favArr = $.cookie('wwi_fav_list').split('|');
        var index = favArr.indexOf(itemId);
        if (index == -1) {
            $.cookie('wwi_fav_list', $.cookie('wwi_fav_list') + '|' + itemId, {
                expires: 365,
                path: "/"
            });
        }
    } else {
        $.cookie('wwi_fav_list', itemId, {
            expires: 365,
            path: "/"
        });
    }
    favCityList = $.cookie('wwi_fav_list').split("|");
    //console.log('addToFavoriteList: ' + $.cookie('wwi_fav_list'));
}

function removeFromFavoriteList(itemId, liId) {
    if ($.cookie('wwi_fav_list')) {
        var favArr = $.cookie('wwi_fav_list').split('|');
        var index = favArr.indexOf(itemId);
        favArr.splice(index, 1);
        $.cookie('wwi_fav_list', favArr.join('|'), {
            expires: 365,
            path: "/"
        });
    } else {
        console.log('cookie err');
    }
    if (typeof liId === 'object') {
        liId.parentElement.remove()
    } else {
        if (liId != '0') $('#' + itemId + '_' + liId).remove();
    }
    favCityList = $.cookie('wwi_fav_list').split("|");
    //console.log('removeFromFavoriteList: ' + $.cookie('wwi_fav_list'));
}

function updateFavoriteList(favOrderList) {
    var content = "";
    var arr = favOrderList.split('&');
    for (var i = 0; i < arr.length; i++) {
        if (i != 0) content += '|';
        var typeNid = arr[i].substr(0, arr[i].indexOf('['));
        content += typeNid;
    }
    $.cookie('wwi_fav_list', content, {
        expires: 365,
        path: "/"
    });
    favCityList = $.cookie('wwi_fav_list').split("|");
    //console.log('updateFavoriteList: ' + $.cookie('wwi_fav_list'));
}

function GetURLParameter(sParam) {
    var sPageURL = window.location.search.substring(1);
    var sURLVariables = sPageURL.split('&');
    for (var i = 0; i < sURLVariables.length; i++) {
        var sParameterName = sURLVariables[i].split('=');
        if (sParameterName[0] == sParam) {
            return sParameterName[1];
        }
    }
}

function loadCurrentLocalTime() {
    for (var i = 0; i < favCityJSON.length; i++) {
        var tzObj = favCityJSON[i];
        var divId = 'tz' + tzObj.id;
        $('#' + divId).html(moment(new Date()).lang(localLang).zone(tzObj.tz).format('llll'));
    }
    timer = setTimeout(function() {
        loadCurrentLocalTime()
    }, 500);
}

function dateTimeRewrite(dt) {
    var d = dt.toString().substring(0, 6);
    var t = dt.toString().substring(6, 12);
    d = '20' + d.substring(0, 2) + '-' + d.substring(2, 4) + '-' + d.substring(4, 6);
    if (t.length > 0) t = t.substring(0, 2) + ':' + t.substring(2, 4) + ':' + t.substring(4, 6);
    return d + ' ' + t;
}

function initialize_myFavorites() {
    $("#myFavList").sortable({
        opacity: 0.8,
        cursor: 'move',
        update: function(event, ui) {
            updateFavoriteList($(this).sortable("serialize"));
        },
        delay: 30
    });
	
	initMobileSort();
}

function placeObj() {
    var wwi_id = 0;
    var wwi_name = '';
    var wwi_forecast = false;
    var wwi_climate = false;
    var wwi_capital = false;
}

function SortByName(a, b) {
    var aName = a.wwi_name.toLowerCase();
    var bName = b.wwi_name.toLowerCase();
    return aName.localeCompare(bName);
}

function SortByName1(a, b) {
    var aName = a.toLowerCase();
    var bName = b.toLowerCase();
    return aName.localeCompare(bName);
}

function setupLangURL(param) {
    $('#uc_link').parent().attr('href', '/wxinfo/worldwx/wwi_uc.htm' + param);
    $('#gb_link').parent().attr('href', 'http://gb.weather.gov.hk/wxinfo/worldwx/wwi_uc.htm' + param);
}
var tmpZM = 5;

function switchRegion(ra) {
    tmpZM = (ra == 2) ? 6 : 5;
    if (GetURLParameter('cityID')) {
        location.href = "./wwi.htm?ra=" + ra;
    } else {
        onPopupClose();
        setupPlaceList('r', ra, 1, null);
        setupLangURL('?ra=' + ra);
    }

    $('[class*="region"]').removeClass('active');
    $('.region' + ra).addClass('active');
}

function setupPlaceList(dtype, val, doZoom, place) {
    $('.name_bar').css({
        'display': 'block'
    });
    $('button.add').css({
        'display': 'none'
    });
    $("#wwi_add_new_fav").css({
        'display': 'block'
    });
    $('.place_list_box').css({
        'display': 'block'
    });
    $('.my_fav_list').css({
        'display': 'none'
    });
    $("#place_lists").parent('div').css({
        'display': 'block'
    });
    $("#place_lists").empty();
    $('.region_button_box ul').find('.r_active').removeClass('r_active');
    $('a[class*="r_' + val + '"]').addClass('r_active');
    $('.btn_back').css('display', 'block');

    if (dtype == 'r' && place == null) {
        if (!GetURLParameter('ra')) $('.btn_back').attr("href", "./wwi.htm");
        //if(GetURLParameter('ra') && GetURLParameter('place')) $('.btn_back').attr("href", "javascript:setupPlaceList('r', "+GetURLParameter('ra')+", 0, '"+GetURLParameter('place')+"');");
        if (doZoom) {
            zoomTo(val);
            map.layers[1].setVisibility(false);
        }

        var cnty_array = [];
        var city_array = [];
        var region_data = getObjects(place_markers_e, 'ra', val); // _e
        $(region_data).each(function() {
            var cnty_name = $.trim($(this)[0].name.substr($(this)[0].name.lastIndexOf(",") + 1));
            if (cnty_array.indexOf(cnty_name) == -1) {
                if (cnty_name.indexOf("(") == -1 && cnty_name.indexOf(")") == -1) {
                    if (upStep.indexOf($(this)[0].id) == -1) cnty_array.push(cnty_name);
                } else {
                    //console.log($(this)[0].name);
                }
            }
            //if($(this)[0].name.search(/Hong Kong/g) > -1 || $(this)[0].name.search(/Macao/g) > -1) {
            if (upStep.indexOf($(this)[0].id) != -1) {
                var obj = new placeObj();
                obj.wwi_id = $(this)[0].id;
                //var rename = ($(this)[0].id != 778 && $(this)[0].id != 1141) ? $.trim($(this)[0].name.substr(0, $(this)[0].name.lastIndexOf(","))) : $(this)[0].name;
                var rename = $.trim($(this)[0].name.substr(0, $(this)[0].name.lastIndexOf(",")));
                obj.wwi_name = rename;
                obj.wwi_forecast = $(this)[0].forecast;
                obj.wwi_climate = $(this)[0].climate;
                obj.wwi_capital = $(this)[0].capital;
                cnty_array.push(obj.wwi_name);
                city_array.push(obj);
            }
        });
        cnty_array.sort(SortByName1);

        $('#city_name').html('<a class="icon_earth" href="./wwi.htm"></a> > ' + region_ary[val]);
        for (var i = 0; i < cnty_array.length; i++) {
            var htm_ary = ['<li class="a">'];
            var dirlinkID = 0;
            for (var j = 0; j < city_array.length; j++) {
                if (city_array[j].wwi_name == cnty_array[i]) dirlinkID = city_array[j].wwi_id;
            }
            if (dirlinkID != 0) {
                htm_ary.push('<a href="./wwi.htm?cityID=' + dirlinkID + '">');
            } else {
                var getCnty = getObjects(mapInfo, 'n', cnty_array[i]);
                var getCntyID = getCnty[0].id;
                //htm_ary.push('<a href="javascript:void(0);" onClick="setupPlaceList(\'r\', '+val+', 0, \''+encodeURI(cnty_array[i]).replace("'", "%27")+'\');">');
                htm_ary.push('<a href="javascript:void(0);" onClick="setupPlaceList(\'r\', ' + val + ', 0, ' + getCntyID + ');">');
            }
            //htm_ary.push('<span class="forecast_icon"></span>');
            var css_for_longname = '';
            if (cnty_array[i].indexOf("United Kingdom") > -1) {
                css_for_longname = ' style="font-size: 78%!important; width: 159px;"';
            }
            htm_ary.push('<span class="place_name_1"' + css_for_longname + '>' + cnty_array[i].replace("，", ", ") + '</span>');
            htm_ary.push('<div style="clear: both;"></div>');
            htm_ary.push('</a>');
            htm_ary.push('</li>');
            $("#place_lists").append(htm_ary.join(""));



        }



        /*setTimeout(function(){
			var  largest = 0;
			
				$("#place_lists  .place_name_2").each(function(){ 
		
			   var findHeight = $(this).height(); 
			  
			   if(findHeight > largest){ 
				  largest = findHeight; 
			   } 
			   
			});
			
			$("#place_lists  .place_name_2").each(function(){ 
			
			   var findHeight = $(this).height(); 
			  
			   if(findHeight !=  largest ){ 
					$(this).css({"padding-top":"16px"});
					$("#place_lists  .forecast_icon ").css({"margin-top":"16px"});
					$("#place_lists  .climate_icon  ").css({"margin-top":"16px"});
			   }
	  
			});
			
			$("#place_lists  .place_name_2").css({"height":largest+"px"});
	}, 1500);*/

        $('.wwi_legend').css('display', 'none');
        $('.top_remark').css('display', '');
        $('.nmhs_box').css('display', 'none');
        $('.category_note').css('display', 'block');


    }


    if (dtype == 'r' && place != null) {
        //setupLangURL('?ra='+val+'&place='+encodeURI(place));
        if (!GetURLParameter('place')) $('.btn_back').attr("href", "javascript:setupPlaceList('r', " + val + ", 1, null);");
        if (map) {
            $(mapInfo.place).each(function() {
                //var getname = $(this)[0].n;
                //if(getname.toLowerCase() == decodeURI(place).toLowerCase()) {
                if ($(this)[0].id == place) {
                    //console.log('WWI Place: ' + decodeURI(place) + ' ::: WWIS Place: ' + $(this)[0].n);
                    setMapCenter($(this)[0].lat, $(this)[0].lng, $(this)[0].bz);
                }
            });
            map.layers[1].setVisibility(true);
        }

        //var get_name = decodeURI(place);
        var getCnty = getObjects(mapInfo, 'id', place);
        var get_name = getCnty[0].n;

        var city_array = [],
            getNMHS = false;
        var region_data = getObjects(place_markers_e, 'ra', val);
        $(region_data).each(function() {
            //if($(this)[0].name.search(/Hong Kong/g) == -1 && $(this)[0].name.search(/Macao/g) == -1) {
            if (upStep.indexOf($(this)[0].id) == -1) {
                var cnty_name = $.trim($(this)[0].name.substr($(this)[0].name.lastIndexOf(",") + 1));
                var city_name = $(this)[0].name.substr(0, $(this)[0].name.lastIndexOf(","));
                if (cnty_name == get_name) {
                    if (!getNMHS) {
                        $.ajax({
                            dataType: "json",
                            url: '../../../wxinfo/json/wwi/' + $(this)[0].id + '_e.xml',
                            cache: false,
                            success: function(data) {
                                $('.nmhs_box').css('display', 'block');
                                var getORG = ($.type(data) === "string") ? JSON.parse(data) : data;
                                var nmhs = (getORG.orgName && getORG.orgURL) ? '<a style="color: #0000FF;" href="http://' + getORG.orgURL + '" target="_blank" rel="noopener noreferrer">' + getORG.orgName + '</a>' : getORG.orgName;
                                nmhs = nmhs.replace("Pacific Islands", "United States");
                                nmhs = nmhs.replace("USA - Hawaii", "United States");
                                $('#wwi_nmhs').html('the ' + nmhs);
                                getNMHS = true;
                                get_name = get_name.replace("Pacific Islands", "United States");
                                get_name = get_name.replace("Hawaii", "United States");
                                if (!getORG.orgName) $('#wwi_nmhs').html(get_name);
                            }
                        });
                    }
                    var obj = new placeObj();
                    obj.wwi_id = $(this)[0].id;
                    obj.wwi_name = city_name;
                    obj.wwi_forecast = $(this)[0].forecast;
                    obj.wwi_climate = $(this)[0].climate;
                    obj.wwi_capital = $(this)[0].capital;
                    city_array.push(obj);
                }
            }
        });
        /*if(decodeURI(place).toLowerCase() == "russia") {
        	var other_val = (val == 2) ? 6 : 2;
        	var other_region_data = getObjects(place_markers_e, 'ra', other_val);
        	$(other_region_data).each(function() {
        		if(upStep.indexOf($(this)[0].id) == -1) {
        			var cnty_name = $.trim($(this)[0].name.substr($(this)[0].name.lastIndexOf(",") + 1));
        			var city_name = $(this)[0].name.substr(0, $(this)[0].name.lastIndexOf(","));
        			if(cnty_name == get_name) {
        				var obj = new placeObj();
        				obj.wwi_id = $(this)[0].id;
        				obj.wwi_name = city_name;
        				console.log(city_name);
        				obj.wwi_forecast = $(this)[0].forecast;
        				obj.wwi_climate = $(this)[0].climate;
        				city_array.push(obj);
        			}
        		}
        	});
        }*/

        city_array.sort(SortByName);

        $('#city_name').html('<a class="icon_earth" href="./wwi.htm"></a> > <a href="javascript:void(0);" onClick="setupPlaceList(\'r\', ' + val + ', 1, null);">' + region_ary[val] + '</a> > ' + get_name.replace("，", ", "));
        for (var i = 0; i < city_array.length; i++) {
            var is_capital = (city_array[i].wwi_capital) ? " is_capital" : "";
            var htm_ary = ['<li class="b' + is_capital + '">'];
            htm_ary.push('<a href="./wwi.htm?cityID=' + city_array[i].wwi_id + '">');
            var no_show = (city_array[i].wwi_forecast) ? "" : "no_forecast_icon";
            var no_show1 = (city_array[i].wwi_climate) ? "" : "no_climate_icon";
            //htm_ary.push('<span class="forecast_icon '+no_show+'"></span>');
            htm_ary.push('<span class="place_name_2">' + city_array[i].wwi_name + '</span>');
            htm_ary.push('<span class="forecast_icon ' + no_show + '"></span>');
            htm_ary.push('<span class="climate_icon ' + no_show1 + '"></span>');
            htm_ary.push('<div style="clear: both;"></div>');
            htm_ary.push('</a>');
            htm_ary.push('</li>');
            $("#place_lists").append(htm_ary.join(""));
        }
        $('.wwi_legend').css('display', 'block');
        $('.top_remark').css('display', 'none');
        $('.category_note').css('display', 'none');




    }

    function button_on(obj, place) {
        var txtcolor = (place == null) ? "#376bcc" : "#FFFFFF";
        var bgcolor = (place == null) ? "#FFFFFF" : "#b51263";
        $(obj).css({
            'color': txtcolor,
            'background-color': bgcolor
        });
        if ($(obj).find('.no_forecast_icon').length == 0) {
            $(obj).find('.forecast_icon').css({
                'background': 'url(./images/forecast.png) no-repeat -26px 0px'
            });
        }
        if ($(obj).find('.no_climate_icon').length == 0) {
            $(obj).find('.climate_icon').css({
                'background': 'url(./images/climatological.png) no-repeat -26px 0px'
            });
        }
    }

    function button_off(obj, place) {
        var txtcolor = (place == null) ? "#FFFFFF" : "#b41262";
        var bgcolor = (place == null) ? "#376ccc" : "#FFFFFF";
        $(obj).css({
            'color': txtcolor,
            'background-color': bgcolor
        });
        if ($(obj).find('.no_forecast_icon').length == 0) {
            $(obj).find('.forecast_icon').css({
                'background': 'url(./images/forecast.png) no-repeat 0px 0px'
            });
        }
        if ($(obj).find('.no_climate_icon').length == 0) {
            $(obj).find('.climate_icon').css({
                'background': 'url(./images/climatological.png) no-repeat 0px 0px'
            });
        }
        /*if(($(obj).parent().attr("class")).search(/is_capital/g) > -1) {
        	$(obj).css({'background-color':'#FFFD7C'});
        }*/
    }
    var class_name = (place == null) ? "a" : "b";
    $('#place_lists li.' + class_name + ' a').mouseover(function() {
        button_on($(this), place);
    }).mouseout(function() {
        button_off($(this), place);
    }).focus(function() {
        button_on($(this), place);
    }).blur(function() {
        button_off($(this), place);
    });
}

function updateFavList() {
    if ($('.chosen-select').val().length > 0) {
        var addObj = getObjects(place_markers_e, 'id', $('.chosen-select').val());
        if (!isExistInCookie('wwi_fav_list', '|', addObj[0].id.toString())) {
            addToFavoriteList(addObj[0].id.toString());
            var favArr = $.cookie('wwi_fav_list').split('|');
            $('#fav_ul').append('<li class="search-choice" id="' + addObj[0].id + '_' + (favArr.length + 1) + '"><span>' + addObj[0].name + '</span><a href="javascript:void(0);" class="search-choice-close" onClick="removeFromFavoriteList(\'' + addObj[0].id + '\', this);"></a></li>');
        }
    }
}

function closeAddLocation() {
    if (GetURLParameter('add')) {
        location.href = document.referrer;
    } else {
        location.href = "./wwi.htm";
    }
}

function addNewLocation() {
    /*
    	$('body').append('<div id="setting_mask" style="border: 0px solid green; z-index: 9999; background-color: rgba(255, 255, 255, 0.75);"></div>');
    	$('#setting_mask').offset({top: 0, left: $('#wrap').offset().left});
    	$('#setting_mask').height($('#wrap').height());
    	$('#setting_mask').width($('#wrap').width());
    */

    if (!chosen_box_shown) {
        var def_chosenbox = [];
        def_chosenbox.push($.ajax({
            dataType: "text",
            url: './styles/files/chosen.min.css',
            cache: false
        }));
        def_chosenbox.push($.getScript('./scripts/files/chosen.jquery.min.js'));
        $.when.apply($, def_chosenbox).done(function() {
            $('<style type="text/css">\n' + arguments[0][0] + '</style>').appendTo("head");
            chosen_box_shown = true;
            setupFavContainer();
            $('.setting_box').css({
                'display': 'block',
                'z-index': '1000'
            });
            setupChosenBox();
        }).fail(function(jqXHR, status, error) {
            console.log('Failed due to: ' + status + "" + error);
        });
    } else {
        setupFavContainer();
        $('.setting_box').css({
            'display': 'block',
            'z-index': '1000'
        });
        setupChosenBox();
    }
}

function setupFavContainer() {
    $('#fav_ul').empty();
    var favArr = $.cookie('wwi_fav_list').split('|');
    for (var i = 0; i < favArr.length; i++) {
        var favObj = getObjects(place_markers_e, 'id', favArr[i]);
        $('#fav_ul').append('<li class="search-choice" id="' + favObj[0].id + '_' + (i + 1) + '"><span>' + favObj[0].name + '</span><a href="javascript:void(0);" class="search-choice-close" onClick="removeFromFavoriteList(\'' + favObj[0].id + '\', this);"></a></li>');
    }
    $("#fav_ul").sortable({
        opacity: 0.8,
        cursor: 'move',
        update: function(event, ui) {
            updateFavoriteList($(this).sortable("serialize"));
        },
        delay: 30
    });
}

var chosen_seperator = " || ";

function setupChosenBox() {
    $('.my_fav_list').css('display', 'none');
    $('.chosen-select').empty().append('<option value=""></option>');
    for (var i = 0; i < place_markers_e.lists.length; i++) {
        if (place_markers_e.lists[i].forecast) {
            $('.chosen-select').append('<option value="' + place_markers_e.lists[i].id + '">' + place_markers_e.lists[i].name + chosen_seperator + place_markers_uc.lists[i].name + '</option>');
        }
    }
    $('.chosen-select').trigger("chosen:updated");
    var config = {
        '.chosen-select': {
			search_contains: true
		},
        '.chosen-select-deselect': {
            allow_single_deselect: true
        },
        '.chosen-select-no-single': {
            disable_search_threshold: 10
        },
        '.chosen-select-no-results': {
            no_results_text: 'Oops, nothing found!'
        },
        '.chosen-select-width': {
            width: "95%"
        }
    }
    for (var selector in config) {
        $(selector).chosen(config[selector]);
    }
    //setupFavContainer();
	
	$('.chosen-select').on('change', function(evt, params) {
		chosenHideExtraInfo("a.chosen-single");
		$(".chosen-results>li").each(function() {
			chosenHideExtraInfo(this);
		});
	});
	
	$('.chosen-search input').on('keyup', function(evt, params) {
		$(".chosen-results>li").each(function() {
			chosenHideExtraInfo(this);
		});
	});
	
	$('.chosen-select').on('chosen:showing_dropdown', function(evt, params) {
		$(".chosen-results>li").each(function() {
			chosenHideExtraInfo(this);
		});
	});
}

function chosenHideExtraInfo(obj) {
	var seperatorIndex = $(obj).html().indexOf(chosen_seperator);
	if (seperatorIndex > 0) {
		var newText = $(obj).html().substring(0, seperatorIndex);
		$(obj).html(newText);
	}
}

function onPopupClose(evt) {
    if ($('.wx_infobox').is(':visible')) {
        if (selectedFeature) {
            selectControl.unselect(selectedFeature);
            selectedFeature = null;
        }
    } else {
        selectedFeature = null;
    }
}

function onPopupCloseHK(evt) {
    if ($('.wx_infobox').is(':visible')) {
        if (selectedFeatureHK) {
            selectControl.unselect(selectedFeatureHK);
            selectedFeatureHK = null;
        }
    } else {
        selectedFeatureHK = null;
    }
}

function createPopupForm() {
    var theHTML = '';
    var layerVector = map.layers[2];
    selectedFeature = layerVector.selectedFeatures[0];

    var wx_icon = selectedFeature.attributes['markerimage'].split("/");
    var wx_mint = (selectedFeature.attributes['mint']) ? selectedFeature.attributes['mint'] + "°C" : "-";
    var wx_maxt = (selectedFeature.attributes['maxt']) ? selectedFeature.attributes['maxt'] + "°C" : "-";
    theHTML += '<div class="wx_infobox">';
    theHTML += '<a class="wx_infobox_title wx_infobox_no_border" href="./wwi.htm?cityID=' + selectedFeature.attributes['cityId'] + '"><table>';
    theHTML += '<tr><td colspan="2"><a class="wx_infobox_title" href="./wwi.htm?cityID=' + selectedFeature.attributes['cityId'] + '">' + selectedFeature.attributes['tooltip'] + '</a></td></tr>';
    theHTML += '<tr><td valign="bottom" style="padding-top:10px;padding-bottom:5px"><span class="wx_infobox_desc" >' + selectedFeature.attributes['wxdes'] + '</span></td><td rowspan="2" align="right"><img class="wx_infobox_img" src="./images/' + wx_icon.pop() + '" alt=""></td></tr>';
    theHTML += '<tr><td><span class="wx_infobox_temp">' + wx_mint + ' / ' + wx_maxt + '</span></td></tr>';
    theHTML += '</table></a>';
    theHTML += '</div>';
    return theHTML;
}

function createPopupFormHK() {
    var theHTML = '';
    var layerVector = map.layers[3];
    selectedFeatureHK = layerVector.selectedFeatures[0];

    var wx_icon = selectedFeatureHK.attributes['markerimage'].split("/");
    var wx_mint = (selectedFeatureHK.attributes['mint']) ? selectedFeatureHK.attributes['mint'] + "°C" : "-";
    var wx_maxt = (selectedFeatureHK.attributes['maxt']) ? selectedFeatureHK.attributes['maxt'] + "°C" : "-";
    theHTML += '<div class="wx_infobox">';
    theHTML += '<a class="wx_infobox_title wx_infobox_no_border" href="./wwi.htm?cityID=' + selectedFeatureHK.attributes['cityId'] + '"><table>';
    theHTML += '<tr><td colspan="2"><a class="wx_infobox_title" href="./wwi.htm?cityID=' + selectedFeatureHK.attributes['cityId'] + '">' + selectedFeatureHK.attributes['tooltip'] + '</a></td></tr>';
    theHTML += '<tr><td valign="bottom" style="padding-top:10px;padding-bottom:5px"><span class="wx_infobox_desc" >' + selectedFeatureHK.attributes['wxdes'] + '</span></td><td rowspan="2" align="right"><img class="wx_infobox_img" src="./images/' + wx_icon.pop() + '" alt=""></td></tr>';
    theHTML += '<tr><td><span class="wx_infobox_temp">' + wx_mint + ' / ' + wx_maxt + '</span></td></tr>';
    theHTML += '</table></a>';
    theHTML += '</div>';
    return theHTML;
}

function createFeaturesHK() {
    var features = [];
    for (var i = 0; i < hk_e.length; i++) {
        var wxico_path = './images/pic';
        if (wxico_highlight_cityid == hk_e[i].id) wxico_path = './images/pic';
        var nofc = true;
        if (hk_e[i].wxinfo) {
            if ((hk_e[i].wxinfo.wxico && !GetURLParameter('cityID') && hk_e[i].wxinfo.wxico != '0000') || GetURLParameter('cityID')) {
                nofc = false;
                var lonLat = new OpenLayers.LonLat(hk_e[i].map.lng, hk_e[i].map.lat).transform(
                    new OpenLayers.Projection("EPSG:4326"),
                    new OpenLayers.Projection("EPSG:900913")
                );
                if (wxico_highlight_cityid == 0 || (wxico_highlight_cityid != 0 && wxico_highlight_cityid == hk_e[i].id)) {
                    if (wxicon_mapping[hk_e[i].wxinfo.wxico]) {
                        var wxmaxt = (hk_e[i].wxinfo.maxt) ? hk_e[i].wxinfo.maxt : "";
                        var wxmint = (hk_e[i].wxinfo.mint) ? hk_e[i].wxinfo.mint : "";

                        var tooltip_name = hk_e[i].name.substr(0, hk_e[i].name.lastIndexOf(","));
                        tooltip_name = tooltip_name.substr(0, tooltip_name.lastIndexOf(","));

                        features.push(new OpenLayers.Feature.Vector(
                            new OpenLayers.Geometry.Point(lonLat.lon,
                                lonLat.lat
                            ), {
                                markerimage: wxico_path + wxicon_mapping[hk_e[i].wxinfo.wxico][0] + '.png',
                                tooltip: tooltip_name,
                                cityId: hk_e[i].id,
                                direction: 'self',
                                maxt: wxmaxt,
                                mint: wxmint,
                                wxdes: wxicon_mapping[hk_e[i].wxinfo.wxico][1]
                            }));
                    } else {
                        console.log(hk_e[i].wxinfo.wxico);
                    }
                }
            }
        }
    }
    return features;
}

function createFeatures() {
    var features = [];
    for (var i = 0; i < place_markers_e.lists.length; i++) {
        var wxico_path = './images/pic';
        if (wxico_highlight_cityid == place_markers_e.lists[i].id) wxico_path = './images/pic';
        var nofc = true;
        if (place_markers_e.lists[i].wxinfo) {
            if ((place_markers_e.lists[i].wxinfo.wxico && !GetURLParameter('cityID') && place_markers_e.lists[i].wxinfo.wxico != '0000') || GetURLParameter('cityID')) {
                nofc = false;
                var lonLat = new OpenLayers.LonLat(place_markers_e.lists[i].map.lng, place_markers_e.lists[i].map.lat).transform(
                    new OpenLayers.Projection("EPSG:4326"),
                    new OpenLayers.Projection("EPSG:900913")
                );
                if (wxico_highlight_cityid == 0 || (wxico_highlight_cityid != 0 && wxico_highlight_cityid == place_markers_e.lists[i].id)) {
                    if (wxicon_mapping[place_markers_e.lists[i].wxinfo.wxico]) {
                        var wxmaxt = (place_markers_e.lists[i].wxinfo.maxt) ? place_markers_e.lists[i].wxinfo.maxt : "";
                        var wxmint = (place_markers_e.lists[i].wxinfo.mint) ? place_markers_e.lists[i].wxinfo.mint : "";

                        var tooltip_name = place_markers_e.lists[i].name.substr(0, place_markers_e.lists[i].name.lastIndexOf(","));
                        if (place_markers_e.lists[i].id == "778" || place_markers_e.lists[i].id == "1141") {
                            tooltip_name = tooltip_name.substr(0, tooltip_name.lastIndexOf(","));
                        }

                        features.push(new OpenLayers.Feature.Vector(
                            new OpenLayers.Geometry.Point(lonLat.lon,
                                lonLat.lat
                            ), {
                                markerimage: wxico_path + wxicon_mapping[place_markers_e.lists[i].wxinfo.wxico][0] + '.png',
                                tooltip: tooltip_name,
                                cityId: place_markers_e.lists[i].id,
                                direction: 'self',
                                maxt: wxmaxt,
                                mint: wxmint,
                                wxdes: wxicon_mapping[place_markers_e.lists[i].wxinfo.wxico][1]
                            }));
                    } else {
                        console.log(place_markers_e.lists[i].wxinfo.wxico);
                    }
                }
            }
        }
        /* else {
        				if(GetURLParameter('cityID')) {
        					var lonLat = new OpenLayers.LonLat(place_markers_e.lists[i].map.lng, place_markers_e.lists[i].map.lat).transform(
        						new OpenLayers.Projection("EPSG:4326"),
        						new OpenLayers.Projection("EPSG:900913")
        					);
        					if(wxico_highlight_cityid == 0 || (wxico_highlight_cityid != 0 && wxico_highlight_cityid == place_markers_e.lists[i].id)) {
        					features.push(new OpenLayers.Feature.Vector(
        							new OpenLayers.Geometry.Point(lonLat.lon,
        							lonLat.lat
        						), {markerimage: './images/climatological_map.png', tooltip: place_markers_e.lists[i].name, cityId: place_markers_e.lists[i].id, direction: 'self'}));
        					}
        				}
        			}*/
    }
    return features;
}

function createFeatures_climate() {
    var features = [];
    for (var i = 0; i < place_markers_e.lists.length; i++) {
        var wxico_path = './images/';
        var nofc = true;
        if (place_markers_e.lists[i].wxinfo) {
            if (place_markers_e.lists[i].wxinfo.wxico) {
                nofc = false;
            }
        }
        if (nofc) {
            var lonLat = new OpenLayers.LonLat(place_markers_e.lists[i].map.lng, place_markers_e.lists[i].map.lat).transform(
                new OpenLayers.Projection("EPSG:4326"),
                new OpenLayers.Projection("EPSG:900913")
            );
            if (wxico_highlight_cityid == 0 || (wxico_highlight_cityid != 0 && wxico_highlight_cityid == place_markers_e.lists[i].id)) {
                features.push(new OpenLayers.Feature.Vector(
                    new OpenLayers.Geometry.Point(lonLat.lon,
                        lonLat.lat
                    ), {
                        markerimage: wxico_path + 'climatological_map.png',
                        tooltip: place_markers_e.lists[i].name.substr(0, place_markers_e.lists[i].name.lastIndexOf(",")),
                        cityId: place_markers_e.lists[i].id,
                        direction: 'self'
                    }));
            }
        }
    }
    return features;
}

function setMapCenter(lat, lng, zoomlv) {
    var tmpZoom = zoomlv;

    if (zoomlv > tmpZM)
        tmpZoom = tmpZM;

    map.setCenter(new OpenLayers.LonLat(lng, lat).transform(
            new OpenLayers.Projection("EPSG:4326"),
            new OpenLayers.Projection("EPSG:900913")),
        tmpZoom
    );
}

function zoomTo(ra) {
    var zm = (ra == 0) ? 2 : 3;
    setMapCenter(region_location[ra].lat, region_location[ra].lng, zm);
}

function setupMapNav() {
    var wxico_w = 36,
        wxico_h = 27;
    //var wxico_w = 51, wxico_h = 38;
    var mapControl = [
        new OpenLayers.Control.PanZoom(),
        new OpenLayers.Control.Navigation({
            zoomWheelEnabled: false
        }),
        new OpenLayers.Control.Attribution()
    ];

    if (wxico_highlight_cityid != 0) mapControl.length = 0;

    map = new OpenLayers.Map({
        div: map_container,
        projection: new OpenLayers.Projection("EPSG:900913"),
        displayProjection: new OpenLayers.Projection("EPSG:4326"),
        controls: mapControl
    });
    map.getNumZoomLevels = function() {
        return 9;
    };

    var osm = new OpenLayers.Layer.OSM("OpenStreetMap", "../../../maps_weather/f4/osm-tiles/detail/${z}/${x}/${y}.png", {
        tileOptions: {
            "crossOriginKeyword": null
        }
    });
    /*var gmap = new OpenLayers.Layer.Google(
    		"Google Streets", // the default
    		{numZoomLevels: 20, type : google.maps.MapTypeId.HYBRID}
    	);*/

    var stra_dist = (GetURLParameter('cityID')) ? 0 : 30;
    var vectors = new OpenLayers.Layer.Vector("Vector Layer 1", {
        strategies: [
            new OpenLayers.Strategy.Cluster({
                distance: stra_dist
            })
        ],
        styleMap: new OpenLayers.StyleMap({
            "default": new OpenLayers.Style({
                externalGraphic: '${markerimage}',
                graphicWidth: wxico_w,
                graphicHeight: wxico_h,
                graphicYOffset: (wxico_h * -1),
                cid: '${cityId}',
                title: '${tooltip}',
                maxtemp: '${maxt}',
                mintemp: '${mint}',
                wxdesc: '${wxdes}'
            }, {
                context: {
                    tooltip: function(feature) {
                        var x = parseInt(feature.geometry.x);
                        var y = parseInt(feature.geometry.y);
                        if (feature.cluster) {
                            for (var i = 0; i < feature.cluster.length; i++) {
                                if (x == parseInt(feature.cluster[i].geometry.x) && y == parseInt(feature.cluster[i].geometry.y)) {
                                    feature.attributes.tooltip = feature.cluster[i].attributes.tooltip;
                                }
                            }
                        }
                        return feature.attributes.tooltip;
                    },
                    markerimage: function(feature) {
                        var x = parseInt(feature.geometry.x);
                        var y = parseInt(feature.geometry.y);
                        if (feature.cluster) {
                            for (var i = 0; i < feature.cluster.length; i++) {
                                if (x == parseInt(feature.cluster[i].geometry.x) && y == parseInt(feature.cluster[i].geometry.y)) {
                                    feature.attributes.markerimage = feature.cluster[i].attributes.markerimage;
                                }
                            }
                        }
                        return feature.attributes.markerimage;
                    },
                    cityId: function(feature) {
                        var x = parseInt(feature.geometry.x);
                        var y = parseInt(feature.geometry.y);
                        if (feature.cluster) {
                            for (var i = 0; i < feature.cluster.length; i++) {
                                if (x == parseInt(feature.cluster[i].geometry.x) && y == parseInt(feature.cluster[i].geometry.y)) {
                                    feature.attributes.cityId = feature.cluster[i].attributes.cityId;
                                }
                            }
                        }
                        return feature.attributes.cityId;
                    },
                    maxt: function(feature) {
                        var x = parseInt(feature.geometry.x);
                        var y = parseInt(feature.geometry.y);
                        if (feature.cluster) {
                            for (var i = 0; i < feature.cluster.length; i++) {
                                if (x == parseInt(feature.cluster[i].geometry.x) && y == parseInt(feature.cluster[i].geometry.y)) {
                                    feature.attributes.maxt = feature.cluster[i].attributes.maxt;
                                }
                            }
                        }
                        return feature.attributes.maxt;
                    },
                    mint: function(feature) {
                        var x = parseInt(feature.geometry.x);
                        var y = parseInt(feature.geometry.y);
                        if (feature.cluster) {
                            for (var i = 0; i < feature.cluster.length; i++) {
                                if (x == parseInt(feature.cluster[i].geometry.x) && y == parseInt(feature.cluster[i].geometry.y)) {
                                    feature.attributes.mint = feature.cluster[i].attributes.mint;
                                }
                            }
                        }
                        return feature.attributes.mint;
                    },
                    wxdes: function(feature) {
                        var x = parseInt(feature.geometry.x);
                        var y = parseInt(feature.geometry.y);
                        if (feature.cluster) {
                            for (var i = 0; i < feature.cluster.length; i++) {
                                if (x == parseInt(feature.cluster[i].geometry.x) && y == parseInt(feature.cluster[i].geometry.y)) {
                                    feature.attributes.wxdes = feature.cluster[i].attributes.wxdes;
                                }
                            }
                        }
                        return feature.attributes.wxdes;
                    }
                }
            }),
            "select": new OpenLayers.Style({
                //externalGraphic: "../../../en/wxinfo/worldwx/wxicon/more_low/images/wxicon_marker_2.png"
            })
        })
    });

    var vectors_climate = new OpenLayers.Layer.Vector("Vector Layer Climate", {
        strategies: [
            new OpenLayers.Strategy.Cluster({
                distance: stra_dist
            })
        ],
        styleMap: new OpenLayers.StyleMap({
            "default": new OpenLayers.Style({
                externalGraphic: '${markerimage}',
                graphicWidth: 20,
                graphicHeight: 20,
                graphicYOffset: -(20 / 2),
                title: '${tooltip}'
            }, {
                context: {
                    tooltip: function(feature) {
                        var x = parseInt(feature.geometry.x);
                        var y = parseInt(feature.geometry.y);
                        if (feature.cluster) {
                            for (var i = 0; i < feature.cluster.length; i++) {
                                if (x == parseInt(feature.cluster[i].geometry.x) && y == parseInt(feature.cluster[i].geometry.y)) {
                                    feature.attributes.tooltip = feature.cluster[i].attributes.tooltip;
                                }
                            }
                        }
                        return feature.attributes.tooltip;
                    },
                    markerimage: function(feature) {
                        var x = parseInt(feature.geometry.x);
                        var y = parseInt(feature.geometry.y);
                        if (feature.cluster) {
                            for (var i = 0; i < feature.cluster.length; i++) {
                                if (x == parseInt(feature.cluster[i].geometry.x) && y == parseInt(feature.cluster[i].geometry.y)) {
                                    feature.attributes.markerimage = feature.cluster[i].attributes.markerimage;
                                }
                            }
                        }
                        return feature.attributes.markerimage;
                    }
                }
            }),
            "select": new OpenLayers.Style({
                //externalGraphic: "../../../en/wxinfo/worldwx/wxicon/more_low/images/wxicon_marker_2.png"
            })
        })
    });
    vectors_climate.setVisibility(false);

    var vectors_hk = new OpenLayers.Layer.Vector("Vector Layer 2", {
        strategies: [
            new OpenLayers.Strategy.Cluster({
                distance: 0
            })
        ],
        styleMap: new OpenLayers.StyleMap({
            "default": new OpenLayers.Style({
                externalGraphic: '${markerimage}',
                graphicWidth: wxico_w,
                graphicHeight: wxico_h,
                graphicYOffset: (wxico_h * -1),
                cid: '${cityId}',
                title: '${tooltip}',
                maxtemp: '${maxt}',
                mintemp: '${mint}',
                wxdesc: '${wxdes}'
            }, {
                context: {
                    tooltip: function(feature) {
                        var x = parseInt(feature.geometry.x);
                        var y = parseInt(feature.geometry.y);
                        if (feature.cluster) {
                            for (var i = 0; i < feature.cluster.length; i++) {
                                if (x == parseInt(feature.cluster[i].geometry.x) && y == parseInt(feature.cluster[i].geometry.y)) {
                                    feature.attributes.tooltip = feature.cluster[i].attributes.tooltip;
                                }
                            }
                        }
                        return feature.attributes.tooltip;
                    },
                    markerimage: function(feature) {
                        var x = parseInt(feature.geometry.x);
                        var y = parseInt(feature.geometry.y);
                        if (feature.cluster) {
                            for (var i = 0; i < feature.cluster.length; i++) {
                                if (x == parseInt(feature.cluster[i].geometry.x) && y == parseInt(feature.cluster[i].geometry.y)) {
                                    feature.attributes.markerimage = feature.cluster[i].attributes.markerimage;
                                }
                            }
                        }
                        return feature.attributes.markerimage;
                    },
                    cityId: function(feature) {
                        var x = parseInt(feature.geometry.x);
                        var y = parseInt(feature.geometry.y);
                        if (feature.cluster) {
                            for (var i = 0; i < feature.cluster.length; i++) {
                                if (x == parseInt(feature.cluster[i].geometry.x) && y == parseInt(feature.cluster[i].geometry.y)) {
                                    feature.attributes.cityId = feature.cluster[i].attributes.cityId;
                                }
                            }
                        }
                        return feature.attributes.cityId;
                    },
                    maxt: function(feature) {
                        var x = parseInt(feature.geometry.x);
                        var y = parseInt(feature.geometry.y);
                        if (feature.cluster) {
                            for (var i = 0; i < feature.cluster.length; i++) {
                                if (x == parseInt(feature.cluster[i].geometry.x) && y == parseInt(feature.cluster[i].geometry.y)) {
                                    feature.attributes.maxt = feature.cluster[i].attributes.maxt;
                                }
                            }
                        }
                        return feature.attributes.maxt;
                    },
                    mint: function(feature) {
                        var x = parseInt(feature.geometry.x);
                        var y = parseInt(feature.geometry.y);
                        if (feature.cluster) {
                            for (var i = 0; i < feature.cluster.length; i++) {
                                if (x == parseInt(feature.cluster[i].geometry.x) && y == parseInt(feature.cluster[i].geometry.y)) {
                                    feature.attributes.mint = feature.cluster[i].attributes.mint;
                                }
                            }
                        }
                        return feature.attributes.mint;
                    },
                    wxdes: function(feature) {
                        var x = parseInt(feature.geometry.x);
                        var y = parseInt(feature.geometry.y);
                        if (feature.cluster) {
                            for (var i = 0; i < feature.cluster.length; i++) {
                                if (x == parseInt(feature.cluster[i].geometry.x) && y == parseInt(feature.cluster[i].geometry.y)) {
                                    feature.attributes.wxdes = feature.cluster[i].attributes.wxdes;
                                }
                            }
                        }
                        return feature.attributes.wxdes;
                    }
                }
            }),
            "select": new OpenLayers.Style({
                //externalGraphic: "../../../en/wxinfo/worldwx/wxicon/more_low/images/wxicon_marker_2.png"
            })
        })
    });

    map.addLayers([osm, /* gmap, */ vectors_climate, vectors, vectors_hk]);

    selectControl = new OpenLayers.Control.SelectFeature(
        [vectors, vectors_climate, vectors_hk], {
            clickout: true,
            toggle: false,
            multiple: false,
            hover: false,
            toggleKey: "ctrlKey", // ctrl key removes from selection
            multipleKey: "shiftKey" // shift key adds to selection
        }
    );
    map.addControl(selectControl);
    map.zoomToMaxExtent();
    selectControl.activate();

    var iStyleMap = new OpenLayers.StyleMap({
        "default": new OpenLayers.Style({
            fillColor: "#f1eee9",   // Fill color for polygons
            fillOpacity: 1,         // Fill opacity
            strokeColor: "#000000", // Outline color
            strokeWidth: 0,         // Outline width
        })
    });
    var iLayer = new OpenLayers.Layer.Vector("others", {
        styleMap: iStyleMap,
    });
    map.addLayer(iLayer);
    var ifile = "/tc/wxinfo/currwx/files/i.geojson";
    $.get(ifile, function (content) {
        var geojsonParser = new OpenLayers.Format.GeoJSON({
            internalProjection: map.getProjectionObject(),   // Target projection
            externalProjection: new OpenLayers.Projection("EPSG:4326")   // Source projection
        });
        var iFeatures = geojsonParser.read(content);
        iLayer.addFeatures(iFeatures);
    });

    if (GetURLParameter('ra') && GetURLParameter('place')) {
        var match = false;
        $(mapInfo.place).each(function() {
            //var getname = $(this)[0].n;
            //if(getname.toLowerCase() == decodeURI(GetURLParameter('place')).toLowerCase()) {
            if ($(this)[0].id == GetURLParameter('place')) {
                setMapCenter($(this)[0].lat, $(this)[0].lng, $(this)[0].bz);
                match = true;
            }
        }).promise().done(function() {
            if (!match) zoomTo(GetURLParameter('ra'));
        });
        map.layers[1].setVisibility(true);
    } else if (GetURLParameter('ra')) {
        zoomTo(GetURLParameter('ra'));
        $('[class*="region"]').removeClass('active');
        $('.region' + GetURLParameter('ra')).addClass('active');
    } else {
        setMapCenter(35.324687499997914, 26.52148302630959, 2);
    }

    if (GetURLParameter('cityID')) {
        map.layers[1].setVisibility(true);
        $('[class*="region"]').removeClass('active');
		var getcityid = GetURLParameter('cityID');
		var getcityobj = getObjects(place_markers_e, 'id', getcityid);
		$('.region' + getcityobj[0].ra).addClass('active');		
    }


    vectors.addFeatures(createFeatures());
    vectors_hk.addFeatures(createFeaturesHK());

    if (!GetURLParameter('cityID')) {
        vectors.events.on({
            "featureselected": function(e) {
                selectedFeature = e.feature;
                popup = new OpenLayers.Popup.FramedCloud("chicken",
                    e.feature.geometry.getBounds().getCenterLonLat(),
                    null,
                    createPopupForm(),
                    null, true, onPopupClose);
                popup.imageSrc = './images/cloud-popup-relative_new.png';
                popup.autoSize = true;
                var offset = {
                    'size': new OpenLayers.Size(0, 0),
                    'offset': new OpenLayers.Pixel(39, 17)
                };
                popup.anchor = offset;
                popup.calculateRelativePosition = function() {
                    return 'tr';
                }
                e.feature.popup = popup;
                map.addPopup(popup);
                //$('img[src*="cloud-popup"]').remove();
                //window.location.href = "./wwi.htm?cityID=" + e.feature.cluster[0].data.cityId;
                $('.olPopupCloseBox').css({
                    'background': 'url(./images/close.png) no-repeat',
                    'opacity': '0.8',
                    'filter': 'alpha(opacity=80)'
                });
                /*clearTimeout(t2);
                t2 = setTimeout(function(){
                	$('.olPopup').width($('.olPopup').width() - 18);
                	$('#chicken_FrameDecorationDiv_0').width($('#chicken_FrameDecorationDiv_0').width() - 18);
                	$('#chicken_FrameDecorationDiv_2').width($('#chicken_FrameDecorationDiv_2').width() - 18);
                	$('.olPopupCloseBox').css('top','22px');
                },50);*/
            },
            "featureunselected": function(e) {
                map.removePopup(e.feature.popup);
                e.feature.popup.destroy();
                e.feature.popup = null;
            }
        });
        vectors_hk.events.on({
            "featureselected": function(e) {
                selectedFeatureHK = e.feature;
                popup = new OpenLayers.Popup.FramedCloud("chicken",
                    e.feature.geometry.getBounds().getCenterLonLat(),
                    null,
                    createPopupFormHK(),
                    null, true, onPopupCloseHK);
                popup.imageSrc = './images/cloud-popup-relative_new.png';
                popup.autoSize = true;
                var offset = {
                    'size': new OpenLayers.Size(0, 0),
                    'offset': new OpenLayers.Pixel(39, 17)
                };
                popup.anchor = offset;
                popup.calculateRelativePosition = function() {
                    return 'tr';
                }
                e.feature.popup = popup;
                map.addPopup(popup);
                //$('img[src*="cloud-popup"]').remove();
                //window.location.href = "./wwi.htm?cityID=" + e.feature.cluster[0].data.cityId;
                $('.olPopupCloseBox').css({
                    'background': 'url(./images/close.png) no-repeat',
                    'opacity': '0.8',
                    'filter': 'alpha(opacity=80)'
                });
                /*clearTimeout(t2);
                t2 = setTimeout(function(){
                	$('.olPopup').width($('.olPopup').width() - 18);
                	$('#chicken_FrameDecorationDiv_0').width($('#chicken_FrameDecorationDiv_0').width() - 18);
                	$('#chicken_FrameDecorationDiv_2').width($('#chicken_FrameDecorationDiv_2').width() - 18);
                	$('.olPopupCloseBox').css('top','22px');
                },50);*/
            },
            "featureunselected": function(e) {
                map.removePopup(e.feature.popup);
                e.feature.popup.destroy();
                e.feature.popup = null;
            }
        });
    }

    vectors_climate.addFeatures(createFeatures_climate());

    vectors_climate.events.on({
        "featureselected": function(e) {
            window.location.href = "./wwi.htm?cityID=" + e.feature.cluster[0].data.cityId;
        }
    });

    if (wxico_highlight_cityid != 0) {
        if (favCityJSON[0].id == 2613) {
            setMapCenter(favCityJSON[0].map.lat, favCityJSON[0].map.lng, favCityJSON[0].map.szl);
        } else if (favCityJSON[0].id == 2934) {
            setMapCenter(favCityJSON[0].map.lat, favCityJSON[0].map.lng, favCityJSON[0].map.szl + 4);
        } else {
            setMapCenter(favCityJSON[0].map.lat, favCityJSON[0].map.lng, favCityJSON[0].map.szl + 2); //+3
        }
    }

    $('img[src*="plus"], img[src*="zoom-world"], img[src*="minus"]').click(function() {
        onPopupClose();
        onPopupCloseHK();
    });

    map.events.register('zoomend', map, function() {
        var tmpPosition = map.getCenter();
        var tmpZoomLevel = map.getZoom();

        if (tmpZM != 6 && GetURLParameter('ra') == 2) tmpZM = 6;
        if (tmpZoomLevel > tmpZM) {
            setMapCenter(tmpPosition.lat, tmpPosition.lng, tmpZM);
        }

        $('image').css('cursor', 'pointer');
    });
    map.events.register('moveend', map, function() {
        $('image').css('cursor', 'pointer');
    });
}

function getObjects(obj, key, val) {
    var objects = [];
    for (var i in obj) {
        if (!obj.hasOwnProperty(i)) continue;
        if (typeof obj[i] == 'object') {
            objects = objects.concat(getObjects(obj[i], key, val));
        } else
        if (i == key && obj[i] == val || i == key && val == '') {
            objects.push(obj);
        } else if (obj[i] == val && key == '') {
            if (objects.lastIndexOf(obj) == -1) {
                objects.push(obj);
            }
        }
    }
    return objects;
}

function getPlaceList() {
    var def_placelist = [];
    def_placelist.push($.ajax({
        dataType: "json",
        url: '../../../wxinfo/json/wwi/placelist_e.xml',
        cache: false
    }));
    def_placelist.push($.ajax({
        dataType: "json",
        url: '../../../wxinfo/json/wwi/placelist_uc.xml',
        cache: false
    }));
    $.when.apply($, def_placelist).done(function() {
        place_markers_e = ($.type(arguments[0][0]) === "string") ? JSON.parse(arguments[0][0]) : arguments[0][0];
        place_markers_uc = ($.type(arguments[1][0]) === "string") ? JSON.parse(arguments[1][0]) : arguments[1][0];
        hk_uc = getObjects(place_markers_uc, "id", 778);
        hk_e = getObjects(place_markers_e, "id", 778);
        if (GetURLParameter('add')) {
            addNewLocation();
        } else {
            if (GetURLParameter('ra')) {
                setupLangURL('?ra=' + GetURLParameter('ra'));
                setupPlaceList('r', GetURLParameter('ra'), 0, GetURLParameter('place'));
                t1 = setTimeout(function() {
                    clearTimeout(t1);
                    triggerMap('osmap_canvas', 0, 'setupMapNav');
                }, 500);
                setTimeout(function() {
                    setupMapNav();
                }, 1500);
            }
            if (!GetURLParameter('ra')) setupMapNav();
            setupSearchBox();
        }
    }).fail(function(jqXHR, status, error) {
        console.log('Failed due to: ' + status + "" + error);
    });
}

function triggerMap(container, cityid, callback) {
    //$.getScript( "http://maps.google.com/maps/api/js?v=3.6&sensor=false&language=en&" + "callback="+callback, function( data, textStatus, jqxhr ) {
    map_container = container;
    wxico_highlight_cityid = cityid;
    //});
}

function hvClimate(cityObj) {
    if (!cityObj.climate || cityObj.climate.length == 0) return false;
    var na = true;
    if (na && cityObj.climate.mmaxt) {
        for (var i = 0; na && i < cityObj.climate.mmaxt.data.length; i++) {
            if (cityObj.climate.mmaxt.data[i] > 0 || cityObj.climate.mmaxt.data[i] < 0) {
                na = false;
                break;
            }
        }
    }
    if (na && cityObj.climate.mt) {
        for (var i = 0; na && i < cityObj.climate.mt.data.length; i++) {
            if (cityObj.climate.mt.data[i] > 0 || cityObj.climate.mt.data[i] < 0) {
                na = false;
                break;
            }
        }
    }
    if (na && cityObj.climate.mmint) {
        for (var i = 0; na && i < cityObj.climate.mmint.data.length; i++) {
            if (cityObj.climate.mmint.data[i] > 0 || cityObj.climate.mmint.data[i] < 0) {
                na = false;
                break;
            }
        }
    }
    if (na && cityObj.climate.rfamt) {
        for (var i = 0; na && i < cityObj.climate.rfamt.data.length; i++) {
            if (cityObj.climate.rfamt.data[i] > 0 || cityObj.climate.rfamt.data[i] < 0) {
                na = false;
                break;
            }
        }
    }
    if (na && cityObj.climate.dayswr) {
        for (var i = 0; na && i < cityObj.climate.dayswr.data.length; i++) {
            if (cityObj.climate.dayswr.data[i] > 0 || cityObj.climate.dayswr.data[i] < 0) {
                na = false;
                break;
            }
        }
    }
    return !na;
}

function hvWeatherForecast(cityObj, from) {
    if (from == 'city' && cityObj.forecast.issue == 0 && cityObj.forecast.days.length == 0) {
        return false;
    }
    if (from == 'placelist' && !cityObj.wxinfo) return false;
    return true;
}

function setupFavCity() {
    $("#myFavList").empty();
    for (var i = 0; i < favCityJSON.length; i++) {
        var hvfc = hvWeatherForecast(favCityJSON[i], 'city');

        var htm_ary = [];

        var rename = $.trim(favCityJSON[i].name.substr(0, favCityJSON[i].name.lastIndexOf(",")));
        if (favCityJSON[i].id == 778 || favCityJSON[i].id == 1141) {
            rename = $.trim(rename.substr(0, rename.lastIndexOf(",")));
        }

        htm_ary.push('<div class="favGroup">');
        htm_ary.push('<div class="favCityName"><div class="favGroupMove"></div><a href="?cityID=' + favCityJSON[i].id + '">' + rename + '</a></div>');
        htm_ary.push('<span class="remove"><a href="javascript:void(0);" title="Click here to remove city from Favourite Locations" onclick="removeFromFavoriteList(\'' + favCityJSON[i].id.toString() + '\', \'' + (i + 1) + '\');"></a></span>');
        htm_ary.push('<div class="myFavList carousel">');
        htm_ary.push('<ul class="slides">');
        var fcday = favCityJSON[i].forecast.days;

        for (var j = 0; j < fcday.length; j++) {

            var hide_img = (fcday[j].wxico == '0000');
            var img = '';

            if (!hide_img)
                img = '<img class="lazy" src="images/pic' + ((fcday[j].wxico != null) ? wxicon_mapping[fcday[j].wxico][0] : "") + '.png" alt="' + ((fcday[j].wxico != null) ? wxicon_mapping[fcday[j].wxico][1] : "") + ' icon" title="' + ((fcday[j].wxico != null) ? wxicon_mapping[fcday[j].wxico][1] : "") + '">';

            var forecast_desc = "";
            if (wxicon_mapping[fcday[j].wxico]) {
                forecast_desc = ((fcday[j].wxico != null && fcday[j].wxico != '0000') ? wxicon_mapping[fcday[j].wxico][1] : " ");
            }
            //console.log("DATE",(fcday[j].date),moment(dateTimeRewrite(fcday[j].date),'YYYYMMDD').lang(localLang).format('MMMM Do<br>(dddd)'));
            htm_ary.push('<li>');
            //htm_ary.push('<div class="adw_day"><div>' +  moment(dateTimeRewrite(fcday[j].date),'YYYYMMDD').lang(localLang).format('MMMM Do<br>(dddd)') + '</div>');
            htm_ary.push('<div class="adw_day"><div class="my_fav_fc_date">' + moment(dateTimeRewrite(fcday[j].date), 'YYYYMMDD').lang(localLang).format(' D MMM (ddd)') + '</div>');

            htm_ary.push('<div class="my_fav_fc_wxicon"><span>' + img + '</span></div>');

            htm_ary.push(' <div class="my_fav_adw_temp"><span class="lowest">' + ((fcday[j].mint) ? fcday[j].mint + "°C" : "-") + '</span> <br><span class="highest">' + ((fcday[j].maxt) ? fcday[j].maxt + "°C" : "-") + '</span></div>');



            htm_ary.push('<div class="adw_detail">' + forecast_desc + '</div></div>');



            htm_ary.push('</li>');
        }

        htm_ary.push('<li><div class="adw_more"><a href="https://worldweather.wmo.int/en/city.html?cityId=' + favCityJSON[i].wwis + '"><span>More Forecast</span></a></div></li>');
        htm_ary.push('</ul>');
        htm_ary.push('</div>');
        htm_ary.push('</div>');

        $('#myFavList').append('<li id="' + favCityJSON[i].id + '_' + (i + 1) + '">' + htm_ary.join("") + '</li>');
    }
    //clearTimeout(timer);
    //loadCurrentLocalTime();
    initialize_myFavorites();
    t1 = setTimeout(function() {
        clearTimeout(t1);
        triggerMap('osmap_canvas', 0, 'getPlaceList');
        getPlaceList();
    }, 500);
}

function loadJSON() {
    var deferreds = [];
    for (var i = 0; i < json_name.length; i++) {
        deferreds.push($.ajax({
            dataType: "json",
            url: '../../../wxinfo/json/wwi/' + json_name[i] + '_e.xml?' + new Date().getTime(),
            cache: false
        }));
    }
    $.when.apply($, deferreds).done(function() {
        //console.log('loadJSON Done');

        for (var i = 0; i < json_name.length; i++) {
            if (json_name.length == 1) {
                favCityJSON.push(($.type(arguments[0]) === "string") ? JSON.parse(arguments[0]) : arguments[0]);
            } else {
                favCityJSON.push(($.type(arguments[i][0]) === "string") ? JSON.parse(arguments[i][0]) : arguments[i][0]);
            }
        }

        if (GetURLParameter('cityID')) {

            $('.name_bar').css({
                'display': 'block'
            });
            $("#wwi_add_new_fav").css({
                'display': 'block'
            });
            $('.map_n_info').css({
                'display': 'block'
            });
            $('.forecast_box').css({
                'display': 'block'
            });
            $('.climate_box').css({
                'display': 'block'
            });

            var p_ra = favCityJSON[0].ra;
            $('[class*="region"]').removeClass('active');
            $('.region' + p_ra).addClass('active');
            var p_place = $.trim(favCityJSON[0].name.substr(favCityJSON[0].name.lastIndexOf(",") + 1));
            var getCnty = getObjects(mapInfo, 'n', p_place);
            console.log(mapInfo);
            console.log(p_place);
            var getCntyID = getCnty[0].id;
            //if(favCityJSON[0].name.search(/Hong Kong/g) > -1 || favCityJSON[0].name.search(/Macao/g) > -1) {

            if (GetURLParameter('cityID') == "778" || GetURLParameter('cityID') == "1141") {
                var rename = $.trim(favCityJSON[0].name.substr(0, favCityJSON[0].name.lastIndexOf(",")));

                $('#city_name').html('<a class="icon_earth" href="./wwi.htm"></a> > <a href="./wwi.htm?ra=' + p_ra + '">' + region_ary[p_ra] + '</a> > ' + rename + ' > ' + rename.substr(0, rename.lastIndexOf(",")));

            } else if (upStep.indexOf(favCityJSON[0].id) > -1) {
                var rename = $.trim(favCityJSON[0].name.substr(0, favCityJSON[0].name.lastIndexOf(",")));
                $('#city_name').html('<a class="icon_earth" href="./wwi.htm"></a> > <a href="./wwi.htm?ra=' + p_ra + '">' + region_ary[p_ra] + '</a> > ' + rename);
            } else {
                //$('#city_name').html('<a class="icon_earth" href="./wwi.htm"></a> > <a href="./wwi.htm?ra='+p_ra+'">'+region_ary[p_ra] + '</a> > <a href="./wwi.htm?ra='+p_ra+'&place='+encodeURI(p_place)+'">' + p_place.replace("，", ", ") + '</a> > ' + favCityJSON[0].name.substring(0, favCityJSON[0].name.lastIndexOf(",")));
                $('#city_name').html('<a class="icon_earth" href="./wwi.htm"></a> > <a href="./wwi.htm?ra=' + p_ra + '">' + region_ary[p_ra] + '</a> > <a href="./wwi.htm?ra=' + p_ra + '&place=' + getCntyID + '">' + p_place.replace("，", ", ") + '</a> > ' + favCityJSON[0].name.substring(0, favCityJSON[0].name.lastIndexOf(",")));
            }
            setupRightCol();
            setupForecastBox();
            if (setupClimateBox()) {
                setupClimateBox_chartview();
                setupClimateBox_tableview();
                $(".climate_box  .flip").trigger('click');
            }
            $('a[class*="r_' + p_ra + '"]').addClass('r_active');
            $('.btn_back').css('display', 'block');
            //$('.btn_back').attr('href', './wwi.htm?ra='+p_ra+'&place='+encodeURI(p_place));
            $('.btn_back').attr('href', './wwi.htm?ra=' + p_ra + '&place=' + getCntyID);
        } else if (GetURLParameter('add')) {
            getPlaceList();
        } else {
            $('.map_nav').css({
                'display': 'block'
            });
            $('.place_list_box').css({
                'display': 'block'
            });
            if (GetURLParameter('ra')) {
                //t1 = setTimeout(function(){clearTimeout(t1);triggerMap('osmap_canvas', 0);},500);
                getPlaceList();
            } else {
                $('.my_fav_list').css({
                    'display': 'block'
                });
                $("#place_lists").parent('div').css({
                    'display': 'none'
                });
                setupFavCity();
            }
        }
    }).fail(function(jqXHR, status, error) {
        console.log('Failed due to: ' + status + "" + error);
    });
}

function areCookiesEnabled() {
    var cookieEnabled = navigator.cookieEnabled;
    if (cookieEnabled === false) {
        return false;
    }
    if (!document.cookie && (cookieEnabled === null || false)) {
        document.cookie = "testcookie=1";
        if (!document.cookie) {
            return false;
        } else {
            document.cookie = "testcookie=; expires=" + new Date(0).toUTCString() + "; path=/";
        }
    }
    return true;
}

$(document).ready(function() {

    if (!$.cookie('wwi_fav_list') || $.cookie('wwi_fav_list') == '') {
        if (areCookiesEnabled()) resetToDefault();
    }

    var wwi_fav_list = $.cookie('wwi_fav_list');
    $.cookie("wwi_fav_list", wwi_fav_list, {
        expires: 365,
        path: "/"
    });

    favCityList = $.cookie('wwi_fav_list').split("|");
    if (!areCookiesEnabled() && favCityList.length == 1 && favCityList[0] == '') {
        favCityList = [1390, 1488, 1111, 191, 1982, 1886];
        $('button[onclick*="addNewLocation"]').hide();

    }

    if (GetURLParameter('cityID')) {
        json_name.push(GetURLParameter('cityID')); // Integer validation should be added later
        setupLangURL('?cityID=' + GetURLParameter('cityID'));
    } else {
        //json_name = $.merge(json_name, favCityList);
        json_name = favCityList;
    }

    loadJSON();

    $(".sbox_x").click(function() {
        $(".results").empty();
        $('#wwi_search').val(default_search_text);
    });

    $('#clf_main_content_body').parent('div').css('position', 'relative');
});



function setupSearchBox() {
    for (var i = 0; i < place_markers_e.lists.length; i++) {
        var item = new Array;
        item["key"] = place_markers_e.lists[i].id;
        if (place_markers_e.lists[i].name.search("China") > -1) {
            item["value"] = place_markers_e.lists[i].name.substring(0, place_markers_e.lists[i].name.lastIndexOf(",")) + '|' + place_markers_uc.lists[i].name.substring(0, place_markers_uc.lists[i].name.lastIndexOf(","));
        } else {
            item["value"] = place_markers_e.lists[i].name + '|' + place_markers_uc.lists[i].name;
        }
        qsDataSource.push(item);
    };
    $('#wwi_search').focus(function() {
        if ($(this).val() == default_search_text) $(this).val('');
    }).blur(function() {
        if ($(this).val().length == 0) $(this).val(default_search_text);
    });
    $("#wwi_search").autocomplete({
        minLength: 0,
        source: qsDataSource,
        suggest: function(items) {
            var $div = $(".results").empty();
            if ($("#wwi_search").val().length > 0) {
                var cnt = 0;
                $.each(items, function() {
                    var classname = (cnt % 2) ? "odd" : "even";
                    $("<a/>").attr("href", "./wwi.htm?cityID=" + this.key)
                        //.attr( "onClick", "search_result_click(this, " + this.key + ");" )
                        .text((this.label.split('|').shift()).replace("，", ", "))
                        .addClass(classname)
                        .appendTo($div);
                    cnt++;
                });
            }
        },
        response: function(event, ui) {
            if (ui.content.length == 0) $(".results").empty();
        }
    });
    //$('.results').css({'left': $('#wwi_search').offset().left, 'top': $('#wwi_search').offset().top + $('#wwi_search').height()});
    $('#search_box').css('display', 'block');

    if (GetURLParameter('cityID')) addsocialnetworkbuttons_e();
    setTimeout(function() {
        if (GetURLParameter('cityID')) addsocialnetworkbuttons_e();
    }, 3000);
}
// Extend the autocomplete widget with a new "suggest" option.
$.widget("app.autocomplete", $.ui.autocomplete, {
    options: {
        suggest: false
    },
    // Called when the autocomplete menu is about to be displayed.
    _suggest: function(items) {
        // If there's a "suggest" function, use it to render the
        // items. Otherwise, use the default _suggest() implementation.
        if ($.isFunction(this.options.suggest)) {
            return this.options.suggest(items);
        }
        this._super(items);
    },
    // Called when the autocomplete menu is about to be hidden.
    _close: function(e) {
        // If there's a "suggest" function, call it with an
        // empty array so it can clean up. Otherwise, use the
        // default _close() implementation.
        /*if ( $.isFunction( this.options.suggest ) ) {
        	this.options.suggest( [] );
        	return this._trigger( "close", e );
        }
        this._super( e )*/
    }
});

$(document).ready(function() {
    //added 20200108
    $(window).resize(function() {
        var html_width = $(document).width();
        var chart_height = $(".div_chart_map").outerHeight();
        //console.log(html_width);

        if (html_width <= 979) {
            //	  location.reload(true);
            $(".div_chart_map").css("height", "auto");
            $(".div_chart_map").css({
                'scrollbar-width': "none"
            });
            //$(".div_chart_map").css({ 'display': "none" });
        } else {
            // calHeightChartMapDiv(1); //added 20200108
            if (GetURLParameter('cityID')) {
                $(".div_chart_map").css("height", "541px");
            }
        }

        if (chart_height < 70) {

            $(".div_chart_map").css({
                'height': "0px"
            });
            $(".div_chart_map").css({
                'scrollbar-width': "none"
            });

        }

    });

    setTimeout(function() {
        /*$("img").each(function(){
        	if((typeof($(this).attr('alt')) == 'undefined' || $(this).attr('alt') == '') && (typeof($(this).attr('title')) == 'undefined' || $(this).attr('title') == '')){
        		$(this).attr('alt', 'image');
        	}
        	else if((typeof($(this).attr('alt')) == 'undefined' || $(this).attr('alt') == '') && typeof($(this).attr('title')) !== 'undefined' && $(this).attr('title') !== ''){
        		console.log($(this).attr('title'));
        	}
        });*/

        var tb_index = 1;
        $("table").each(function() {
            var firstRow = true;
            var tr_index = 1;
            var th_index = 1;
            $(this).find('th').each(function() {
                if ((typeof($(this).attr('id')) == 'undefined' || $(this).attr('id') == '')) {
                    if ($(this).index() != 0 && firstRow) {
                        $(this).attr('id', tb_index + "_" + tr_index + "_" + th_index);
                        $(this).attr('scope', "column");
                        th_index++;
                        //console.log('L1');
                    } else if ($(this).index() != 0 && !firstRow) {
                        var colNo = $(this).index();
                        var thID = $(this).closest("table").find("tr th:nth-child(" + (colNo + 1) + ")").attr('id');
                        var trID = $(this).closest("tr").find("th").attr('id');
                        $(this).attr('id', tb_index + "_" + tr_index + "_" + th_index);
                        $(this).attr('headers', thID + " " + trID);
                        $(this).attr('scope', "row");
                        th_index++;
                        //console.log('L1');
                    } else if (typeof($(this).closest("table").find("tr th").attr('id')) != "undefined" && $(this).index() == 0) {
                        tr_index++;
                        firstRow = false;
                        th_index = 1;
                        $(this).attr('id', tb_index + "_" + tr_index + "_" + th_index);
                        $(this).attr('scope', "row");
                        //console.log('L2');
                        th_index++;
                    } else {
                        $(this).attr('id', tb_index + "_" + tr_index + "_" + th_index);
                        $(this).attr('scope', "column");
                        th_index++;
                        //console.log('L3');
                    }
                }
            });
            tb_index++;
        });
        $("td").each(function() {
            var colNo = $(this).index();
            var thID = $(this).closest("table").find("tr th:nth-child(" + (colNo + 1) + ")").attr('id');
            var trID = $(this).closest("tr").find("th").attr('id');

            $(this).attr('headers', thID + " " + trID);
        });
    }, 6000);

    //add a to h1
    $("#mainContent>h1").wrap($("<a/>").attr("href", "wwi.htm").attr("class", "h1_a"));

    $(document).ready(function() {
        setTimeout(function() {
            $("#weather_icon_table").css("display", "block");
$("#notes_box").css("display", "block");
            calHeightChartMapDiv(0); //added 20200108	
            init_keyboard();				 
        }, 1000);

    });
});

$(function() {
	if ($(window).width() > mob_width) {
		if ($("#myFavList").is(':ui-sortable')) {
			$("#myFavList").sortable("enable");
		}
	} else {
		if ($("#myFavList").is(':ui-sortable')) {
			$("#myFavList").sortable("disable");
		}
	}
	
	initMobileSort();
});

$(window).resize(function() {
	if ($(window).width() > mob_width) {
		if ($("#myFavList").is(':ui-sortable')) {
			$("#myFavList").sortable("enable");
		}
	} else {
		if ($("#myFavList").is(':ui-sortable')) {
			$("#myFavList").sortable("disable");
		}
	}
});

function initMobileSort() {
	if ($(window).width() > mob_width) {
		if ($("#myFavList").is(':ui-sortable')) {
			$("#myFavList").sortable("enable");
		}
	} else {
		if ($("#myFavList").is(':ui-sortable')) {
			$("#myFavList").sortable("disable");
		}
	}
		
	$("#myFavList .favGroupMove").on({'mousedown touchstart':function(){ 
			$("#myFavList").sortable("enable");
		} 
	});
	
	$("#myFavList .favGroupMove").on({'mouseup touchend':function(){ 
			$("#myFavList").sortable("disable");
		} 
	});
}

function init_keyboard(){
	$("#OpenLayers_Control_PanZoom_2_panup").attr("tabindex","0");
	$("#OpenLayers_Control_PanZoom_2_panleft").attr("tabindex","0");
	$("#OpenLayers_Control_PanZoom_2_panright").attr("tabindex","0");
	$("#OpenLayers_Control_PanZoom_2_pandown").attr("tabindex","0");
	$("#OpenLayers_Control_PanZoom_2_zoomin").attr("tabindex","0");
	$("#OpenLayers_Control_PanZoom_2_zoomworld").attr("tabindex","0");
	$("#OpenLayers_Control_PanZoom_2_zoomout").attr("tabindex","0");
	
	$("#OpenLayers_Control_PanZoom_2_panup_innerImage").attr("alt","Up");
	$("#OpenLayers_Control_PanZoom_2_panleft_innerImage").attr("alt","Left");
	$("#OpenLayers_Control_PanZoom_2_panright_innerImage").attr("alt","Right");
	$("#OpenLayers_Control_PanZoom_2_pandown_innerImage").attr("alt","Down");
	$("#OpenLayers_Control_PanZoom_2_zoomin_innerImage").attr("alt","Zoom in");
	$("#OpenLayers_Control_PanZoom_2_zoomworld_innerImage").attr("alt","Reset zoom level");
	$("#OpenLayers_Control_PanZoom_2_zoomout_innerImage").attr("alt","Zoom out");
}
	</script>
</head>
<body id="page_bg">
<div id="skipwrapper">
    <a id="top" title="page top"></a>
    <a id="skiptocontent" href="#mainContentSkip" class="access">Skip Content</a>
</div>
<div id="wrap">
    <div id="header" class="headerArea">
        <div class="container">
            <div class="headerTool">
				<script type="text/javascript">createHeader();</script>
            </div>
        </div>
    </div>
    <div class="bodyArea">
        <div class="container">
            <div class="contentArea">
                <a id="mainContentSkip"></a>
                <div class="mainHeader"></div>
                <div class="breadcrumb"></div>
				<script type="text/javascript">pageTop();</script>
				<div id="mainContent" class="mainContent">
                <!--Begin Content-->
                <h1> World Weather Information</h1>
                <div class="border_blank">
                    <script language="javascript" type="text/javascript" src="../../../common/js/jquery/files/jquery.ui.touch-punch.min.js"></script>
<script language="javascript" type="text/javascript" src="../../../en/wxinfo/worldwx/scripts/files/OpenLayers.js"></script>
<link rel="stylesheet" type="text/css" href="../../../en/wxinfo/worldwx/styles/files/wwi.css" />
<div class="div_wwi_search">
<div name="searchForm" id="searchForm2"><label class="searchLabel access" for="wwi_search">Search</label> <input id="wwi_search" name="query" type="text" class="searchBox seachInputBar" placeholder="Enter City or Place" /> <a class="searchBtn" href="#"><img src="../../../en/wxinfo/worldwx/../../../images/icon_search.png" alt="Search" title="Search" /></a>
<div class="results"></div>
</div>
</div>
<div class="div_wwi_tab"><!--ul class="etabs">
                            <li class="tab tabs_1"><a href="#tabs-1" onclick="switchRegion(1);">Africa</a></li>
                            <li class="tab tabs_2"><a href="#tabs-2" onclick="switchRegion(2);">Asia</a></li>
                            <li class="tab tabs_3"><a href="#tabs-3" onclick="switchRegion(3);">South America</a></li>
                            <li class="tab tabs_4"><a href="#tabs-4" onclick="switchRegion(4);">North & Central America</a></li>
                            <li class="tab tabs_5"><a href="#tabs-5" onclick="switchRegion(5);">South West Pacific</a></li>                                
                            <li class="tab tabs_6"><a href="#tabs-6" onclick="switchRegion(6);">Europe</a></li>
                        </ul-->
<div class="regionDiv">
<div class="region1"><a href="#tabs-1" onclick="switchRegion(1);">Africa</a></div>
<div class="region2"><a href="#tabs-2" onclick="switchRegion(2);">Asia</a></div>
<div class="region3"><a href="#tabs-3" onclick="switchRegion(3);">South America</a></div>
<div class="region4"><a href="#tabs-4" onclick="switchRegion(4);">North &amp; Central America</a></div>
<div class="region5"><a href="#tabs-5" onclick="switchRegion(5);">South West Pacific</a></div>
<div class="region6"><a href="#tabs-6" onclick="switchRegion(6);">Europe</a></div>
</div>
<div class="regionLineDiv">
<ul>
<li class="region1"></li>
<li class="region2"></li>
<li class="region3"></li>
<li class="region4"></li>
<li class="region5"></li>
<li class="region6"></li>
</ul>
</div>
<label for="region" style="display: none;">-- Select a region --</label><select onchange="switchRegion(this.value)" id="region">
<option>-- Select a region --</option>
<option value="1">Africa</option>
<option value="2">Asia</option>
<option value="3">South America</option>
<option value="4">North &amp; Central America</option>
<option value="5">South West Pacific</option>
<option value="6">Europe</option>
</select></div>
<div class="msg_box"></div>
<div class="div_wwi_bc">
<div id="wwi_add_new_fav" title="Add new location" style="display: none;"><button class="add" style="margin-top: 1px;"></button></div>
<div class="name_bar" style="display: none;"><span id="city_name"></span></div>
</div>
<div class="forecast_box" style="display: none;">
<div class="mybox wrapper-expandable active">
<div class="mybox_title"></div>
<div class="mybox_cont box-style-wrapper forecast_main_div">
<div class="forecastlist" id="forecast_list"></div>
<div class="expandable-txt wxicon_desc"><span class="arrow"><span class="arrow-top"></span><span class="arrow-bottom"></span></span><span id="issue_date_time"></span></div>
</div>
</div>
</div>
<div class="div_chart_map">
<div class="left_chart">
<div class="climate_box" style="display: none;">
<div class="mybox">
<div class="">
<div class="wxicon_desc"><a class="flip" href="#"></a></div>
</div>
<div class="mybox_cont box-style-wrapper">
<div id="climate_content" class="tab_select">
<div class="tab_1 active">
<div><a href="#">Chart View</a></div>
<div>
<div id="climate_container" style="width: 100%;"></div>
</div>
</div>
<!--
									-->
<div class="tab_2">
<div><a href="#">Table View</a></div>
<div class="table_main">
<div id="tableview">
<table id="climate_list">
<tbody>
<tr>
<td></td>
<th>Data Period</th>
<th>Jan</th>
<th>Feb</th>
<th>Mar</th>
<th>Apr</th>
<th>May</th>
<th>Jun</th>
<th>Jul</th>
<th>Aug</th>
<th>Sep</th>
<th>Oct</th>
<th>Nov</th>
<th>Dec</th>
</tr>
</tbody>
</table>
<div class="remark">
<div id="remark">
<div class="self_align_left"><strong>Remark</strong></div>
<ol class="remark_container self_align_left">
<li>Figures in the table are mean monthly values of individual climatological parameters.</li>
</ol>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="right_map">
<div class="div_wwi_map">
<div class="map_n_info" style="display: none;">
<div id="left_col">
<div id="s_osmap_canvas"></div>
</div>
<!--
							-->
<div id="right_col"></div>
<div style="clear: both;"></div>
</div>
<div class="map_nav" style="display: none;"><!-- <div id="osmap_canvas"></div> --></div>
</div>
</div>
</div>
<div class="div_wwi_map"><!-- <div class="map_n_info" style="display: none;"> 
<div id="left_col">
<div id="s_osmap_canvas"></div>
</div>
--> <!--
							-->
<div id="right_col"></div>
<div style="clear: both;"></div>
<div class="map_nav" style="display: none;">
<div id="osmap_canvas"></div>
</div>
</div>
<div class="my_fav_list" style="display: none;">
<div class="mybox wrapper-expandable active">
<div class="mybox_title expandable-title fav_box">
<div class="expandable-txt wxicon_desc"><a class="flip" href="#"><span class="arrow"><span class="arrow-top"></span><span class="arrow-bottom"></span></span>My Favourite Locations</a></div>
<div class="heading_right">
<div id="wwi_add_new_fav2" title="Add new location"><button class="add" onclick="addNewLocation();"></button></div>
</div>
</div>
<div class="mybox_cont box-style-wrapper">
<div class="wxicons_box">
<ul id="myFavList"></ul>
</div>
</div>
</div>
</div>
<div class="place_list_box">
<div class="wwi_legend" style="display: none;">
<div>
<div class="legend_forecast"></div>
<div class="legend_name">Weather Forecast</div>
</div>
<div>
<div class="legend_climate"></div>
<div class="legend_name_climate">Climatological Information</div>
</div>
</div>
<div class="top_remark" style="display: none;">Members of the World Meteorological Organization (WMO)</div>
<div class="place_lists_box">
<ul id="place_lists"></ul>
<div style="clear: both;"></div>
<div class="nmhs_box">Information provided by <span id="wwi_nmhs"></span></div>
<div class="category_note"><strong>Remarks:</strong>
<ol>
<li>The categorization of region and the list of Members in each region are based on those adopted in World Meteorological Organization (WMO), which is a specialised agency of the United Nations for meteorology (weather and climate), operational hydrology and related geophysical sciences.</li>
<li>World city forecasts on this webpage are official forecasts provided by individual Members of the WMO.</li>
</ol>
</div>
</div>
</div>
<div class="setting_box" style="display: none;">
<h2 style="margin: 5px 0px;" class="self_align_left">Find a Forecast</h2>
<a class="close_setting" onclick="closeAddLocation();"><img src="../../../tc/wxinfo/worldwx/images/close_blue.png" alt="Close" /></a>
<p>Please enter city or place for finding weather information.</p>
<label for="chosen-select">Enter City or Place...</label><select data-placeholder="Enter City or Place..." id="chosen-select" class="chosen-select" style="width: 100%;">
<option value=""></option>
</select>
<div class="self_align_center fav_btn_div" style="margin-top: 10px; padding-top: 5px;">
<div class="fav_btn_main">
<div class="reset_fav_btn"><a class="button btn_reset_fav" onclick="resetToDefault();">Reset to default</a></div>
<div class="add_fav_btn"><a class="button button-blue btn_add_fav" onclick="updateFavList();">Add to my favourite location</a></div>
</div>
</div>
<div style="margin-top: 40px;">
<p>Drag the following city or place to change order.</p>
<ul id="fav_ul" class="chosen-choices"></ul>
</div>
</div>
<div class="mybox wrapper-expandable">
<div class="mybox mybox_title expandable-title" style="display: none;" id="weather_icon_table">
<div class="mybox_title expandable-title">
<div class="expandable-txt wxicon_desc"><a class="flip" href="#"> <span class="arrow"><span class="arrow-top"></span><span class="arrow-bottom"></span></span>Weather Icons<br /></a></div>
</div>
<div class="mybox_cont box-style-wrapper">
<div class="wxicons_box weather_icon_table" style="display: block; z-index: 2000;">
<table class="tbl_wxicons">
<tbody>
<tr>
<th>Icon</th>
<th>Weather</th>
<th>Icon</th>
<th>Weather</th>
</tr>
<tr>
<td class="icon_img"><img src="../../../en/wxinfo/worldwx/images/pic01.png" alt="Fine icon" /></td>
<td>Fine</td>
<td class="icon_img"><img src="../../../en/wxinfo/worldwx/images/pic02.png" alt="Bright icon" /></td>
<td>Bright</td>
</tr>
<tr>
<td class="icon_img"><img src="../../../en/wxinfo/worldwx/images/pic03.png" alt="Showers icon" /></td>
<td>Showers</td>
<td class="icon_img"><img src="../../../en/wxinfo/worldwx/images/pic04.png" alt="Cloudy icon" /></td>
<td>Cloudy</td>
</tr>
<tr>
<td class="icon_img"><img src="../../../en/wxinfo/worldwx/images/pic05.png" alt="Overcast icon" /></td>
<td>Overcast</td>
<td class="icon_img"><img src="../../../en/wxinfo/worldwx/images/pic06.png" alt="Thunderstorms icon" /></td>
<td>Thunderstorms</td>
</tr>
<tr>
<td class="icon_img"><img src="../../../en/wxinfo/worldwx/images/pic07.png" alt="Drizzle icon" /></td>
<td>Drizzle</td>
<td class="icon_img"><img src="../../../en/wxinfo/worldwx/images/pic08.png" alt="Rain icon" /></td>
<td>Rain</td>
</tr>
<tr>
<td class="icon_img"><img src="../../../en/wxinfo/worldwx/images/pic09.png" alt="Windy icon" /></td>
<td>Windy</td>
<td class="icon_img"><img src="../../../en/wxinfo/worldwx/images/pic10.png" alt="Dry icon" /></td>
<td>Dry</td>
</tr>
<tr>
<td class="icon_img"><img src="../../../en/wxinfo/worldwx/images/pic11.png" alt="Wet icon" /></td>
<td>Wet</td>
<td class="icon_img"><img src="../../../en/wxinfo/worldwx/images/pic12.png" alt="Fog icon" /></td>
<td>Fog</td>
</tr>
<tr>
<td class="icon_img"><img src="../../../en/wxinfo/worldwx/images/pic13.png" alt="Mist icon" /></td>
<td>Mist</td>
<td class="icon_img"><img src="../../../en/wxinfo/worldwx/images/pic14.png" alt="Haze icon" /></td>
<td>Haze</td>
</tr>
<tr>
<td class="icon_img"><img src="../../../en/wxinfo/worldwx/images/pic15.png" alt="Hot icon" /></td>
<td>Hot</td>
<td class="icon_img"><img src="../../../en/wxinfo/worldwx/images/pic16.png" alt="Cold icon" /></td>
<td>Cold</td>
</tr>
<tr>
<td class="icon_img"><img src="../../../en/wxinfo/worldwx/images/pic17.png" alt="Smoke icon" /></td>
<td>Smoke</td>
<td class="icon_img"><img src="../../../en/wxinfo/worldwx/images/pic18.png" alt="Snow icon" /></td>
<td>Snow</td>
</tr>
<tr>
<td class="icon_img"><img src="../../../en/wxinfo/worldwx/images/pic19.png" alt="Hail icon" /></td>
<td>Hail</td>
<td class="icon_img"><img src="../../../en/wxinfo/worldwx/images/pic20.png" alt="Sandstorm icon" /></td>
<td>Sandstorm</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="mybox wrapper-expandable">
<div class="mybox mybox_title expandable-title" style="display: none;" id="notes_box">
<div class="mybox_title expandable-title">
<div class="expandable-txt"><a class="flip" href="#"> <span class="arrow"><span class="arrow-top"></span><span class="arrow-bottom"></span></span>Notes<br /></a></div>
</div>
<div class="mybox_cont box-style-wrapper">
<div class="" style="display: block; z-index: 2000;">
<div class="notes_box_content">The background geographical information in this webpage comes from OpenStreetMap. The aim of using OpenStreetMap is to aid users in appreciating the geographical location of various weather information, it does not imply that information on the map is endorsed by the Hong Kong Observatory. The use of OpenStreetMap is subject to its <a style="all: unset; color: blue; cursor: pointer;" href="https://www.openstreetmap.org/copyright/en" target="_blank" rel="noopener noreferrer">License Terms</a>.</div>
</div>
</div>
</div>
</div>
<div class="back_and_top"><a class="btn_back" title="Back"></a> <a class="btn_top" href="#top" title="Top"></a>
<div class="clear"></div>
</div>
<script>var last_revision_date = '3 March 2025';</script>
                </div>
				<!--End Content-->
                </div>
            </div>
            <script type="text/javascript">pageBottom();</script>
        </div>
    </div>
    <div id="footer" class="footerArea">
        <div class="container"> 
			<script type="text/javascript">createFooter();</script>
        </div>
    </div>
</div>
</body>
</html>